(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[156],{1202:function(e,a,t){"use strict";t.r(a);var o=t(15),n=t(16),r=t(18),s=t(17),l=t(0),i=t.n(l),c=t(12),d=t(11),m=t(343),p=t(344),u=t(347),g=t(236),k=t(19),h=t(37),b=t.n(h),f=t(88),v=t(6),_=t(5),N=t(13),E=t.n(N),j=t(146),y=t(145),O=t(23),B=t(20),S=t(24),G=t(43),F=Object(g.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),K=function(e){Object(r.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleBarcode=function(){return function(e){clearTimeout(n.delay),n.delay=setTimeout((function(){var a=e.target.value;if(14===a.length)return Object(_.b)("barang-set/get-by-kode-barcode-set-active/"+a).then((function(e){e.data.detail_barang.forEach((function(a){n.handleBarcodeSet(a,e.data.kode_barcode_set)}))})),!0;var t=a.split("X");n.props.change("kodeBarang",t[0]),n.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]})}),1500)}},n.state={kodeBarang:[],no_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none",isBarangToko:!0},n}return Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(f.f)())}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",(this.props.netto-this.props.discGlobalGr).toFixed(3))}},{key:"pilihBarang",value:function(e){var a=this;if(void 0===this.state.kondisi_barang||""===this.state.kondisi_barang)return Object(O.e)("Mohon pilih kondisi barang dahulu"),!1;var t=e,o=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===t})),n=localStorage.getItem("customer_1")||"-";Object(_.b)("/kelompok-harga/get/by-jenis-and-customer/".concat(n,"&").concat(e,"&PUSAT")).then((function(e){var t,n,r,s,l,i,c,d;if(void 0===(null===(t=e.data)||void 0===t?void 0:t.return_normal))return Object(O.e)("Kadar return belum ditentukan, silahkan tentukan di kelompok harga"),a.props.change("kodeBarang"),!1;"AKSESORIS"===(null===(n=e.data)||void 0===n?void 0:n.kode_kelompok)?a.setState({no_aksesoris:"col-lg-12 row d-none",aksesoris:"col-lg-12 row"}):a.setState({no_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none"}),a.setState({kodeJenis:o[0].kode_jenis,namaJenis:o[0].nama_jenis,kadarCetak:null===(r=e.data)||void 0===r?void 0:r.kode_tukar_normal,kadarJual:"NORMAL"===a.state.kondisi_barang?null===(s=e.data)||void 0===s?void 0:s.return_normal:null===(l=e.data)||void 0===l?void 0:l.return_rongsok,kodeKategori:null===(i=e.data)||void 0===i?void 0:i.kode_kategori,namaKategori:null===(c=e.data)||void 0===c?void 0:c.nama_kategori,harga_jual:null===(d=e.data)||void 0===d?void 0:d.harga_aksesoris}),a.setKadar(),Object(v.w)("Plastik")}))}},{key:"setKadar",value:function(){this.props.change("keterangan",this.state.namaKategori),this.props.change("kadar",this.state.kadarCetak),this.props.change("kadarTransaksi",this.state.kadarJual),this.props.change("kodeKategori",this.state.kodeKategori),this.props.change("namaKategori",this.state.namaKategori),this.props.change("harga_jual",this.state.harga_jual)}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleBarcodeSet",value:function(e,a){var t=this,o=e.kode_jenis,n=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===o}));Object(_.b)("jenis/get/by-kode-jenis/".concat(e.kode_jenis)).then((function(o){var r={netto_disc:parseFloat(e.netto_disc||0).toFixed(3),gross:parseFloat(e.gross||0).toFixed(3),netto:parseFloat(e.netto||0).toFixed(3),qty:1,k:parseFloat(e.k||0),ongkos_rp:parseFloat(e.ongkos_rp||0),kadar_cetak:(n[0].kadar_cetak||0).toString(),disc_persen:e.disc_persen||0,kadar_jual:parseFloat(e.kadar_jual||0),kadar_level2:o.data.level2,kadar_level3:o.data.level3,kadar_modal:n[0].kadar_beli,kode_jenis:n[0].kode_jenis,kode_barcode:"-",kode_barcode_set:a,p:parseFloat(e.p||0),disc:e.disc||0,pkg:parseFloat(e.pkg||0),bruto:parseFloat(e.bruto||0).toFixed(3)},s=Object(v.e)({data:e,hasil:n,res:o,kode_barcode_set:a}),l=Object(v.f)({data:e,res:o,hasil:n,kode_barcode_set:a}),i=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],c=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],m=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[];i.push(r),c.push(s),m.push(l);var p=i.map((function(e){return parseFloat(e.netto_disc)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",p),localStorage.setItem("transaksiPenjualan",JSON.stringify(i)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(c)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(m)),E.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),t.props.dispatch(Object(j.e)()),t.props.dispatch(Object(y.e)()),t.props.dispatch(Object(d.b)("FormTransaksiReturn")),t.props.dispatch(Object(S.g)()),t.props.dispatch(Object(B.o)("transaksiPenjualan")),t.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})})).catch((function(e){return Object(O.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}))}},{key:"render",value:function(){var e=this;return i.a.createElement("form",{onSubmit:this.props.handleSubmit},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{"data-for":"refresh",className:"btn btn-circle btn-primary",type:"button","data-tip":!0,onClick:function(){return e.props.dispatch(Object(d.b)("FormTransaksiReturn"))}},i.a.createElement("i",{class:"fa fa-retweet","aria-hidden":"true"}),i.a.createElement(G.a,{id:"refresh",type:"dark",effect:"solid"},i.a.createElement("span",null,"Refresh"))))),i.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},i.a.createElement(m.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:k.a,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),i.a.createElement("div",{className:"col-lg-12 mb-5 justify-content-center"},i.a.createElement("div",{className:"col-md-3 col-lg-4"},""!==String(this.props.KodeBarangList)?i.a.createElement(m.a,{name:"type_barang",label:"Type Barang",component:k.b,className:"form-control",onChange:function(a){"BARANG NON AYU"===a&&e.props.dispatch(Object(d.b)("FormTransaksiReturn")),e.setState({isBarangToko:"BARANG AYU"===a})},options:[{value:"BARANG AYU",name:"BARANG AYU"},{value:"BARANG NON AYU",name:"BARANG NON AYU"}]}):i.a.createElement(b.a,{width:"100%",height:50}))),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},""!==String(this.props.KodeBarangList)?i.a.createElement(m.a,{name:"kondisi_barang",label:"Kondisi Barang",component:k.b,className:"form-control",onChange:function(a){return e.setState({kondisi_barang:a})},options:[{value:"NORMAL",name:"NORMAL"},{value:"RONGSOK",name:"RONGSOK"}]}):i.a.createElement(b.a,{width:"100%",height:50})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-4 form-group":"col-md-4 form-group d-none"},""!==String(this.props.KodeBarangList)?i.a.createElement(m.a,{name:"kodeBarang",label:"Kode Model",component:k.b,className:"form-control",onChange:function(a){return e.pilihBarang(a)},onBlur:this.setKadar(),options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok||"AKSESORIS"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:e.nama_jenis}}))}):i.a.createElement(b.a,{width:"100%",height:50})),i.a.createElement("div",{className:"col-lg-12 row"!==this.state.no_aksesoris?"col-md-3 col-lg-3 d-none":this.state.isBarangToko?"col-md-3 col-lg-3":"col-md-3 col-lg-3 d-none"},i.a.createElement(m.a,{name:"kode_barocde",label:"Kode Barcode",type:"text",component:k.a,placeholder:"Biarkan Kosong jika Tidak Digunakan",normalize:function(e){return e&&e.toUpperCase()},onChange:this.handleBarcode()})),i.a.createElement("div",{className:(this.state.no_aksesoris,"col-md-2 col-lg-2 d-none")},i.a.createElement(m.a,{name:"kadar",label:"Kode Tukar",type:"number",component:k.a})),i.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},i.a.createElement(m.a,{name:"kodeKategori",label:"Kode Tukar",type:"number",component:k.a})),i.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},i.a.createElement(m.a,{name:"namaKategori",label:"Kode Tukar",type:"number",component:k.a})),i.a.createElement("div",{className:this.state.no_aksesoris},i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(m.a,{name:"p",label:"Plastik",type:"number",component:k.a})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(m.a,{name:"k",label:"Kertas",type:"number",component:k.a})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(m.a,{name:"pkg",label:"Pkg (Gr)",type:"number",component:k.a,onBlur:function(){return e.onclick1()}})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(m.a,{name:"bruto",label:"Berat (Gr)",type:"number",component:k.a,onChange:this.onclick1()})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"kadarTransaksi",label:"Kode Tukar",type:"number",component:k.a,onBlur:function(){return e.onclick1()}})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"netto",label:"Netto (Gr)",type:"number",component:k.a,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"gross",label:"Gross (Gr)",type:"number",component:k.a,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"discGlobalPr",label:"Diskon (%)",type:"number",component:k.a,onBlur:function(){return e.onclick1()}})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"discGlobalGr",label:"Diskon (Gr)",type:"number",component:k.a,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"nettoDiscGlobalExt",label:"Netto - Diskon (Gr)",type:"number",component:k.a,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),i.a.createElement(m.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},F)))),i.a.createElement("div",{className:this.state.aksesoris},i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(m.a,{name:"qty",label:"Qty",type:"number",component:k.a})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement("label",{htmlFor:""},"Harga Jual"),i.a.createElement(m.a,Object.assign({name:"harga_jual",component:"input",type:"tel",className:"form-control"},F))))),i.a.createElement("div",{className:"col-lg-12 col-md-12"},i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Simpan"))))}}]),t}(l.Component);K=Object(p.a)({form:"FormTransaksiReturn",enableReinitialize:!0})(K);var T=Object(u.a)("FormTransaksiReturn");a.default=Object(c.b)((function(e){var a=T(e,"bruto","kadarTransaksi","pkg","discGlobalPr"),t=a.bruto,o=a.kadarTransaksi,n=a.pkg,r=a.discGlobalPr;return{netto:(parseFloat(t||0)*(parseFloat(o||0)/100)).toFixed(3),gross:parseFloat(t||0)+parseFloat(n||0),discGlobalGr:(parseFloat(t||0)*(parseFloat(r||0)/100)).toFixed(3),KodeBarangList:e.provinsi.kodeBarang,initialValues:{discGlobalPr:0,p:0,k:0,pkg:0,bruto:0,type_barang:"BARANG AYU"}}}))(K)}}]);
//# sourceMappingURL=156.c56d7b27.chunk.js.map