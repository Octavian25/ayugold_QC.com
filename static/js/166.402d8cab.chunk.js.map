{"version":3,"sources":["Transaksi/TransaksiReparasi.jsx"],"names":["ModalMasterData","lazy","FormTransaksiReparasi","TransaksiReparasi","props","inputChange","input","e","setState","target","value","state","listLokasi","listSales","listCustomer","listPacking","kodeCustomer","columns","dataField","text","align","headerAlign","formatter","cell","row","parseInt","toLocaleString","csvExport","rowContent","rowIndex","className","data-tip","data-for","onClick","deleteRow","netto_disc","id","type","effect","noBon","namaCustomer","lokasi","sales","namaToko","tanggal","data","field_level1","field_level2","dihapus","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","array","JSON","parse","localStorage","getItem","splice","setItem","stringify","awal","hasil","parseFloat","toFixed","timer","showConfirmButton","position","dispatch","getListTransaksiReparasi","removeItem","this","getLokasi","getsalesmanList","getcustomerList","getUUID","a","ongkos_reparasi_2","ongkos_reparasi_3","customer_2","level_customer","customer_3","AxiosMasterGet","kodeBarang","res","ongkos_reparasi","catch","kode_kategori","kodeKategori","simpan_nota_1","simpan_nota_2","simpan_nota_3","posisi","findIndex","posisi_2","posisi_3","nota_1","ongkos_rp","undefined","rp","qty","bruto","nota_2","nota_3","push","nota_1_else","nota_2_else","nota_3_else","simpan","kode_jenis","simpan_level2","simpan_level3","array_level2","array_level3","reset","err","gagal","warning","no_bon","toUpperCase","no_reparasi","noFaktur","getToday","kode_lokasi","kode_sales","kode_customer","level_customer_trx","kode_customer_level2","kode_customer_level3","detail_barang","progressSend","AxiosMasterPost","printNota","finishSend","toko","document","getElementById","window","location","reload","level","tableRows","table","footer","columTable","forEach","ticket","i","ticketData","content","styles","halign","formatGram","formatRp","map","list","reduce","b","console","log","PrintNota","getUserID","param","filter","change","levelnya","kode_customer_level1","name","nama_lokasi","String","onKeyDown","event","key","htmlFor","label","onChange","defaultValue","options","search","placeholder","onSubmit","obj","nama_sales","nama_toko","nama_customer","onSubmitToko","onBlur","component","renderField","readOnly","renderFieldSelect","fil","showModal","disabled","class","aria-hidden","keyField","listReparasi","onSend","transaksiPenjualanSubmit","width","height","fallback","count","handleSubmit","Component","reduxForm","form","enableReinitialize","connect","provinsi","customer","salesman","username"],"mappings":"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","file":"static/js/166.402d8cab.chunk.js","sourcesContent":["import React, { Component, lazy, Suspense } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm, reset } from \"redux-form\";\r\nimport SelectSearch from \"react-select-search\";\r\nimport { getUUID } from \"../actions/fakturAction\";\r\nimport Swal from \"sweetalert2\";\r\nimport { getListTransaksiReparasi } from \"../actions/transaksiPenjualanAction\";\r\nimport { finishSend, progressSend } from \"../actions/LogicAction\";\r\nimport PrintNota from \"../Stocking/Component/PrintNota\";\r\nimport { gagal, warning } from \"../Alert\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { showModal } from \"../actions/ModalAction\";\r\nimport HeaderCard from \"../HeaderCard\";\r\nimport { getLokasi } from \"../actions/lokasiAction\";\r\nimport { getsalesmanList } from \"../actions/salesmanAction\";\r\nimport { getcustomerList } from \"../actions/customerAction\";\r\nimport { AxiosMasterGet, AxiosMasterPost } from \"../Axios\";\r\nimport GlobalTabel from \"../GlobalComponent/GlobalTabel\";\r\nimport { renderField, renderFieldSelect } from \"../renderField\";\r\nimport { getToday } from \"../GlobalComponent/function\";\r\nimport { formatGram, formatRp, getUserID } from \"../helper\";\r\n\r\nconst ModalMasterData = lazy(() =>\r\n  import(\"../DataMaster/Component/ModalMasterData\")\r\n);\r\nconst FormTransaksiReparasi = lazy(() =>\r\n  import(\"./Component/FormTranskasiReparasi\")\r\n);\r\nconst maptostate = (state) => {\r\n  return {\r\n    noFaktur: state.provinsi.noFaktur,\r\n    listReparasi: state.provinsi.listReparasi,\r\n    listCustomer: state.provinsi.customer,\r\n    listLokasi: state.provinsi.lokasi,\r\n    listSales: state.provinsi.salesman,\r\n    username: state.provinsi.username,\r\n    onSend: state.provinsi.onSend,\r\n    kodeBarang: state.provinsi.kodeBarang,\r\n  };\r\n};\r\nclass TransaksiReparasi extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      listLokasi: [],\r\n      listSales: [],\r\n      listCustomer: [],\r\n      listPacking: [],\r\n      kodeCustomer: \"\",\r\n      columns: [\r\n        {\r\n          dataField: \"kode_jenis\",\r\n          text: \"Kode Model\",\r\n        },\r\n        {\r\n          dataField: \"bruto\",\r\n          text: \"Berat\\n(Gr)\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n        },\r\n        {\r\n          dataField: \"qty\",\r\n          text: \"Qty\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n        },\r\n        {\r\n          dataField: \"ongkos_rp\",\r\n          text: \"Ongkos Reparasi(Rp)\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n          formatter: (cell, row) => {\r\n            return parseInt(cell).toLocaleString(\"id-ID\");\r\n          },\r\n        },\r\n        {\r\n          dataField: \"Aksi\",\r\n          text: \"Aksi\",\r\n          csvExport: false,\r\n          formatter: (rowContent, row, rowIndex) => {\r\n            return (\r\n              <div className=\"text-center\">\r\n                <button\r\n                  data-tip\r\n                  data-for=\"hapus\"\r\n                  className=\"btn btn-danger mr-2\"\r\n                  onClick={() => this.deleteRow(rowIndex, row.netto_disc)}\r\n                >\r\n                  <ReactTooltip id=\"hapus\" type=\"dark\" effect=\"solid\">\r\n                    <span>Hapus</span>\r\n                  </ReactTooltip>\r\n                  <i className=\"fa fa-trash mr-1\"></i>\r\n                </button>\r\n                <br />\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n      noBon: \"\",\r\n      namaCustomer: \"\",\r\n      lokasi: \"\",\r\n      sales: \"\",\r\n      namaToko: \"\",\r\n      tanggal: \"\",\r\n      data: \"\",\r\n      field_level1: \"col-lg-4 invisible\",\r\n      field_level2: \"col-lg-4 invisible\",\r\n    };\r\n  }\r\n\r\n  deleteRow(rowIndex, dihapus) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin ?\",\r\n      text: \"Anda Akan Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Yes, delete it!\",\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        const array =\r\n          JSON.parse(localStorage.getItem(\"transaksiReparasi\")) || [];\r\n        array.splice(rowIndex, 1);\r\n        localStorage.setItem(\"transaksiReparasi\", JSON.stringify(array));\r\n        var awal = localStorage.getItem(\"GrandTotalNetto\");\r\n        var hasil = parseFloat(awal) - parseFloat(dihapus);\r\n        localStorage.setItem(\"GrandTotalNetto\", parseFloat(hasil).toFixed(3));\r\n        Swal.fire({\r\n          text: \"Berhasil\",\r\n          timer: 2000,\r\n          showConfirmButton: false,\r\n          position: \"top-right\",\r\n          icon: \"success\",\r\n        }).then(() => this.props.dispatch(getListTransaksiReparasi()));\r\n      }\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    // localStorage.removeItem(\"transaksiReparasi\");\r\n    localStorage.removeItem(\"transaksiReparasi_level2\");\r\n    localStorage.removeItem(\"transaksiReparasi_level3\");\r\n    localStorage.removeItem(\"nota_reparasi_level1\");\r\n    localStorage.removeItem(\"nota_reparasi_level2\");\r\n    localStorage.removeItem(\"nota_reparasi_level3\");\r\n    localStorage.removeItem(\"transaksiReparasi\");\r\n    this.props.dispatch(getListTransaksiReparasi());\r\n    this.props.dispatch(getLokasi());\r\n    this.props.dispatch(getsalesmanList());\r\n    this.props.dispatch(getcustomerList());\r\n    this.props.dispatch(getUUID());\r\n  }\r\n\r\n  async handleSubmit(data) {\r\n    let ongkos_reparasi_2 = 0;\r\n    let ongkos_reparasi_3 = 0;\r\n    let customer_2 =\r\n      this.state.level_customer === \"LEVEL2\"\r\n        ? this.state.kodeCustomer\r\n        : localStorage.getItem(\"customer_2\");\r\n    let customer_3 =\r\n      this.state.level_customer === \"LEVEL3\" ? this.state.kodeCustomer : \"-\";\r\n    await AxiosMasterGet(\r\n      `/kelompok-harga/get/by-jenis-and-customer/${customer_2}&${data.kodeBarang}`\r\n    )\r\n      .then((res) => (ongkos_reparasi_2 = res.data.ongkos_reparasi || 0))\r\n      .catch(() => (ongkos_reparasi_2 = 0));\r\n    await AxiosMasterGet(\r\n      `/kelompok-harga/get/by-jenis-and-customer/${customer_3}&${data.kodeBarang}`\r\n    )\r\n      .then((res) => (ongkos_reparasi_3 = res.data.ongkos_reparasi || 0))\r\n      .catch(() => (ongkos_reparasi_3 = 0));\r\n    AxiosMasterGet(`jenis/get/by-kode-jenis/${data.kodeBarang}`)\r\n      .then((res) => {\r\n        let kode_kategori = data.kodeKategori;\r\n        var simpan_nota_1 =\r\n          JSON.parse(localStorage.getItem(\"nota_reparasi_level1\")) || [];\r\n        var simpan_nota_2 =\r\n          JSON.parse(localStorage.getItem(\"nota_reparasi_level2\")) || [];\r\n        var simpan_nota_3 =\r\n          JSON.parse(localStorage.getItem(\"nota_reparasi_level3\")) || [];\r\n        var posisi = simpan_nota_1.findIndex(\r\n          (data) => data.kode_kategori === kode_kategori\r\n        );\r\n        var posisi_2 = simpan_nota_2.findIndex(\r\n          (data) => data.kode_kategori === kode_kategori\r\n        );\r\n        var posisi_3 = simpan_nota_3.findIndex(\r\n          (data) => data.kode_kategori === kode_kategori\r\n        );\r\n        if (posisi !== -1) {\r\n          var nota_1 = {\r\n            ongkos_rp:\r\n              parseFloat(data.rp === undefined ? 0 : data.rp) *\r\n                parseFloat(data.qty) +\r\n              parseFloat(simpan_nota_1[posisi].ongkos_rp), //ongkos\r\n            bruto: (\r\n              parseFloat(data.bruto || 0) +\r\n              parseFloat(simpan_nota_1[posisi].bruto)\r\n            ).toFixed(3), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          var nota_2 = {\r\n            ongkos_rp:\r\n              parseFloat(ongkos_reparasi_2) * parseFloat(data.qty) +\r\n              parseFloat(simpan_nota_2[posisi].ongkos_rp), //ongkos\r\n            bruto: (\r\n              parseFloat(data.bruto || 0) +\r\n              parseFloat(simpan_nota_2[posisi].bruto)\r\n            ).toFixed(3), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          var nota_3 = {\r\n            ongkos_rp:\r\n              parseFloat(ongkos_reparasi_3) * parseFloat(data.qty) +\r\n              parseFloat(simpan_nota_3[posisi].ongkos_rp), //ongkos\r\n            bruto: (\r\n              parseFloat(data.bruto || 0) +\r\n              parseFloat(simpan_nota_3[posisi].bruto)\r\n            ).toFixed(3), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          simpan_nota_1.push(nota_1);\r\n          simpan_nota_2.push(nota_2);\r\n          simpan_nota_3.push(nota_3);\r\n          simpan_nota_1.splice(posisi, 1);\r\n          simpan_nota_2.splice(posisi_2, 1);\r\n          simpan_nota_3.splice(posisi_3, 1);\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level1\",\r\n            JSON.stringify(simpan_nota_1)\r\n          );\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level2\",\r\n            JSON.stringify(simpan_nota_2)\r\n          );\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level3\",\r\n            JSON.stringify(simpan_nota_3)\r\n          );\r\n        } else {\r\n          var nota_1_else = {\r\n            ongkos_rp:\r\n              parseFloat(data.rp === undefined ? 0 : data.rp) *\r\n              parseFloat(data.qty), //ongkos\r\n            bruto: parseFloat(data.bruto || 0).toFixed(3), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          var nota_2_else = {\r\n            ongkos_rp:\r\n              parseFloat(\r\n                ongkos_reparasi_2 === undefined ? 0 : ongkos_reparasi_2\r\n              ) * parseFloat(data.qty), //ongkos\r\n            bruto: parseFloat(data.bruto || 0), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          var nota_3_else = {\r\n            ongkos_rp:\r\n              parseFloat(\r\n                ongkos_reparasi_3 === undefined ? 0 : ongkos_reparasi_3\r\n              ) * parseFloat(data.qty), //ongkos\r\n            bruto: parseFloat(data.bruto || 0), //berat\r\n            kode_kategori: data.kodeKategori,\r\n            qty: data.qty,\r\n          };\r\n          simpan_nota_1.push(nota_1_else);\r\n          simpan_nota_2.push(nota_2_else);\r\n          simpan_nota_3.push(nota_3_else);\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level1\",\r\n            JSON.stringify(simpan_nota_1)\r\n          );\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level2\",\r\n            JSON.stringify(simpan_nota_2)\r\n          );\r\n          localStorage.setItem(\r\n            \"nota_reparasi_level3\",\r\n            JSON.stringify(simpan_nota_3)\r\n          );\r\n        }\r\n        var simpan = {\r\n          qty: data.qty,\r\n          ongkos_rp: parseFloat(data.rp === undefined ? 0 : data.rp), //ongkos\r\n          bruto: parseFloat(data.bruto || 0).toFixed(3), //berat\r\n          kode_jenis: data.kodeBarang,\r\n        };\r\n        var simpan_level2 = {\r\n          qty: data.qty,\r\n          ongkos_rp: parseFloat(\r\n            ongkos_reparasi_2 === undefined ? 0 : ongkos_reparasi_2\r\n          ), //ongkos\r\n          bruto: parseFloat(data.bruto || 0).toFixed(3), //berat\r\n          kode_jenis: data.kodeBarang,\r\n        };\r\n        var simpan_level3 = {\r\n          qty: data.qty,\r\n          ongkos_rp: parseFloat(\r\n            ongkos_reparasi_3 === undefined ? 0 : ongkos_reparasi_3\r\n          ), //ongkos\r\n          bruto: parseFloat(data.bruto || 0).toFixed(3), //berat\r\n          kode_jenis: data.kodeBarang,\r\n        };\r\n\r\n        var array = JSON.parse(localStorage.getItem(\"transaksiReparasi\")) || [];\r\n        var array_level2 =\r\n          JSON.parse(localStorage.getItem(\"transaksiReparasi_level2\")) || [];\r\n        var array_level3 =\r\n          JSON.parse(localStorage.getItem(\"transaksiReparasi_level3\")) || [];\r\n        array.push(simpan);\r\n        array_level2.push(simpan_level2);\r\n        array_level3.push(simpan_level3);\r\n        localStorage.setItem(\"transaksiReparasi\", JSON.stringify(array));\r\n        localStorage.setItem(\r\n          \"transaksiReparasi_level2\",\r\n          JSON.stringify(array_level2)\r\n        );\r\n        localStorage.setItem(\r\n          \"transaksiReparasi_level3\",\r\n          JSON.stringify(array_level3)\r\n        );\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"success\",\r\n          text: \"Data Berhasil Ditambahkan!\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n        this.props.dispatch(getListTransaksiReparasi());\r\n        this.props.dispatch(reset(\"FormTransaksiReparasi\"));\r\n      })\r\n      .catch((err) =>\r\n        gagal(\"Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu\")\r\n      );\r\n  }\r\n\r\n  transaksiPenjualanSubmit() {\r\n    if (localStorage.getItem(\"transaksiReparasi\") === null) {\r\n      warning(\"Barang masih kosong, Silahkan tambah barang\");\r\n      return false;\r\n    } else if (this.state.noBon === \"\") {\r\n      warning(\"Mohon isi Nomor bon\");\r\n      return false;\r\n    } else if (this.state.lokasi === \"\") {\r\n      warning(\"Mohon pilih lokasi\");\r\n      return false;\r\n    } else if (this.state.sales === \"\") {\r\n      warning(\"Mohon pilih Sales\");\r\n      return false;\r\n    }\r\n    var simpan = {};\r\n    switch (this.state.level_customer) {\r\n      case \"LEVEL1\":\r\n        simpan = {\r\n          no_bon: this.state.noBon.toUpperCase(),\r\n          no_reparasi: this.props.noFaktur.toUpperCase(),\r\n          tanggal: this.state.tanggal || getToday(),\r\n          kode_lokasi: this.state.lokasi.toUpperCase(),\r\n          kode_sales: this.state.sales.toUpperCase(),\r\n          kode_customer: this.state.kodeCustomer.toUpperCase(),\r\n          level_customer_trx: this.state.level_customer,\r\n          kode_customer_level2: localStorage.getItem(\"customer_1\") || \"-\",\r\n          kode_customer_level3: localStorage.getItem(\"customer_2\") || \"-\",\r\n          detail_barang: JSON.parse(localStorage.getItem(\"transaksiReparasi\")),\r\n        };\r\n        break;\r\n      case \"LEVEL2\":\r\n        simpan = {\r\n          no_bon: this.state.noBon.toUpperCase(),\r\n          no_reparasi: this.props.noFaktur.toUpperCase(),\r\n          tanggal: this.state.tanggal || getToday(),\r\n          kode_lokasi: this.state.lokasi.toUpperCase(),\r\n          kode_sales: this.state.sales.toUpperCase(),\r\n          kode_customer: localStorage.getItem(\"customer_1\") || \"-\",\r\n          level_customer_trx: this.state.level_customer,\r\n          kode_customer_level2: this.state.kodeCustomer,\r\n          kode_customer_level3: localStorage.getItem(\"customer_2\") || \"-\",\r\n          detail_barang: JSON.parse(localStorage.getItem(\"transaksiReparasi\")),\r\n        };\r\n        break;\r\n      case \"LEVEL3\":\r\n        simpan = {\r\n          no_bon: this.state.noBon.toUpperCase(),\r\n          no_reparasi: this.props.noFaktur.toUpperCase(),\r\n          tanggal: this.state.tanggal || getToday(),\r\n          kode_lokasi: this.state.lokasi.toUpperCase(),\r\n          kode_sales: this.state.sales.toUpperCase(),\r\n          kode_customer: localStorage.getItem(\"customer_1\") || \"-\",\r\n          level_customer_trx: this.state.level_customer,\r\n          kode_customer_level2: localStorage.getItem(\"customer_2\") || \"-\",\r\n          kode_customer_level3: this.state.kodeCustomer,\r\n          detail_barang: JSON.parse(localStorage.getItem(\"transaksiReparasi\")),\r\n        };\r\n        break;\r\n      default:\r\n        warning(\"Ada Kesalah Saat Proses Level Customer\");\r\n        break;\r\n    }\r\n    this.props.dispatch(progressSend());\r\n    AxiosMasterPost(\"reparasi/post/simpan-transaksi\", simpan)\r\n      .then(() =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"success\",\r\n          text: \"Data Berhasil Ditambahkan!\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n          .then(() => {\r\n            switch (this.state.level_customer) {\r\n              case \"LEVEL1\":\r\n                this.printNota(\"LEVEL1\");\r\n                break;\r\n              case \"LEVEL2\":\r\n                this.printNota(\"LEVEL1\");\r\n                this.printNota(\"LEVEL2\");\r\n                break;\r\n              case \"LEVEL3\":\r\n                this.printNota(\"LEVEL1\");\r\n                this.printNota(\"LEVEL2\");\r\n                this.printNota(\"LEVEL3\");\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n          })\r\n          .then(() => this.props.dispatch(finishSend()))\r\n          .then(() => localStorage.removeItem(\"transaksiReparasi\"))\r\n          .then(() => localStorage.removeItem(\"transaksiReparasi_level2\"))\r\n          .then(() => localStorage.removeItem(\"transaksiReparasi_level3\"))\r\n          .then(() => localStorage.removeItem(\"noFaktur\"))\r\n          .then(() => this.props.dispatch(getUUID()))\r\n          .then(() => this.props.dispatch(getListTransaksiReparasi()))\r\n          .then(() =>\r\n            this.setState({\r\n              noBon: \"\",\r\n              namaCustomer: \"\",\r\n              lokasi: \"\",\r\n              sales: \"\",\r\n              namaToko: \"\",\r\n              tanggal: \"\",\r\n              toko: \"\",\r\n            })\r\n          )\r\n          .then(() => document.getElementById(\"myForm\").reset())\r\n          .then(() => window.location.reload())\r\n      )\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"error\",\r\n          text: `${err}`,\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then(() => this.props.dispatch(finishSend()))\r\n      );\r\n  }\r\n\r\n  printNota(level) {\r\n    // INISIALISASI AUTOTABLE\r\n    const tableRows = [];\r\n    var table = [];\r\n    var footer = [];\r\n    var columTable = [];\r\n    switch (level) {\r\n      case \"LEVEL1\":\r\n        table = JSON.parse(localStorage.getItem(\"nota_reparasi_level1\"));\r\n        // for each ticket pass all its data into an array\r\n        table.forEach((ticket, i) => {\r\n          const ticketData = [\r\n            ++i,\r\n            ticket.kode_kategori,\r\n            {content : ticket.qty, styles: { halign: \"right\" }},\r\n            {content : formatGram(parseFloat(ticket.bruto)), styles: { halign: \"right\" }},\r\n            {content : formatRp(ticket.ongkos_rp), styles: { halign: \"right\" }},\r\n          ];\r\n          tableRows.push(ticketData);\r\n          // push each tickcet's info into a row\r\n        });\r\n        footer = [\r\n          \"\",\r\n          \"\",\r\n         {content :  table.map((list) => parseFloat(list.qty)).reduce((a, b) => a + b, 0), styles : { halign: \"right\" }},\r\n          {content : formatGram(table\r\n            .map((list) => parseFloat(list.bruto))\r\n            .reduce((a, b) => a + b, 0)), styles : { halign: \"right\" }},\r\n         {content : formatRp( table\r\n          .map((list) => parseInt(list.ongkos_rp))\r\n          .reduce((a, b) => a + b, 0)), styles : { halign: \"right\" }},\r\n        ];\r\n        // tableRows.push(footer);\r\n        console.log(JSON.stringify(tableRows));\r\n        columTable = [\r\n          [\"No\",\r\n          \"Kode Kategori\",\r\n          {content : \"Qty\", styles: { halign: \"right\" }},\r\n          {content : \"Bruto \\n(Gr)\", styles: { halign: \"right\" }},\r\n          {content : \"Ongkos Reparasi\", styles: { halign: \"right\" }},]\r\n        ];\r\n        // AKHIR INISIALISASI AUTOTABLE\r\n        PrintNota(\r\n          \"no Trx\",\r\n          this.props.noFaktur,\r\n          \"Tanggal\",\r\n          this.state.tanggal || getToday(),\r\n          \"No Bon\",\r\n          this.state.noBon,\r\n          \"Sales\",\r\n          this.state.sales,\r\n          getUserID(),\r\n          getToday(),\r\n          \"\",\r\n          columTable,\r\n          \"Transaksi Reparasi\",\r\n          tableRows,\r\n          footer\r\n        );\r\n        break;\r\n      case \"LEVEL2\":\r\n        table = JSON.parse(localStorage.getItem(\"nota_reparasi_level2\"));\r\n        // for each ticket pass all its data into an array\r\n        table.forEach((ticket, i) => {\r\n          const ticketData = [\r\n            ++i,\r\n            ticket.kode_kategori,\r\n            ticket.qty,\r\n            parseFloat(ticket.bruto).toFixed(3),\r\n            ticket.ongkos_rp.toLocaleString(\"id-ID\"),\r\n          ];\r\n          tableRows.push(ticketData);\r\n          // push each tickcet's info into a row\r\n        });\r\n        footer = [\r\n          \"\",\r\n          \"\",\r\n          table.map((list) => parseFloat(list.qty)).reduce((a, b) => a + b, 0),\r\n\r\n          table\r\n            .map((list) => parseFloat(list.bruto))\r\n            .reduce((a, b) => a + b, 0)\r\n            .toFixed(3),\r\n          table\r\n            .map((list) => parseInt(list.ongkos_rp))\r\n            .reduce((a, b) => a + b, 0)\r\n            .toLocaleString(\"id-ID\"),\r\n        ];\r\n        tableRows.push(footer);\r\n        console.log(JSON.stringify(tableRows));\r\n        columTable = [\r\n          \"No\",\r\n          \"Kode Kategori\",\r\n          \"Qty\",\r\n          \"Bruto \\n(Gr)\",\r\n          \"Ongkos Reparasi\",\r\n        ];\r\n        // AKHIR INISIALISASI AUTOTABLE\r\n        PrintNota(\r\n          \"no Trx\",\r\n          this.props.noFaktur,\r\n          \"Tanggal\",\r\n          this.state.tanggal || getToday(),\r\n          \"No Bon\",\r\n          this.state.noBon,\r\n          \"Sales\",\r\n          this.state.sales,\r\n          \"ADMIN\",\r\n          this.state.tanggal || getToday(),\r\n          \"\",\r\n          columTable,\r\n          \"Transaksi Reparasi\",\r\n          tableRows\r\n        );\r\n        break;\r\n      case \"LEVEL3\":\r\n        table = JSON.parse(localStorage.getItem(\"nota_reparasi_level3\"));\r\n        // for each ticket pass all its data into an array\r\n        table.forEach((ticket, i) => {\r\n          const ticketData = [\r\n            ++i,\r\n            ticket.kode_kategori,\r\n            ticket.qty,\r\n            parseFloat(ticket.bruto).toFixed(3),\r\n            ticket.ongkos_rp.toLocaleString(\"id-ID\"),\r\n          ];\r\n          tableRows.push(ticketData);\r\n          // push each tickcet's info into a row\r\n        });\r\n        footer = [\r\n          \"\",\r\n          \"\",\r\n          table.map((list) => parseFloat(list.qty)).reduce((a, b) => a + b, 0),\r\n\r\n          table\r\n            .map((list) => parseFloat(list.bruto))\r\n            .reduce((a, b) => a + b, 0)\r\n            .toFixed(3),\r\n          table\r\n            .map((list) => parseInt(list.ongkos_rp))\r\n            .reduce((a, b) => a + b, 0)\r\n            .toLocaleString(\"id-ID\"),\r\n        ];\r\n        tableRows.push(footer);\r\n        console.log(JSON.stringify(tableRows));\r\n        columTable = [\r\n          \"No\",\r\n          \"Kode Kategori\",\r\n          \"Qty\",\r\n          \"Bruto \\n(Gr)\",\r\n          \"Ongkos Reparasi\",\r\n        ];\r\n        // AKHIR INISIALISASI AUTOTABLE\r\n        PrintNota(\r\n          \"no Trx\",\r\n          this.props.noFaktur,\r\n          \"Tanggal\",\r\n          this.state.tanggal || getToday(),\r\n          \"No Bon\",\r\n          this.state.noBon,\r\n          \"Sales\",\r\n          this.state.sales,\r\n          \"ADMIN\",\r\n          this.state.tanggal || getToday(),\r\n          \"\",\r\n          columTable,\r\n          \"Transaksi Reparasi\",\r\n          tableRows\r\n        );\r\n        break;\r\n      default:\r\n        warning(\"Error Print\");\r\n        break;\r\n    }\r\n  }\r\n\r\n  inputChange = (input) => (e) => {\r\n    this.setState({\r\n      [input]: e.target.value,\r\n    });\r\n  };\r\n\r\n  onSubmit(data, input) {\r\n    this.setState({\r\n      [input]: data,\r\n    });\r\n  }\r\n  onSubmitToko(data) {\r\n    let param = data;\r\n    let hasil = this.props.listCustomer.filter(\r\n      (data) => data.kode_customer === param\r\n    );\r\n    this.setState({\r\n      kodeCustomer: data,\r\n      level_customer: hasil[0].level_customer,\r\n    });\r\n    this.props.change(\"level_customer\", hasil[0].level_customer);\r\n    if (hasil[0].level_customer === \"LEVEL2\") {\r\n      this.setState({\r\n        field_level1: \"col-lg-4\",\r\n        field_level2: \"col-lg-4 invisible\",\r\n      });\r\n    } else if (hasil[0].level_customer === \"LEVEL3\") {\r\n      this.setState({\r\n        field_level1: \"col-lg-4\",\r\n        field_level2: \"col-lg-4\",\r\n      });\r\n    } else {\r\n      this.setState({\r\n        field_level1: \"col-lg-4 invisible\",\r\n        field_level2: \"col-lg-4 invisible\",\r\n      });\r\n    }\r\n    AxiosMasterGet(`customer/get/by-kode-customer/${data}`).then((res) => {\r\n      let levelnya = res.data;\r\n      this.setState({\r\n        kode_customer_level1: levelnya.kode_customer_level1,\r\n        kode_customer_level2: levelnya.kode_customer_level2,\r\n      });\r\n      this.props.change(\"level_customer_1\", levelnya.kode_customer_level1);\r\n      this.props.change(\"level_customer_2\", levelnya.kode_customer_level2);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let lokasi = [\r\n      {\r\n        value: \"SALES\",\r\n        name: \"SALES\",\r\n      },\r\n    ];\r\n    this.props.listLokasi.map((row) => {\r\n      let data = {\r\n        value: row.kode_lokasi,\r\n        name: row.nama_lokasi,\r\n      };\r\n      lokasi.push(data);\r\n      return true;\r\n    });\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {String(this.props.listPacking) !== \"\" ? (\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"card\">\r\n              <HeaderCard title=\"Transaksi Reparasi\" />\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-lg-12\">\r\n                    <form\r\n                      id=\"myForm\"\r\n                      onKeyDown={(event) => {\r\n                        return event.key !== \"Enter\";\r\n                      }}\r\n                    >\r\n                      <div className=\"row\">\r\n                        <div className=\"col-lg-4 col-md-4\">\r\n                          <div className=\"form-group\">\r\n                            <label htmlFor=\"\">Tanggal</label>\r\n                            <input\r\n                              name=\"tanggal\"\r\n                              type=\"date\"\r\n                              label=\"Tanggal\"\r\n                              className=\"form-control\"\r\n                              onChange={this.inputChange(\"tanggal\")}\r\n                              defaultValue={getToday()}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-4 col-md-4\">\r\n                          <div className=\"form-group\">\r\n                            <label htmlFor=\"\">No Bon</label>\r\n                            <input\r\n                              name=\"noBon\"\r\n                              type=\"text\"\r\n                              label=\"No Bon\"\r\n                              className=\"form-control\"\r\n                              onChange={this.inputChange(\"noBon\")}\r\n                              value={this.state.noBon}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-4 col-md-4\"></div>\r\n                        <div className=\"col-lg-4 col-md-4\">\r\n                          <div className=\"form-group\">\r\n                            <label htmlFor=\"\">Lokasi</label>\r\n                            <SelectSearch\r\n                              options={lokasi}\r\n                              search\r\n                              placeholder=\"Silahkan Pilih\"\r\n                              onChange={(data) => this.onSubmit(data, \"lokasi\")}\r\n                              value={this.state.lokasi}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-4 col-md-4\">\r\n                          <div className=\"form-group\">\r\n                            <label htmlFor=\"\">Sales</label>\r\n                            <SelectSearch\r\n                              options={this.props.listSales.map((obj) => {\r\n                                var payload = {\r\n                                  value: obj.kode_sales,\r\n                                  name: obj.nama_sales,\r\n                                };\r\n                                return payload;\r\n                              })}\r\n                              search\r\n                              placeholder=\"Silahkan Pilih\"\r\n                              onChange={(data) => this.onSubmit(data, \"sales\")}\r\n                              value={this.state.sales}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-4 col-md-4\">\r\n                          <div className=\"form-group\">\r\n                            <label htmlFor=\"\">Nama Toko</label>\r\n                            <SelectSearch\r\n                              options={this.props.listCustomer.map((obj) => {\r\n                                var payload = {\r\n                                  value: obj.kode_customer,\r\n                                  name:\r\n                                    obj.nama_toko + \" - \" + obj.nama_customer,\r\n                                };\r\n                                return payload;\r\n                              })}\r\n                              search\r\n                              placeholder=\"Silahkan Pilih\"\r\n                              onChange={(data) => this.onSubmitToko(data)}\r\n                              onBlur={(data) => this.onSubmit(data, \"namaToko\")}\r\n                              value={this.state.toko}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-4\">\r\n                          <Field\r\n                            name=\"level_customer\"\r\n                            component={renderField}\r\n                            type=\"text\"\r\n                            label=\"Level Customer\"\r\n                            placeholder=\"Masukan Level Customer\"\r\n                            readOnly\r\n                          />\r\n                        </div>\r\n                        <div className={this.state.field_level1}>\r\n                          <Field\r\n                            name=\"level_customer_1\"\r\n                            component={renderFieldSelect}\r\n                            options={this.props.listCustomer\r\n                              .filter((fil) => fil.level_customer === \"LEVEL1\")\r\n                              .map((obj) => {\r\n                                var payload = {\r\n                                  value: obj.kode_customer,\r\n                                  name:\r\n                                    obj.nama_toko + \" - \" + obj.nama_customer,\r\n                                };\r\n                                return payload;\r\n                              })}\r\n                            type=\"text\"\r\n                            label=\"Level Customer 1\"\r\n                            placeholder=\"Level Customer 1\"\r\n                            onChange={(data) =>\r\n                              localStorage.setItem(\"customer_1\", data)\r\n                            }\r\n                          />\r\n                        </div>\r\n                        <div className={this.state.field_level2}>\r\n                          <Field\r\n                            name=\"level_customer_2\"\r\n                            component={renderFieldSelect}\r\n                            options={this.props.listCustomer\r\n                              .filter((fil) => fil.level_customer === \"LEVEL2\")\r\n                              .map((obj) => {\r\n                                var payload = {\r\n                                  value: obj.kode_customer,\r\n                                  name:\r\n                                    obj.nama_toko + \" - \" + obj.nama_customer,\r\n                                };\r\n                                return payload;\r\n                              })}\r\n                            type=\"text\"\r\n                            label=\"Level Customer 2\"\r\n                            placeholder=\"Level Customer 2\"\r\n                            onChange={(data) =>\r\n                              localStorage.setItem(\"customer_2\", data)\r\n                            }\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                  <div className=\"col-lg-8\"></div>\r\n                  <div className=\"col-lg-4\">\r\n                    <div className=\"text-right\">\r\n                      <button\r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => this.props.dispatch(showModal())}\r\n                        disabled={this.state.kodeCustomer === \"\"}\r\n                      >\r\n                        Tambah Barang\r\n                        <i class=\"fa fa-plus ml-3\" aria-hidden=\"true\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-lg-12 mt-5\">\r\n                    <GlobalTabel\r\n                      keyField=\"id\"\r\n                      data={this.props.listReparasi}\r\n                      columns={this.state.columns}\r\n                    />\r\n                    <div className=\"text-right\">\r\n                      <button\r\n                        className=\"btn btn-primary\"\r\n                        disabled={this.props.onSend}\r\n                        onClick={() => this.transaksiPenjualanSubmit()}\r\n                      >\r\n                        {this.props.onSend ? (\r\n                          <span\r\n                            className=\"spinner-border spinner-border-sm mr-3\"\r\n                            aria-hidden=\"true\"\r\n                          ></span>\r\n                        ) : null}\r\n                        Simpan\r\n                        <i\r\n                          class=\"fa fa-paper-plane ml-3\"\r\n                          aria-hidden=\"true\"\r\n                        ></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Skeleton width=\"100%\" height=\"100%\" />\r\n        )}\r\n        <ModalMasterData\r\n          content={\r\n            <Suspense\r\n              fallback={<Skeleton width={\"100%\"} height={50} count={4} />}\r\n            >\r\n              <FormTransaksiReparasi\r\n                kode_customer={this.state.kodeCustomer}\r\n                level_customer={this.state.level_customer}\r\n                onSubmit={(data) => this.handleSubmit(data)}\r\n              />\r\n            </Suspense>\r\n          }\r\n          title=\"Tambah Data\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTransaksiReparasi = reduxForm({\r\n  form: \"TransaksiReparasi\",\r\n  enableReinitialize: true,\r\n})(TransaksiReparasi);\r\nexport default connect(maptostate, null)(TransaksiReparasi);\r\n"],"sourceRoot":""}