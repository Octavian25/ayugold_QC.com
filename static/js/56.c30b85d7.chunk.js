(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[56],{1135:function(e,a,t){"use strict";t.r(a);var o=t(64),r=t(24),n=t(25),s=t(27),l=t(26),i=t(0),c=t.n(i),d=t(17),u=t(12),p=t(328),m=t(67),g=t(65),k=t(13),h=t.n(k),b=t(133),_=t(23),j=t(52),f=t(132),v=t(47),F=t.n(v),O=t(32),S=t(129),N=t(167),E=t(168),x=t(36),y=t(5),P=t(66),C=t(679),I=t(680),B=t(43),T=t(324),J=t(59),D=t(199),A=t(6),G=Object(i.lazy)((function(){return Promise.resolve().then(t.bind(null,219))})),w=Object(i.lazy)((function(){return t.e(160).then(t.bind(null,1120))})),q=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).inputChange=function(e){return function(a){n.setState(Object(o.a)({},e,a.target.value))}},n.state={listLokasi:[],listSales:[],listCustomer:[],kodeCustomer:"",columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"request_warna_batu",text:"Request Warna Batu"},{dataField:"request_lain",text:"Request Lain"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,a,t){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger mr-2",onClick:function(){return n.deleteRow(t)}},c.a.createElement(J.a,{id:"hapus",type:"dark",effect:"solid"},c.a.createElement("span",null,"Hapus")),c.a.createElement("i",{className:"fa fa-trash mr-1"})),c.a.createElement("br",null))}}],noBon:"",namaCustomer:"",lokasi:"",sales:"",namaToko:"",toko:"",tanggal:"",data:""},n}return Object(n.a)(t,[{key:"deleteRow",value:function(e){var a=this;h.a.fire({title:"Anda Yakin ?",text:"Anda Akan Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){if(t.isConfirmed){var o=JSON.parse(localStorage.getItem("barangPO_temp"))||[];o.splice(e,1),localStorage.setItem("barangPO_temp",JSON.stringify(o)),h.a.fire({text:"Berhasil",timer:2e3,showConfirmButton:!1,position:"top-right",icon:"success"}).then((function(){return a.props.dispatch(Object(T.b)())})).then((function(){return a.setState({deleted:!0})}))}}))}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(N.d)()),this.props.dispatch(Object(E.d)()),this.props.dispatch(Object(x.h)()),this.props.dispatch(Object(g.b)()),localStorage.removeItem("barangPO_temp"),localStorage.removeItem("GrandTotalNetto"),this.props.dispatch(Object(T.b)()),this.props.dispatch(Object(f.e)()),this.props.dispatch(Object(_.l)("transaksiPenjualan")),this.props.dispatch(Object(_.o)("transaksiPenjualan")),this.props.dispatch(Object(_.q)("transaksiPenjualan")),this.props.dispatch(Object(_.s)("transaksiPenjualan")),this.props.dispatch(Object(_.m)("transaksiPenjualan")),this.props.dispatch(Object(_.p)("transaksiPenjualan")),this.props.dispatch(Object(_.n)("transaksiPenjualan")),this.props.dispatch(Object(_.r)("transaksiPenjualan")),this.setState({GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto")||0)-0).toFixed(3)})}},{key:"handleSubmit",value:function(e){var a=e.kodeBarang,t={kode_jenis:this.props.kodeBarang.filter((function(e){return e.kode_jenis===a}))[0].kode_jenis||0,request_warna_batu:e.request_warna_batu,request_lain:e.request_lain||"-"},o=JSON.parse(localStorage.getItem("barangPO_temp"))||[];o.push(t),localStorage.setItem("barangPO_temp",JSON.stringify(o)),h.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),this.props.dispatch(Object(T.b)()),this.props.dispatch(Object(f.e)()),this.props.dispatch(Object(u.b)("FormTransaksiPO"))}},{key:"transaksiPenjualanSubmit",value:function(){var e=this;if(null===localStorage.getItem("barangPO_temp"))return Object(j.e)("Barang masih kosong, Silahkan tambah barang"),!1;if(""===this.state.lokasi)return Object(j.e)("Mohon pilih lokasi"),!1;if(""===this.state.sales)return Object(j.e)("Mohon pilih Sales"),!1;if(""===this.state.namaToko)return Object(j.e)("Mohon pilih toko"),!1;var a="PO-"+Date.now(),t={no_preorder:a,kode_lokasi:this.state.lokasi.toUpperCase(),kode_sales:this.state.sales.toUpperCase(),kode_customer:this.state.kodeCustomer.toUpperCase(),tanggal_selesai:this.state.tanggal||Object(B.b)(2),tanggal:Object(B.b)(),detail_barang:JSON.parse(localStorage.getItem("barangPO_temp"))};this.props.dispatch(Object(_.t)());var o=[];JSON.parse(localStorage.getItem("barangPO_temp")).forEach((function(e,a){var t=[++a,e.kode_jenis,e.request_warna_batu,e.request_lain];o.push(t)}));var r=[["No","Kode","Request Warna Batu","Request Lain"]];Object(y.c)("pre-order/simpan",t).then((function(){return h.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){Object(D.a)("No Nota",a,"Tanggal",Object(B.b)(),"LEVEL","ADMIN INTERN","","","ADMIN",Object(B.b)(),"",r,"Bukti PO",o,[],"Bukti PO"),Object(D.a)("No Nota",a,"Tanggal",Object(B.b)(),"Customer",e.state.namaCustomer,"","",Object(A.s)(),Object(B.b)(),"",r,"Bukti PO",o,[],"Bukti PO")})).then((function(){return e.props.dispatch(Object(_.k)())})).then((function(){return localStorage.removeItem("transaksiPenjualan")})).then((function(){return localStorage.removeItem("GrandTotalNetto")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return e.props.dispatch(Object(g.b)())})).then((function(){return e.props.dispatch(Object(f.e)())})).then((function(){return e.props.dispatch(Object(b.e)())})).then((function(){return e.setState({noBon:"",namaCustomer:"",lokasi:"",sales:"",namaToko:"",tanggal:"",toko:"",GrandTotalNetto:0})})).then((function(){return document.getElementById("myForm").reset()}))})).catch((function(a){return h.a.fire({position:"top-end",icon:"error",text:"".concat(a.response.data),showConfirmButton:!1,timer:1500}).then((function(){return e.props.dispatch(Object(_.k)())}))})),console.log(JSON.stringify(t))}},{key:"onSubmit",value:function(e,a){this.setState(Object(o.a)({},a,e))}},{key:"onSubmitToko",value:function(e,a){var t=e.split("|");localStorage.setItem("customer_1",t[0]),this.setState({kodeCustomer:t[0],namaCustomer:t[1],namaToko:t[2],levelCustomer:t[3],toko:e})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"card"},c.a.createElement(S.default,{title:"Transaksi Pre Order"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("form",{id:"myForm",onKeyDown:function(e){return"Enter"!==e.key}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4 col-md-4"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Tanggal Selesai"),c.a.createElement("input",{name:"tanggal",type:"date",label:"Tanggal",className:"form-control",onChange:this.inputChange("tanggal"),defaultValue:Object(B.b)(2)}),c.a.createElement("span",null,"Tanggal ini sudah ditambah 2 hari dari tanggal sekarang"))),c.a.createElement("div",{className:"col-lg-4 col-md-4"}),c.a.createElement("div",{className:"col-lg-4 col-md-4"}),c.a.createElement("div",{className:"col-lg-3 col-md-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Lokasi"),c.a.createElement(m.a,{options:[{value:"SALES",name:"SALES"},{value:"PUSAT",name:"PUSAT"}],search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmit(a,"lokasi")},value:this.state.lokasi}))),c.a.createElement("div",{className:"col-lg-3 col-md-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Sales"),c.a.createElement(m.a,{options:this.props.listSales.map((function(e){return{value:e.kode_sales,name:e.nama_sales}})),search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmit(a,"sales")},value:this.state.sales}))),c.a.createElement("div",{className:"col-lg-3 col-md-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Nama Toko"),c.a.createElement(m.a,{options:this.props.listCustomer.map((function(e){return{value:e.kode_customer+"|"+e.nama_customer+"|"+e.nama_toko+"|"+e.level_customer,name:e.nama_toko}})),search:!0,placeholder:"Silahkan Pilih",onChange:function(a){return e.onSubmitToko(a,"namaToko")},onBlur:function(a){return e.onSubmit(a,"toko")},value:this.state.toko}))),c.a.createElement("div",{className:"col-lg-3 col-md-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:""},"Customer"),c.a.createElement("input",{name:"customer",type:"text",className:"form-control",label:"Customer",onChange:this.inputChange("namaCustomer"),defaultValue:this.state.namaCustomer})))))),c.a.createElement("div",{className:"col-lg-12 col-md-12 mt-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"}),c.a.createElement("div",{className:"col-lg-4"}),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",disabled:""===this.state.toko,onClick:function(){return e.props.dispatch(Object(O.j)())}},"Tambah Barang",c.a.createElement("i",{class:"fa fa-plus ml-3","aria-hidden":"true"})))))),c.a.createElement("div",{className:"col-lg-12 mt-5"},c.a.createElement(P.a,{keyField:"id",data:this.props.barangPO,columns:this.state.columns}),c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend,onClick:function(){return e.transaksiPenjualanSubmit()}},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Simpan",c.a.createElement("i",{class:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))))),c.a.createElement("div",{id:"barcodeModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"primary-header-modalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog modal-xl"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header modal-colored-header bg-primary"},c.a.createElement("h4",{className:"modal-title",id:"primary-header-modalLabel"},"Data Barcode"),c.a.createElement("button",{type:"button",id:"dismissModal",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7")),c.a.createElement("div",{className:"modal-body"},c.a.createElement(C.a,{kodeCustomer:this.state.kodeCustomer})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Close"))))),c.a.createElement("div",{id:"timbanganModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"primary-header-modalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog modal-xl"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header modal-colored-header bg-primary"},c.a.createElement("h4",{className:"modal-title",id:"primary-header-modalLabel"},"Data Timbangan"),c.a.createElement("button",{type:"button",id:"dismissModal",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7")),c.a.createElement("div",{className:"modal-body"},c.a.createElement(I.a,{kodeCustomer:this.state.kodeCustomer})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Close"))))),c.a.createElement(G,{content:c.a.createElement(i.Suspense,{fallback:c.a.createElement(F.a,{width:"100%",height:50,count:4})},c.a.createElement(w,{onSubmit:function(a){return e.handleSubmit(a)}})),title:"Tambah Data"}))}}]),t}(i.Component);q=Object(p.a)({form:"PreOrder",enableReinitialize:!0})(q),a.default=Object(d.b)((function(e){return{noFaktur:e.provinsi.noFaktur,barangPO:e.po.barangPO_temp,listCustomer:e.provinsi.customer,listLokasi:e.provinsi.lokasi,listSales:e.provinsi.salesman,totalNW:e.provinsi.totalNW,username:e.provinsi.username,onSend:e.provinsi.onSend,kodeBarang:e.provinsi.kodeBarang}}),null)(q)},679:function(e,a,t){"use strict";var o=t(166),r=t.n(o),n=t(220),s=t(24),l=t(25),i=t(27),c=t(26),d=t(0),u=t.n(d),p=t(17),m=t(12),g=t(13),k=t.n(g),h=t(134),b=t(23),_=t(132),j=t(133),f=t(52),v=t(5),F=t(48),O=t(66),S=function(e){Object(i.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=a.call(this,e)).state={columns:[{dataField:"tanggal",text:"Tanggal"},{dataField:"baki",text:"Nama Baki"},{dataField:"instansi",text:"Supplier"},{dataField:"jenis_trx",text:"Kode Model"},{dataField:"total_bruto",text:"Berat(Gr)",align:"right",headerAlign:"right"},{dataField:"total_netto",text:"Netto(Gr)",align:"right",headerAlign:"right"},{dataField:"total_ongkos",text:"Ongkos(Rp)",align:"right",headerAlign:"right"},{dataField:"total_gross",text:"Gross(Gr)",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,a){return u.a.createElement("div",{className:"text-center"},u.a.createElement("button",{className:"btn btn-warning mr-2",onClick:function(){return o.pilihBarcode(a)}},"Pilih"))}}]},o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.d)())}},{key:"pilihBarcode",value:function(){var e=Object(n.a)(r.a.mark((function e(a){var t,o,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],(o=a.detail_barang).forEach((function(e,a){Object(v.b)("jenis/get/by-kode-jenis/".concat(o[a].kode_jenis)).then((function(r){var s={netto_disc:parseFloat(o[a].bruto)*r.data.kadar_jual/100,gross:parseFloat(o[a].bruto)+parseFloat(o[a].pkg),netto:parseFloat(o[a].bruto)*r.data.kadar_jual/100,qty:1,k:0,ongkos_rp:o[a].ongkos_rp,kadar_cetak:(o[a].kadar_cetak||0).toString(),disc_persen:0,kadar_jual:r.data.kadar_jual,kadar_level2:r.data.level2,kadar_level3:r.data.level3,kadar_modal:r.data.kadar_beli,kode_jenis:o[a].kode_jenis,kode_barcode:"-",kode_barcode_set:"-",p:0,disc:0,pkg:o[a].pkg,bruto:o[a].bruto},l={netto_disc:parseFloat(o[a].bruto)*r.data.level2/100,gross:parseFloat(o[a].bruto)+parseFloat(o[a].pkg),netto:parseFloat(o[a].bruto)*r.data.level2/100,qty:1,k:0,ongkos_rp:o[a].ongkos_rp,kadar_cetak:(o[a].kadar_cetak||0).toString(),disc_persen:0,kadar_jual:r.data.kadar_jual,kadar_level2:r.data.level2,kadar_level3:r.data.level3,kadar_modal:r.data.kadar_beli,kode_jenis:o[a].kode_jenis,kode_barcode:"-",kode_barcode_set:"-",p:0,disc:0,pkg:o[a].pkg,bruto:o[a].bruto},i={netto_disc:parseFloat(o[a].bruto)*r.data.level3/100,gross:parseFloat(o[a].bruto)+parseFloat(o[a].pkg),netto:parseFloat(o[a].bruto)*r.data.level3/100,qty:1,k:0,ongkos_rp:o[a].ongkos_rp,kadar_cetak:(o[a].kadar_cetak||0).toString(),disc_persen:0,kadar_jual:r.data.kadar_jual,kadar_level2:r.data.level2,kadar_level3:r.data.level3,kadar_modal:o[a].kadar_beli,kode_jenis:o[a].kode_jenis,kode_barcode:"-",kode_barcode_set:"-",p:0,disc:0,pkg:o[a].pkg,bruto:o[a].bruto},c=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],d=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],u=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[],p=t.findIndex((function(a){return e.kode_jenis===a.kode_jenis||a.netto===e.netto}));if(console.log(e.netto),console.log(p),p<0){c.push(s),d.push(l),u.push(i);var g=c.map((function(e){return parseFloat(e.netto_disc)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",g),localStorage.setItem("transaksiPenjualan",JSON.stringify(c)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(d)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(u)),k.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),n.props.dispatch(Object(j.e)()),n.props.dispatch(Object(_.e)()),n.props.dispatch(Object(m.b)("FormTransaksiPenjualan")),n.props.dispatch(Object(b.o)("transaksiPenjualan")),n.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})}else Object(f.e)("Data Sudah Ada Di Tabel")})).catch((function(e){return Object(f.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}))}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"getSumData",value:function(){this.props.dispatch(Object(b.o)("ReturnPenjualan")),this.props.dispatch(Object(b.l)("ReturnPenjualan")),this.props.dispatch(Object(b.s)("ReturnPenjualan")),this.props.dispatch(Object(b.q)("ReturnPenjualan")),this.props.dispatch(Object(b.r)("ReturnPenjualan"))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"col-lg-12 col-md-12"},u.a.createElement(O.a,{keyField:"kodeJenis",data:this.props.listCloseBarcode.filter((function(a){return"PENJUALAN"===a.jenis_trx&&a.tanggal===Object(F.b)()&&a.instansi===e.props.kodeCustomer}))||[],columns:this.state.columns,textEmpty:"Data Barcode Kosong, Silahkan Tambah barcode dahulu untuk memakai fitur ini"}))}}]),t}(d.Component);a.a=Object(p.b)((function(e){return{listCloseBarcode:e.provinsi.listCloseBarcode}}))(S)},680:function(e,a,t){"use strict";var o=t(166),r=t.n(o),n=t(220),s=t(24),l=t(25),i=t(27),c=t(26),d=t(0),u=t.n(d),p=t(17),m=t(12),g=t(13),k=t.n(g),h=t(170),b=t(92),_=t(23),j=t(132),f=t(133),v=t(52),F=t(5),O=t(48),S=t(66),N=t(6),E=function(e){Object(i.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=a.call(this,e)).state={columns:[{dataField:"tanggal",text:"Tanggal"},{dataField:"baki",text:"Nama Baki"},{dataField:"kode_customer",text:"Supplier"},{dataField:"jenis_trx",text:"Kode Model"},{dataField:"total_bruto",text:"Berat(Gr)",align:"right",headerAlign:"right"},{dataField:"total_netto",text:"Netto(Gr)",align:"right",headerAlign:"right"},{dataField:"total_ongkos",text:"Ongkos(Rp)",align:"right",headerAlign:"right"},{dataField:"total_gross",text:"Gross(Gr)",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,a){return u.a.createElement("div",{className:"text-center"},u.a.createElement("button",{className:"btn btn-warning mr-2",onClick:function(){return o.pilihData(a,a.kode_customer)}},"Pilih"))}}]},o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.c)()),this.props.dispatch(Object(b.e)())}},{key:"pilihData",value:function(e,a){var t=this;e.detail_barang.map((function(e){var o=e;return o.netto_disc=e.netto,o.disc=0,o.disc_persen=0,o.harga_jual=0,t.addBarang(o,a),!0}))}},{key:"addBarang",value:function(){var e=Object(n.a)(r.a.mark((function e(a,t){var o,n,s,l,i,c,d,u,p=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.dispatch(Object(_.t)()),o=a.kode_jenis,n=this.props.kodeBarang.filter((function(e){return e.kode_jenis===o})),s=0,l=0,i=0,c=t,d="LEVEL2"===this.state.level_customer?this.state.kodeCustomer:localStorage.getItem("customer_2"),u="LEVEL3"===this.state.level_customer?this.state.kodeCustomer:"-",e.next=11,Object(F.b)("kelompok-harga/get/by-jenis-and-customer/".concat(c,"&").concat(a.kode_jenis)).then((function(e){return s=e.data.kode_tukar_normal||0})).catch((function(){return s=0}));case 11:return e.next=13,Object(F.b)("kelompok-harga/get/by-jenis-and-customer/".concat(d,"&").concat(a.kode_jenis)).then((function(e){return l=e.data.kode_tukar_normal||0})).catch((function(){return l=0}));case 13:return e.next=15,Object(F.b)("kelompok-harga/get/by-jenis-and-customer/".concat(u,"&").concat(a.kode_jenis)).then((function(e){return i=e.data.kode_tukar_normal||0})).catch((function(){return i=0}));case 15:Object(F.b)("jenis/get/by-kode-jenis/".concat(a.kode_jenis)).then((function(e){var t,o=JSON.parse(localStorage.getItem("nota_penjualan_level1"))||[],r=JSON.parse(localStorage.getItem("nota_penjualan_level2"))||[],c=JSON.parse(localStorage.getItem("nota_penjualan_level3"))||[],d=JSON.parse(localStorage.getItem("nota_gambar"))||[],u=o.findIndex((function(e){return e.kode_kategori===a.kode_kategori})),g=r.findIndex((function(e){return e.kode_kategori===a.kode_kategori})),h=c.findIndex((function(e){return e.kode_kategori===a.kode_kategori}));if(d.push({lokasi_gambar:null===(t=e.data)||void 0===t?void 0:t.image}),localStorage.setItem("nota_gambar",JSON.stringify(d)),-1!==u){var b={netto_disc:(parseFloat(a.netto_disc||0)+parseFloat(o[u].netto_disc)).toFixed(3),netto:(parseFloat(a.netto||0)+parseFloat(o[u].netto)).toFixed(3),ongkos_rp:(parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp)+o[u].ongkos_rp).toLocaleString("id-ID"),disc:(parseFloat(a.disc||0)+parseFloat(o[u].disc)).toFixed(3),bruto:(parseFloat(a.bruto||0)+parseFloat(o[u].bruto)).toFixed(3),kode_kategori:a.kode_kategori,kode_tukar:s,keterangan:a.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:a.harga_jual},v={netto_disc:(parseFloat(a.bruto||0)*parseFloat(l)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100+parseFloat(r[u].netto_disc)).toFixed(3),netto:((parseFloat(a.bruto||0)*parseFloat(l)/100||0)+parseFloat(r[u].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp)+parseFloat(r[u].ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)+parseFloat(r[u].disc)).toFixed(3),bruto:parseFloat(a.bruto||0)+parseFloat(r[u].bruto),kode_kategori:a.kode_kategori,kode_tukar:l,keterangan:a.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:a.harga_jual},F={netto_disc:(parseFloat(a.bruto||0)*parseFloat(i)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100+parseFloat(c[u].netto_disc)).toFixed(3),netto:((parseFloat(a.bruto||0)*parseFloat(i)/100||0)+parseFloat(c[u].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp)+parseFloat(c[u].ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)+parseFloat(c[u].disc)).toFixed(3),bruto:parseFloat(a.bruto||0)+parseFloat(c[u].bruto),kode_kategori:a.kode_kategori,kode_tukar:i,keterangan:a.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:a.harga_jual};o.push(b),r.push(v),c.push(F),o.splice(u,1),r.splice(g,1),c.splice(h,1),localStorage.setItem("nota_penjualan_level1",JSON.stringify(o)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(r)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(c))}else{var O={netto_disc:parseFloat(a.netto_disc||0).toFixed(3),netto:parseFloat(a.netto||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp),disc:a.disc||0,bruto:parseFloat(a.bruto||0).toFixed(3),kode_kategori:a.kode_kategori,kode_tukar:s,keterangan:a.keterangan,disc_persen:a.disc_persen||0,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:parseFloat(a.harga_jual)*parseFloat(a.qty)},S={netto_disc:(parseFloat(a.bruto||0)*parseFloat(l)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100).toFixed(3),netto:(parseFloat(a.bruto||0)*parseFloat(l)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)).toFixed(3),bruto:parseFloat(a.bruto||0),kode_kategori:a.kode_kategori,kode_tukar:l,keterangan:a.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:parseFloat(a.harga_jual)*parseFloat(a.qty)},E={netto_disc:(parseFloat(a.bruto||0)*parseFloat(i)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100).toFixed(3),netto:(parseFloat(a.bruto||0)*parseFloat(i)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)).toFixed(3),bruto:parseFloat(a.bruto||0),kode_kategori:a.kode_kategori,kode_tukar:i,keterangan:a.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===a.harga_jual?0:parseFloat(a.harga_jual)*parseFloat(a.qty)};o.push(O),r.push(S),c.push(E),localStorage.setItem("nota_penjualan_level1",JSON.stringify(o)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(r)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(c))}var x={netto_disc:parseFloat(a.netto_disc||0).toFixed(3)||0,gross:parseFloat(a.gross||0).toFixed(3)||0,netto:parseFloat(a.netto||0).toFixed(3)||0,qty:a.qty||1,k:parseFloat(a.k||0),ongkos_rp:parseFloat(void 0===a.ongkos_rp?0:a.ongkos_rp),kadar_cetak:(n[0].kadar_cetak||0).toString(),disc_persen:a.disc_persen||0,kadar_jual:s||0,kadar_level2:e.data.level2||0,kadar_level3:e.data.level3||0,kadar_modal:n[0].kadar_modal||0,kode_jenis:n[0].kode_jenis||0,kode_barcode:"-",kode_barcode_set:"-",p:parseFloat(a.p||0),disc:a.disc||0,pkg:parseFloat(a.pkg||0),bruto:parseFloat(a.bruto||0).toFixed(3),harga_jual:"undefined"===a.harga_jual?0:a.harga_jual},y=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[];y.push(x);var P=y.map((function(e){return parseFloat(e.netto)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",P),localStorage.setItem("transaksiPenjualan",JSON.stringify(y)),k.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),p.props.dispatch(Object(_.k)()),p.props.dispatch(Object(f.e)()),p.props.dispatch(Object(j.e)()),p.props.dispatch(Object(m.b)("FormTransaksiPenjualan")),Object(N.w)("discGlobal_penjualan"),p.props.dispatch(Object(_.o)("transaksiPenjualan")),p.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})})).catch((function(e){return Object(v.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}));case 16:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"getSumData",value:function(){this.props.dispatch(Object(_.o)("ReturnPenjualan")),this.props.dispatch(Object(_.l)("ReturnPenjualan")),this.props.dispatch(Object(_.s)("ReturnPenjualan")),this.props.dispatch(Object(_.q)("ReturnPenjualan")),this.props.dispatch(Object(_.r)("ReturnPenjualan"))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"col-lg-12 col-md-12"},u.a.createElement(S.a,{keyField:"kodeJenis",data:this.props.listCloseBarcode.filter((function(a){return"PENJUALAN"===a.jenis_trx&&a.tanggal===Object(O.b)()&&a.kode_customer===e.props.kodeCustomer}))||[],columns:this.state.columns,textEmpty:"Data Timbangan Kosong"}))}}]),t}(d.Component);a.a=Object(p.b)((function(e){return{listCloseBarcode:e.provinsi.listCloseTimbangan,kodeBarang:e.provinsi.kodeBarang}}))(E)}}]);
//# sourceMappingURL=56.c30b85d7.chunk.js.map