(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[108],{1227:function(t,e,a){"use strict";a.r(e);var n=a(60),r=a(15),o=a(16),i=a(18),s=a(17),l=a(0),c=a.n(l),u=a(247),m=a(13),d=a.n(m),p=a(12),g=a(11),h=a(55),b=a(43),k=a(20),f=a(141),j=a(23),E=a(343),A=a(344),v=a(186),F=a(24),O=a(240),N=a(39),B=a(50),S=a(6),y=a(19),T=function(t){var e={};return t.tanggal||(e.tanggal="Tidak Boleh kosong"),t.noMutasi||(e.noMutasi="Tidak Boleh kosong"),t.bonMutasi||(e.bonMutasi="Tidak Boleh kosong"),t.kategori||(e.kategori="Tidak Boleh kosong"),t.lokasi||(e.lokasi="Tidak Boleh kosong"),e},x=function(t){Object(i.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={lokasi:!1,listKategori:[{nama:"AMBIL BARANG"},{nama:"KEMBALI STOK"},{nama:"KOREKSI STOK"},{nama:"MUTASI BAHAN"},{nama:"PENGAMBILAN SALES"},{nama:"PINDAH"},{nama:"PINDAH GUDANG REPARASI"},{nama:"RETURN SALES"},{nama:"SALAH INPUT"},{nama:"SALAH PINDAH"},{nama:"STOK AWAL"},{nama:"TAMBAH BARANG"}],columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_beli",text:"Kode Awal 1",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_cetak",text:"Cap Kode",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"pkg",text:"Pkg (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"bruto",text:"Bruto (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_beli",text:"Kode Awal 2",align:"right",formatter:function(t){return Object(S.m)(t)},headerAlign:"right"},{dataField:"netto",text:"Netto (Gr)",align:"right",formatter:function(t){return Object(S.m)(t,3)},headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,e,a){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger",onClick:function(){return Object(O.a)("mutasiBarang",a,n.props.dispatch,Object(u.b)())}},c.a.createElement(b.a,{id:"hapus",type:"dark",effect:"solid"},c.a.createElement("span",null,"Hapus")),c.a.createElement("i",{className:"fa fa-trash"})),c.a.createElement("br",null))}}]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(v.d)()),this.props.change("tanggal",N.b),this.props.change("noMutasi",localStorage.getItem("noFaktur")),this.props.change("bonMutasi","AS/MB-"+Object(S.q)())}},{key:"render",value:function(){var t=this;return c.a.createElement("form",{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-3 form-group d-none"},c.a.createElement(E.a,{component:y.a,normalize:function(t){return t&&t.toUpperCase()},label:"Nomor Mutasi",type:"text",name:"noMutasi",className:"form-control",readOnly:!0})),c.a.createElement("div",{className:"col-md-3 form-group"},c.a.createElement(E.a,{type:"date",label:"Tanggal",id:"tanggal",name:"tanggal",component:y.a})),c.a.createElement("div",{className:"col-md-3 form-group d-none"},c.a.createElement(E.a,{component:y.a,normalize:function(t){return t&&t.toUpperCase()},label:"Bon Mutasi",type:"text",id:"bonMutasi",name:"bonMutasi"})),c.a.createElement("div",{className:"col-md-3 form-group"},c.a.createElement(E.a,{id:"kategori",label:"Kategori",name:"kategori",component:y.b,normalize:function(t){return t&&t.toUpperCase()},options:this.state.listKategori.map((function(t){return{value:t.nama,name:t.nama}}))})),c.a.createElement("div",{className:"col-md-3 form-group"},this.props.lokasi?c.a.createElement(E.a,{label:"Lokasi",component:y.b,normalize:function(t){return t&&t.toUpperCase()},type:"text",id:"lokasi",name:"lokasi",onKeyPress:function(t){"Enter"===t.key&&t.preventDefault()},options:this.props.lokasi.map((function(t){return{value:t.kode_lokasi,name:t.nama_lokasi}}))}):c.a.createElement(N.a,{label:"Lokasi"})),c.a.createElement("div",{className:"col-md-3 form-group"},c.a.createElement(E.a,{component:y.a,normalize:function(t){return t&&t.toUpperCase()},label:"Keterangan",type:"text",id:"keterangan",name:"keterangan"})),c.a.createElement("div",{className:"col-lg-3"}),c.a.createElement("div",{className:"col-lg-4"}),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"}),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"}),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"}),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3 row justify-content-end"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return t.props.dispatch(Object(F.j)())}},"TAMBAH BARANG",c.a.createElement("i",{className:"fa fa-plus ml-3"})))),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(B.a,{keyField:"id",data:this.props.listBarang,columns:this.state.columns})),c.a.createElement("div",{className:"col-lg-12 col-md-3 mb-3"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend,type:"button",onClick:this.props.handleSubmit},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",c.a.createElement("i",{class:"fa fa-paper-plane ml-3","aria-hidden":"true"}))))))}}]),a}(l.Component);x=Object(A.a)({form:"HeadMutasiBarang",enableReinitialize:!0,validate:T})(x);var _=Object(p.b)((function(t){return{listBarang:t.provinsi.mutasiBarang,lokasi:t.provinsi.lokasi,initialValues:{discGlobalPr:0,p:0,k:0,pkg:0,bruto:0}}}))(x),M=a(37),I=a.n(M),K=a(49),L=a(5),U=Object(l.lazy)((function(){return a.e(105).then(a.bind(null,1269))})),C=Object(l.lazy)((function(){return Promise.resolve().then(a.bind(null,103))})),G=function(t){Object(i.a)(a,t);var e=Object(s.a)(a);function a(t){var o;return Object(r.a)(this,a),(o=e.call(this,t)).onChange=function(t){return function(e){o.setState(Object(n.a)({},t,e.target.value))}},o.state={lokasi:[],kodeJenis:"",kodeJenisTujuan:"",noMutasi:"",kodeLokasi:"",tanggal:"",keterangan:"",kategori:"",noBon:"",columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_beli",text:"Kode Awal 1",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_cetak",text:"Cap Kode",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"pkg",text:"Pkg (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"bruto",text:"Bruto (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_beli",text:"Kode Awal 2",align:"right",formatter:function(t){return Object(S.m)(t)},headerAlign:"right"},{dataField:"netto",text:"Netto (Gr)",align:"right",formatter:function(t){return Object(S.m)(t,3)},headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,e,a){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{type:"button","data-tip":!0,"data-for":"hapus",className:"btn btn-danger",onClick:function(){return o.hapusLocal(a)}},c.a.createElement(b.a,{id:"hapus",type:"dark",effect:"solid"},c.a.createElement("span",null,"Hapus")),c.a.createElement("i",{className:"fa fa-trash"})),c.a.createElement("br",null))}}]},o}return Object(o.a)(a,[{key:"hapusLocal",value:function(t){var e=JSON.parse(localStorage.getItem("mutasiBarang"))||[];e.splice(t,1),localStorage.setItem("mutasiBarang",JSON.stringify(e)),this.props.dispatch(Object(u.b)())}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(u.b)()),this.props.dispatch(Object(h.b)()),this.props.dispatch(Object(k.l)("mutasiBarang")),this.props.dispatch(Object(k.o)("mutasiBarang")),this.props.dispatch(Object(k.q)("mutasiBarang")),this.props.dispatch(Object(k.r)("mutasiBarang")),this.props.dispatch(Object(k.m)("mutasiBarang"))}},{key:"handleSubmit",value:function(t){var e=this,a=(t.kodeBarang?t.kodeBarang:"DEFAULT | DEFAULT | DEFAULT | DEFAULT ").split("|");this.setState({kodeJenis:a[0]});var n=(t.kodeBarangTujuan?t.kodeBarangTujuan:"DEFAULT | DEFAULT | DEFAULT | DEFAULT ").split("|");this.setState({kodeJenisTujuan:n[0]});var r=JSON.parse(localStorage.getItem("mutasiBarang"))||[],o={bruto:parseFloat(t.bruto).toFixed(3),bruto2:parseFloat(t.brutoTujuan).toFixed(3),kadar_cetak:(parseFloat(t.kadar)||0).toString(),kadar_cetak2:(parseFloat(t.kadarTujuan)||0).toString(),kadar_beli:parseFloat(t.kadar_beli),kadar_beli2:parseFloat(t.kadar_beliTujuan),kadar_jual:parseFloat(t.kadar_jual),kadar_jual2:parseFloat(t.kadar_jualTujuan),netto:parseFloat(t.netto).toFixed(3),netto2:parseFloat(t.nettoTujuan).toFixed(3),pkg:parseFloat(t.pkg).toFixed(3),pkg2:parseFloat(t.pkgTujuan).toFixed(3),qty:1,qty2:1,gross:(parseFloat(t.bruto)+parseFloat(t.pkg)).toFixed(3),gross2:(parseFloat(t.brutoTujuan)+parseFloat(t.pkgTujuan)).toFixed(3),kode_jenis:a[0].toUpperCase(),kode_jenis2:n[0].toUpperCase(),kode_kategori:t.kategori,kode_kategori2:t.kategoriTujuan};r.push(o),localStorage.setItem("mutasiBarang",JSON.stringify(r)),d.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return e.props.dispatch(Object(g.b)("FormMutasiBarang"))})).then((function(){return e.props.dispatch(Object(u.b)())}))}},{key:"submitMutasiBarang",value:function(t){var e=this;if(null===localStorage.getItem("mutasiBarang"))return Object(j.e)("Mohon Tambahkan Barang Yang akan dipindahkan"),!1;var a=JSON.parse(localStorage.getItem("mutasiBarang"))||[],n=a&&a.map((function(t){return parseFloat(t.pkg)})).reduce((function(t,e){return t+e}),0).toFixed(3),r=a&&a.map((function(t){return parseFloat(t.bruto)})).reduce((function(t,e){return t+e}),0).toFixed(3),o=a&&a.map((function(t){return parseFloat(t.netto)})).reduce((function(t,e){return t+e}),0).toFixed(3),i=a&&a.map((function(t){return parseFloat(t.netto2)})).reduce((function(t,e){return t+e}),0).toFixed(3),s=parseFloat(r)+parseFloat(n),l={no_mutasi:this.props.noFaktur,no_bon:t.bonMutasi,tgl_mutasi:t.tanggal,lokasi_asal:t.lokasi,lokasi_tujuan:t.lokasi,total_gross:s,total_pkg:n,total_bruto:r,total_netto:o,total_netto2:i,keterangan:"MUTASI BARANG",deskripsi:t.kategori,detail_barang:JSON.parse(localStorage.getItem("mutasiBarang"))};console.log(JSON.stringify(l)),this.props.dispatch(Object(k.t)());var c=[];JSON.parse(localStorage.getItem("mutasiBarang")).forEach((function(t,e){var a=[++e,t.kode_jenis,{content:t.bruto,styles:{halign:"right"}},{content:t.kadar_jual,styles:{halign:"right"}},{content:t.netto,styles:{halign:"right"}},"=====>",t.kode_jenis,{content:t.kadar_jual2,styles:{halign:"right"}},{content:t.netto2,styles:{halign:"right"}}];c.push(a)}));var m=[[{content:"No"},{content:"Kode Jenis"},{content:"Bruto",styles:{halign:"right"}},{content:"Kode Awal",styles:{halign:"right"}},{content:"Netto",styles:{halign:"right"}},{content:"=====>"},{content:"Kode Jenis 2"},{content:"Kode Awal 2",styles:{halign:"right"}},{content:"Netto 2",styles:{halign:"right"}}]];Object(L.d)("mutasi-stock/simpan",l).then((function(){return d.a.fire({position:"top-end",icon:"success",text:"Transaksi Berhasil",showConfirmButton:!1,timer:1500}).then((function(){return e.props.dispatch(Object(k.k)())})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return e.props.dispatch(Object(g.b)("HeadMutasiBarang"))})).then((function(){return e.props.dispatch(Object(h.b)())})).then((function(){return window.location.reload()})).then((function(){return Object(f.a)("Tanggal",t.tanggal,"","","Nomor Bon",t.bonMutasi,"","",Object(S.s)(),t.tanggal,"",m,"MUTASI BARANG",c)})).then((function(){return localStorage.removeItem("mutasiBarang")})).then((function(){return e.props.dispatch(Object(u.b)())})).then((function(){return e.props.dispatch(Object(h.b)())})).then((function(){return e.setState({kodeJenis:"",kodeJenisTujuan:"",noMutasi:"",kodeLokasi:"",tanggal:"",keterangan:"",kategori:"",noBon:""})})).then((function(){return e.forceUpdate()}))})).catch((function(t){return d.a.fire({position:"top-end",icon:"error",text:"Sepertinya ada kendala, silahkan cek koneksi",showConfirmButton:!1,timer:1500}).then((function(){return console.log(t)})).then((function(){return e.props.dispatch(Object(k.k)())}))})),this.props.dispatch(Object(u.b)())}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"container-fluid",style:{color:"black"}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"card"},c.a.createElement(K.default,{title:"Mutasi Barang"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(_,{onSubmit:function(e){return t.submitMutasiBarang(e)},onSend:this.props.onSend,noFaktur:this.props.noFaktur}))))))),c.a.createElement(C,{content:c.a.createElement(l.Suspense,{fallback:c.a.createElement(I.a,{width:"100%",height:50,count:5})},c.a.createElement(U,{onSubmit:function(e){return t.handleSubmit(e)}})),title:"Tambah Data Mutasi Barang"}))}}]),a}(l.Component);e.default=Object(p.b)((function(t){return{listBarang:t.provinsi.mutasiBarang,noFaktur:t.provinsi.noFaktur,username:t.provinsi.username,sumBruto:t.perhitungan.sumBruto,sumNetto:t.perhitungan.sumBruto,sumPkg:t.perhitungan.sumPkg,sumQty:t.perhitungan.sumQty,sumGross:t.perhitungan.sumGross,onSend:t.provinsi.onSend}}),null)(G)}}]);
//# sourceMappingURL=108.8ce92721.chunk.js.map