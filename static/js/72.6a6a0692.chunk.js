(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[72],{1198:function(e,a,t){"use strict";t.r(a);var o=t(185),r=t.n(o),n=t(237),s=t(15),l=t(16),i=t(18),c=t(17),p=t(0),d=t.n(p),u=t(12),m=t(11),g=t(343),k=t(344),_=t(347),b=t(236),h=t(19),F=t(37),v=t.n(F),j=t(88),f=t(6),S=t(5),E=t(13),y=t.n(E),N=t(146),O=t(145),x=t(23),K=t(20),G=t(24),I=Object(b.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),B=function(e){Object(i.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=a.call(this,e)).handleBarcode=function(){return function(e){clearTimeout(o.delay),o.delay=setTimeout((function(){var a=e.target.value;if(14===a.length)return Object(S.b)("barang-set/get-by-kode-barcode-set-active/"+a).then((function(e){var a=e.data.detail_barang.map((function(e){return parseFloat(e.netto)})).reduce((function(e,a){return e+a}),0);e.data.detail_barang.forEach((function(t){o.handleBarcodeSet(t,e.data.kode_barcode_set,e.data.detail_barang.length,a,t.harga_jual,t.qty)}))})),!0;var t=a.split("X");o.props.change("kodeBarang",t[0]),o.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]})}),1500)}},o.state={kodeBarang:[],non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none"},o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(j.f)())}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",this.props.netto)}},{key:"setKadar",value:function(){this.props.change("keterangan",this.state.namaJenis),this.props.change("kadar",this.state.kadarCetak),this.props.change("kadarTransaksi",this.state.kadarJual),this.props.change("kodeKategori",this.state.kodeKategori),this.props.change("namaKategori",this.state.namaKategori),this.props.change("harga_jual",this.state.harga_jual)}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleBarcodeSet",value:function(){var e=Object(n.a)(r.a.mark((function e(a,t,o,n,s,l){var i,c,p,d,u,g,k=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),i=a.kode_jenis,c=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===i})),p=0,d=0,u="LEVEL2"===this.props.level_customer?this.props.kodeCustomer:localStorage.getItem("customer_2"),g="LEVEL3"===this.props.level_customer?this.props.kodeCustomer:"-",e.next=9,Object(S.b)("/kelompok-harga/get/by-jenis-and-customer/".concat(u,"&").concat(a.kode_jenis)).then((function(e){return p=e.data.kode_tukar_normal||0})).catch((function(){return p=0}));case 9:return e.next=11,Object(S.b)("/kelompok-harga/get/by-jenis-and-customer/".concat(g,"&").concat(a.kode_jenis)).then((function(e){return d=e.data.kode_tukar_normal||0})).catch((function(){return d=0}));case 11:Object(S.b)("jenis/get/by-kode-jenis/".concat(a.kode_jenis)).then((function(e){var r,i=JSON.parse(localStorage.getItem("nota_penjualan_level1"))||[],u=JSON.parse(localStorage.getItem("nota_penjualan_level2"))||[],g=JSON.parse(localStorage.getItem("nota_penjualan_level3"))||[],_=JSON.parse(localStorage.getItem("nota_gambar"))||[],b=i.findIndex((function(e){return e.kode_kategori===e.kodeKategori})),h=u.findIndex((function(e){return e.kode_kategori===e.kodeKategori})),F=g.findIndex((function(e){return e.kode_kategori===e.kodeKategori}));if(_.push({lokasi_gambar:null===(r=e.data)||void 0===r?void 0:r.image}),localStorage.setItem("nota_gambar",JSON.stringify(_)),-1!==b){var v={netto_disc:(parseFloat(a.netto_disc||0)+parseFloat(i[b].netto_disc)).toFixed(3),netto:(parseFloat(a.netto||0)+parseFloat(i[b].netto)).toFixed(3),ongkos_rp:(parseFloat(void 0===a.rp?0:a.rp)+i[b].ongkos_rp).toLocaleString("id-ID"),disc:(parseFloat(a.disc_persen||0)+parseFloat(i[b].disc)).toFixed(3),bruto:(parseFloat(a.bruto||0)+parseFloat(i[b].bruto)).toFixed(3),kode_kategori:a.kodeKategori,kode_tukar:a.kadarTransaksi,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)+i[b].harga_jual},j={netto_disc:(parseFloat(a.bruto||0)*parseFloat(p)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100+parseFloat(u[b].netto_disc)).toFixed(3),netto:((parseFloat(a.bruto||0)*parseFloat(p)/100||0)+parseFloat(u[b].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp)+parseFloat(u[b].ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)+parseFloat(u[b].disc)).toFixed(3),bruto:parseFloat(a.bruto||0)+parseFloat(u[b].bruto),kode_kategori:a.kodeKategori,kode_tukar:p,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)+u[b].harga_jual},S={netto_disc:(parseFloat(a.bruto||0)*parseFloat(d)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100+parseFloat(g[b].netto_disc)).toFixed(3),netto:((parseFloat(a.bruto||0)*parseFloat(d)/100||0)+parseFloat(g[b].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp)+parseFloat(g[b].ongkos_rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)+parseFloat(g[b].disc)).toFixed(3),bruto:parseFloat(a.bruto||0)+parseFloat(g[b].bruto),kode_kategori:a.kodeKategori,kode_tukar:d,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)+ +g[b].harga_jual};i.push(v),u.push(j),g.push(S),i.splice(b,1),u.splice(h,1),g.splice(F,1),localStorage.setItem("nota_penjualan_level1",JSON.stringify(i)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(u)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(g))}else{var E={netto_disc:parseFloat(a.netto_disc||0).toFixed(3),netto:parseFloat(a.netto||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp),disc:a.discGlobalGr||0,bruto:parseFloat(a.bruto||0).toFixed(3),kode_kategori:a.kodeKategori,kode_tukar:a.kadarTransaksi,disc_persen:a.disc_persen||0,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)},x={netto_disc:(parseFloat(a.bruto||0)*parseFloat(p)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100).toFixed(3),netto:(parseFloat(a.bruto||0)*parseFloat(p)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)).toFixed(3),bruto:parseFloat(a.bruto||0),kode_kategori:a.kodeKategori,kode_tukar:p,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)},I={netto_disc:(parseFloat(a.bruto||0)*parseFloat(d)/100-parseFloat(a.disc_persen)*parseFloat(a.bruto||0)/100).toFixed(3),netto:(parseFloat(a.bruto||0)*parseFloat(d)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp),disc:(parseFloat(a.disc_persen)/100*parseFloat(a.bruto||0)).toFixed(3),bruto:parseFloat(a.bruto||0),kode_kategori:a.kodeKategori,kode_tukar:d,keterangan:a.keterangan,jumlah_barang_set:o,total_berat_barang_set:n,kode_barcode_set:t,harga_jual:parseFloat(s)*parseFloat(l)};i.push(E),u.push(x),g.push(I),localStorage.setItem("nota_penjualan_level1",JSON.stringify(i)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(u)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(g))}var B={netto_disc:parseFloat(a.netto_disc||0).toFixed(3)||0,gross:parseFloat(a.gross||0).toFixed(3)||0,netto:parseFloat(a.netto||0).toFixed(3)||0,qty:l||1,k:parseFloat(a.k||0),ongkos_rp:parseFloat(void 0===a.rp?0:a.rp),kadar_cetak:(c[0].kadar_cetak||0).toString(),disc_persen:a.disc_persen||0,kadar_jual:parseFloat(a.kadar_jual||0),kadar_level2:e.data.level2||0,kadar_level3:e.data.level3||0,kadar_modal:c[0].kadar_modal||0,kode_jenis:c[0].kode_jenis||0,kode_barcode:"-",kode_barcode_set:t,p:parseFloat(a.p||0),disc:a.disc||0,pkg:parseFloat(a.pkg||0),bruto:parseFloat(a.bruto||0).toFixed(3),harga_jual:s},J=Object(f.e)({data:a,hasil:c,res:e,harga_jual:s}),T=Object(f.f)({data:a,res:e,hasil:c,harga_jual:s}),w=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],D=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],P=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[];w.push(B),D.push(J),P.push(T);var C=w.map((function(e){return parseFloat(e.netto_disc)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",C),localStorage.setItem("transaksiPenjualan",JSON.stringify(w)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(D)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(P)),y.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),k.props.dispatch(Object(N.e)()),k.props.dispatch(Object(O.e)()),k.props.dispatch(Object(m.b)("FormBarangSet")),k.props.dispatch(Object(K.o)("transaksiPenjualan")),Object(f.w)("discGlobal_penjualan"),k.props.dispatch(Object(G.g)()),k.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})})).catch((function(e){return Object(x.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}));case 12:case"end":return e.stop()}}),e,this)})));return function(a,t,o,r,n,s){return e.apply(this,arguments)}}()},{key:"setBarang",value:function(e){var a,t=this.props.KodeBarangList.filter((function(a){return a.kode_jenis===e}));console.log(t),"AKSESORIS"===(null===(a=t[0])||void 0===a?void 0:a.kode_kelompok)?this.setState({non_aksesoris:"col-lg-12 row d-none",aksesoris:"col-lg-12 row"}):this.setState({non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none"})}},{key:"render",value:function(){var e=this;return d.a.createElement("form",{onSubmit:this.props.handleSubmit},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},d.a.createElement(g.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:h.a,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),d.a.createElement("div",{className:"col-md-4 col-lg-4"},""!==String(this.props.KodeBarangList)?d.a.createElement(g.a,{name:"kodeBarang",label:"Kode Model",component:h.b,className:"form-control",onBlur:this.setKadar(),onChange:function(a){return e.setBarang(a)},options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok||"AKSESORIS"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:e.nama_jenis}}))}):d.a.createElement(v.a,{width:"100%",height:50})),d.a.createElement("div",{className:"col-md-4 col-lg-4"},d.a.createElement(g.a,{name:"kode_barocde",label:"Kode Barcode",type:"text",component:h.a,placeholder:"Biarkan Kosong jika Tidak Digunakan",normalize:function(e){return e&&e.toUpperCase()},onChange:this.handleBarcode()})),d.a.createElement("div",{className:(this.state.aksesoris,"col-md-3 col-lg-3 d-none")},d.a.createElement(g.a,{name:"kadar",label:"Kode Tukar",type:"number",component:h.a})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"kodeKategori",label:"Kode Tukar",type:"number",component:h.a})),d.a.createElement("div",{className:this.state.non_aksesoris},d.a.createElement("div",{className:"col-md-12 col-lg-12"},d.a.createElement(g.a,{name:"keterangan",label:"Keterangan",type:"text",component:h.a,normalize:function(e){return null===e||void 0===e?void 0:e.toUpperCase()}})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"namaKategori",label:"Kode Tukar",type:"number",component:h.a})),d.a.createElement("div",{className:"col-md-3 col-lg-3"},d.a.createElement(g.a,{name:"p",label:"Plastik",type:"number",component:h.a})),d.a.createElement("div",{className:"col-md-3 col-lg-3"},d.a.createElement(g.a,{name:"k",label:"Kertas",type:"number",component:h.a})),d.a.createElement("div",{className:"col-md-3 col-lg-3"},d.a.createElement(g.a,{name:"pkg",label:"Pkg (Gr)",type:"number",component:h.a,onBlur:function(){return e.onclick1()}})),d.a.createElement("div",{className:"col-md-3 col-lg-3"},d.a.createElement(g.a,{name:"bruto",label:"Berat (Gr)",type:"number",component:h.a,onChange:this.onclick1()})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"kadarTransaksi",label:"Kode Tukar",type:"number",component:h.a,onBlur:function(){return e.onclick1()}})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"netto",label:"Netto (Gr)",type:"number",component:h.a,readOnly:!0})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"gross",label:"Gross (Gr)",type:"number",component:h.a,readOnly:!0})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"discGlobalPr",label:"Diskon (%)",type:"number",component:h.a,onBlur:function(){return e.onclick1()}})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"discGlobalGr",label:"Diskon (Gr)",type:"number",component:h.a,readOnly:!0})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement(g.a,{name:"nettoDiscGlobalExt",label:"Netto - Diskon (Gr)",type:"number",component:h.a,readOnly:!0})),d.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},d.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),d.a.createElement(g.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},I)))),d.a.createElement("div",{className:this.state.aksesoris},d.a.createElement("div",{className:"col-lg-3"},d.a.createElement(g.a,{name:"qty",label:"Qty",type:"number",component:h.a})),d.a.createElement("div",{className:"col-lg-3 d-none"},d.a.createElement(g.a,Object.assign({name:"harga_jual",label:"Harga Jual",type:"telp",component:h.a},I)))),d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{type:"submit",disabled:this.props.onSend,className:"btn btn-primary"},this.props.onSend?d.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",d.a.createElement("i",{className:"fa fa-paper-plane ml-3"}))))))}}]),t}(p.Component);B=Object(k.a)({form:"FormBarangSet",enableReinitialize:!0})(B);var J=Object(_.a)("FormBarangSet");a.default=Object(u.b)((function(e){var a=J(e,"bruto","kadarTransaksi","pkg"),t=a.bruto,o=a.pkg;return{netto:parseFloat(t||0).toFixed(3),gross:parseFloat(t||0)+parseFloat(o||0),discGlobalGr:0,KodeBarangList:e.provinsi.kodeBarang,onSend:e.provinsi.onSend,initialValues:{harga_jual:0,discGlobalPr:0,p:0,k:0,pkg:0,bruto:0}}}))(B)}}]);
//# sourceMappingURL=72.6a6a0692.chunk.js.map