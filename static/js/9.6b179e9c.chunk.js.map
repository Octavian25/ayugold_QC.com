{"version":3,"sources":["Transaksi/Component/FormTerimaSupplier.jsx"],"names":["currencyMask","createNumberMask","prefix","suffix","locale","FormTerimaSupplier","props","onclick1","bind","state","kodeBarang","DataSupplier","non_aksesoris","aksesoris","kode_barang","keterangan","kadar","P","K","bungkus","berat","harga","murni","ongkos","status","kadarCetak","kadarBeli","namaJenis","kodeJenis","AxiosMasterGet","then","res","setState","data","filter","elm","kode_kelompok","catch","err","console","log","getTimbangan","this","change","total_netto","netto","warning","noFaktur","gross","result_explode","split","from","kodeKategori","harga_beli","setFocus","onSubmit","handleSubmit","className","name","label","type","readOnly","component","renderField","defaultValue","normalize","value","toUpperCase","String","renderFieldSelect","options","map","list","kode_jenis","nama_jenis","kadar_cetak","kadar_beli","kode_kategori","onChange","pilihBarang","onBlur","setKadar","placeholder","style","visibility","htmlFor","disabled","submitting","Component","reduxForm","form","enableReinitialize","selector","formValueSelector","connect","bruto","kadarTransaksi","pkg","Number","toFixed","initialValues","discGlobalPr","p","k","rp"],"mappings":"oQAWMA,EAAeC,2BAAiB,CACpCC,OAAQ,OACRC,OAAQ,KACRC,OAAQ,UAGJC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKC,MAAQ,CACXC,WAAY,GACZC,aAAc,GACdC,cAAe,gBACfC,UAAW,uBACXC,YAAa,GACbC,WAAY,iBACZC,MAAO,GACPC,EAAG,GACHC,EAAG,GACHC,QAAS,GACTC,MAAO,GACPC,MAAO,GACPC,MAAO,GACPC,OAAQ,GACRC,OAAQ,GACRC,WAAY,GACZC,UAAW,GACXC,UAAW,GACXC,UAAW,IAtBI,E,qDA0BnB,WAAqB,IAAD,OAClBC,YAAe,0BACZC,MAAK,SAACC,GAAD,OACJ,EAAKC,SAAS,CACZtB,WAAYqB,EAAIE,KAAKC,QACnB,SAACC,GAAD,MACwB,cAAtBA,EAAIC,eACkB,cAAtBD,EAAIC,sBAIXC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAC9BG,YAAaC,KAAKpC,MAAMqC,U,sBAG1B,WACE,GAAID,KAAKjC,MAAMmC,YAAcF,KAAKpC,MAAMuC,MAEtC,OADAC,YAAQ,kCACD,EAETJ,KAAKpC,MAAMqC,OAAO,QAASD,KAAKpC,MAAMuC,OACtCH,KAAKpC,MAAMqC,OAAO,WAAYD,KAAKpC,MAAMyC,UACzCL,KAAKpC,MAAMqC,OAAO,QAASD,KAAKpC,MAAM0C,S,yBAGxC,SAAYf,GAAO,IAAD,OAIZgB,GAHOhB,GAEP,6DACsBiB,MAAM,KACR,WAApBR,KAAKpC,MAAM6C,MACbtB,YACE,uCAAyCoB,EAAe,IACxDnB,MAAK,SAACC,GAAS,IAAD,IAId,OAHA,EAAKC,SAAS,CACZY,YAAW,UAAEb,EAAIE,YAAN,aAAE,EAAUW,eAErB,UAAAb,EAAIE,YAAJ,eAAUW,aAAc,IAC1BE,YAAQ,8BACR,EAAKxC,MAAMqC,OAAO,YAAa,IAC/B,EAAKrC,MAAMqC,OAAO,QAAS,IAC3B,EAAKrC,MAAMqC,OAAO,IAAK,IACvB,EAAKrC,MAAMqC,OAAO,IAAK,IACvB,EAAKrC,MAAMqC,OAAO,MAAO,IACzB,EAAKrC,MAAMqC,OAAO,QAAS,IAC3B,EAAKrC,MAAMqC,OAAO,iBAAkB,IACpC,EAAKrC,MAAMqC,OAAO,QAAS,IAC3B,EAAKrC,MAAMqC,OAAO,QAAS,IAC3B,EAAKrC,MAAMqC,OAAO,gBAAiB,IACnC,EAAKrC,MAAMqC,OAAO,KAAM,IACxB,EAAKrC,MAAMqC,OAAO,MAAO,IACzB,EAAKrC,MAAMqC,OAAO,aAAc,KACzB,MAKa,cAAtBM,EAAe,GACjBP,KAAKV,SAAS,CACZpB,cAAe,uBACfC,UAAW,kBAGb6B,KAAKV,SAAS,CACZpB,cAAe,gBACfC,UAAW,yBAGf6B,KAAKV,SAAS,CACZJ,UAAWqB,EAAe,GAC1BtB,UAAWsB,EAAe,GAC1BxB,WAAYwB,EAAe,GAC3BvB,UAAWuB,EAAe,GAC1BG,aAAcH,EAAe,GAC7BI,WAAYJ,EAAe,KAE7BK,YAAS,a,sBAGX,WACEZ,KAAKpC,MAAMqC,OAAO,aAAcD,KAAKjC,MAAMkB,WAC3Ce,KAAKpC,MAAMqC,OAAO,QAASD,KAAKjC,MAAMgB,YACtCiB,KAAKpC,MAAMqC,OAAO,iBAAkBD,KAAKjC,MAAMiB,WAC/CgB,KAAKpC,MAAMqC,OAAO,gBAAiBD,KAAKjC,MAAM2C,cAC9CV,KAAKpC,MAAMqC,OAAO,aAAcD,KAAKjC,MAAM4C,c,oBAG7C,WAAU,IAAD,OACP,OACE,0BAAME,SAAUb,KAAKpC,MAAMkD,cACzB,yBAAKC,UAAU,OACb,yBAAKA,UAAU,8BACb,kBAAC,IAAD,CACEC,KAAK,WACLC,MAAOjB,KAAKpC,MAAMyC,SAClBa,KAAK,OACLC,UAAU,EACVC,UAAWC,IACXC,aAActB,KAAKpC,MAAMyC,SACzBkB,UAAW,SAACC,GAAD,OAAWA,GAASA,EAAMC,kBAGzC,yBAAKV,UAAU,uBACsB,KAAlCW,OAAO1B,KAAKjC,MAAMC,YACjB,kBAAC,IAAD,CACEiD,MAAM,aACND,KAAK,YACLI,UAAWO,IACXC,QAAS5B,KAAKjC,MAAMC,WAAW6D,KAAI,SAACC,GAkBlC,MAjBW,CACTN,MACEM,EAAKC,WACL,IACAD,EAAKE,WACL,IACAF,EAAKG,YACL,IACAH,EAAKI,WACL,IACAJ,EAAKK,cACL,IACAL,EAAKpC,cACL,KAXA,OAYAoC,QAZA,IAYAA,OAZA,EAYAA,EAAMnB,YACRK,KAAMc,EAAKE,eAIfI,SAAU,SAAC7C,GAAD,OAAU,EAAK8C,YAAY9C,IACrC+C,OAAQtC,KAAKuC,WACbC,YAAY,mBAGd,kBAAC,IAAD,CAAiBvB,MAAM,gBAG3B,yBACEF,UAAU,sBACV0B,MACsB,WAApBzC,KAAKpC,MAAM6C,KAAoB,KAAO,CAAEiC,WAAY,WAGtD,kBAAC,IAAD,CACE1B,KAAK,aACLC,MAAM,aACNC,KAAK,OACLE,UAAWC,IACXE,UAAW,SAACC,GAAD,OAAWA,GAASA,EAAMC,kBAGzC,yBAAKV,UAAWf,KAAKjC,MAAMG,eACzB,yBAAK6C,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,QACLC,MAAM,WACNC,KAAK,SACLE,UAAWC,IACXF,UAAU,KAGd,yBAAKJ,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,IACLC,MAAM,UACNC,KAAK,SACLE,UAAWC,OAGf,yBAAKN,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,IACLC,MAAM,SACNC,KAAK,SACLE,UAAWC,OAGf,yBAAKN,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,MACLC,MAAM,eACNC,KAAK,SACLE,UAAWC,IACXiB,OAAQtC,KAAKnC,cAGjB,yBAAKkD,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,QACLC,MAAM,aACNC,KAAK,SACLE,UAAWC,IACXiB,OAAQtC,KAAKnC,cAGjB,yBAAKkD,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,iBACLC,MAAM,gBACNC,KAAK,SACLE,UAAWC,IACXiB,OAAQtC,KAAKnC,cAGjB,yBAAKkD,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,QACLC,MAAM,aACNC,KAAK,SACLE,UAAWC,IACXF,UAAU,KAGd,yBAAKJ,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,QACLC,MAAM,aACNC,KAAK,SACLE,UAAWC,IACXF,UAAU,KAGd,yBAAKJ,UAAU,8BACb,kBAAC,IAAD,CACEC,KAAK,gBACLC,MAAM,gBACNC,KAAK,SACLE,UAAWC,IACXF,UAAU,KAGd,yBAAKJ,UAAU,uBACb,2BAAO4B,QAAQ,IAAf,eACA,kBAAC,IAAD,eACE3B,KAAK,KACLI,UAAU,QACVF,KAAK,MACLH,UAAU,gBACNzD,MAIV,yBAAKyD,UAAWf,KAAKjC,MAAMI,WACzB,yBAAK4C,UAAU,uBACb,kBAAC,IAAD,CACEC,KAAK,MACLC,MAAM,MACNC,KAAK,SACLE,UAAWC,OAGf,yBAAKN,UAAU,uBACb,2BAAO4B,QAAQ,IAAf,mBACA,kBAAC,IAAD,eACE3B,KAAK,aACLI,UAAU,QACVF,KAAK,MACLH,UAAU,gBACNzD,MAIV,yBAAKyD,UAAU,6BACb,yBAAKA,UAAU,cACb,4BACEA,UAAU,kBACVG,KAAK,SACL0B,SAAU5C,KAAKpC,MAAMiF,YAHvB,kB,GAlSmBC,aAiTjCnF,EAAqBoF,YAAU,CAC7BC,KAAM,iBACNC,oBAAoB,GAFDF,CAGlBpF,GACH,IAAMuF,EAAWC,YAAkB,kBAEpBC,uBAAQ,SAACrF,GACtB,MAAuCmF,EACrCnF,EACA,QACA,iBACA,OAJMsF,EAAR,EAAQA,MAAOC,EAAf,EAAeA,eAAgBC,EAA/B,EAA+BA,IAM/B,MAAO,CACLpD,OAAQqD,OAAOH,IAAUG,OAAOF,GAAkB,MAAMG,QAAQ,GAChEnD,OAAQkD,OAAOH,GAASG,OAAOD,IAAME,QAAQ,GAC7CC,cAAe,CACbC,aAAc,EACdC,EAAG,EACHC,EAAG,EACHN,IAAK,EACLF,MAAO,EACPS,GAAI,MAhBKV,CAmBZzF","file":"static/js/9.6b179e9c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Field, reduxForm, formValueSelector } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\nimport { createNumberMask } from \"redux-form-input-masks\";\r\nimport { getTimbangan } from \"../../GetTimbangan\";\r\nimport { renderField, renderFieldSelect } from \"../../renderField\";\r\nimport { AxiosMasterGet } from \"../../Axios\";\r\nimport { SkeletonLoading } from \"../../GlobalComponent/function\";\r\nimport { setFocus } from \"../../helper\";\r\nimport { warning } from \"../../Alert\";\r\n\r\nconst currencyMask = createNumberMask({\r\n  prefix: \"Rp. \",\r\n  suffix: \",-\",\r\n  locale: \"id-ID\",\r\n});\r\n\r\nclass FormTerimaSupplier extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onclick1 = this.onclick1.bind(this);\r\n    this.state = {\r\n      kodeBarang: [],\r\n      DataSupplier: [],\r\n      non_aksesoris: \"col-lg-12 row\",\r\n      aksesoris: \"col-lg-12 row d-none\",\r\n      kode_barang: \"\",\r\n      keterangan: \"INI KETERANGAN\",\r\n      kadar: \"\",\r\n      P: \"\",\r\n      K: \"\",\r\n      bungkus: \"\",\r\n      berat: \"\",\r\n      harga: \"\",\r\n      murni: \"\",\r\n      ongkos: \"\",\r\n      status: \"\",\r\n      kadarCetak: \"\",\r\n      kadarBeli: \"\",\r\n      namaJenis: \"\",\r\n      kodeJenis: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    AxiosMasterGet(\"jenis/get/all-no-image\")\r\n      .then((res) =>\r\n        this.setState({\r\n          kodeBarang: res.data.filter(\r\n            (elm) =>\r\n              elm.kode_kelompok === \"AKSESORIS\" ||\r\n              elm.kode_kelompok === \"PERHIASAN\"\r\n          ),\r\n        })\r\n      )\r\n      .catch((err) => console.log(err));\r\n    getTimbangan(this.props.change);\r\n  }\r\n\r\n  onclick1() {\r\n    if (this.state.total_netto < this.props.netto) {\r\n      warning(\"Berat Melebihi Stock Tersedia\");\r\n      return false;\r\n    }\r\n    this.props.change(\"netto\", this.props.netto);\r\n    this.props.change(\"noFaktur\", this.props.noFaktur);\r\n    this.props.change(\"gross\", this.props.gross);\r\n  }\r\n\r\n  pilihBarang(data) {\r\n    var supp = data\r\n      ? data\r\n      : \"DEFAULT | DEFAULT | DEFAULT | DEFAULT | DEFAULT | DEFAULT\";\r\n    var result_explode = supp.split(\"|\");\r\n    if (this.props.from === \"return\") {\r\n      AxiosMasterGet(\r\n        \"jenis/get/stock-by-jenis-and-lokasi/\" + result_explode[0]\r\n      ).then((res) => {\r\n        this.setState({\r\n          total_netto: res.data?.total_netto,\r\n        });\r\n        if (res.data?.total_netto < 1) {\r\n          warning(\"Stock Barang Kurang Dari 1\");\r\n          this.props.change(\"kodeJenis\", \"\");\r\n          this.props.change(\"kadar\", \"\");\r\n          this.props.change(\"p\", \"\");\r\n          this.props.change(\"k\", \"\");\r\n          this.props.change(\"pkg\", \"\");\r\n          this.props.change(\"bruto\", \"\");\r\n          this.props.change(\"kadarTransaksi\", \"\");\r\n          this.props.change(\"gross\", \"\");\r\n          this.props.change(\"netto\", \"\");\r\n          this.props.change(\"kode_kategori\", \"\");\r\n          this.props.change(\"rp\", \"\");\r\n          this.props.change(\"qty\", \"\");\r\n          this.props.change(\"harga_beli\", \"\");\r\n          return false;\r\n        }\r\n        return false;\r\n      });\r\n    }\r\n    if (result_explode[5] === \"AKSESORIS\") {\r\n      this.setState({\r\n        non_aksesoris: \"col-lg-12 row d-none\",\r\n        aksesoris: \"col-lg-12 row\",\r\n      });\r\n    } else {\r\n      this.setState({\r\n        non_aksesoris: \"col-lg-12 row\",\r\n        aksesoris: \"col-lg-12 row d-none\",\r\n      });\r\n    }\r\n    this.setState({\r\n      kodeJenis: result_explode[0],\r\n      namaJenis: result_explode[1],\r\n      kadarCetak: result_explode[2],\r\n      kadarBeli: result_explode[3],\r\n      kodeKategori: result_explode[4],\r\n      harga_beli: result_explode[6],\r\n    });\r\n    setFocus(\"Plastik\");\r\n  }\r\n\r\n  setKadar() {\r\n    this.props.change(\"keterangan\", this.state.namaJenis);\r\n    this.props.change(\"kadar\", this.state.kadarCetak);\r\n    this.props.change(\"kadarTransaksi\", this.state.kadarBeli);\r\n    this.props.change(\"kode_kategori\", this.state.kodeKategori);\r\n    this.props.change(\"harga_beli\", this.state.harga_beli);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit}>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12 col-lg-12 d-none\">\r\n            <Field\r\n              name=\"noFaktur\"\r\n              label={this.props.noFaktur}\r\n              type=\"text\"\r\n              readOnly={true}\r\n              component={renderField}\r\n              defaultValue={this.props.noFaktur}\r\n              normalize={(value) => value && value.toUpperCase()}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-4 form-group\">\r\n            {String(this.state.kodeBarang) !== \"\" ? (\r\n              <Field\r\n                label=\"Kode Model\"\r\n                name=\"kodeJenis\"\r\n                component={renderFieldSelect}\r\n                options={this.state.kodeBarang.map((list) => {\r\n                  let data = {\r\n                    value:\r\n                      list.kode_jenis +\r\n                      \"|\" +\r\n                      list.nama_jenis +\r\n                      \"|\" +\r\n                      list.kadar_cetak +\r\n                      \"|\" +\r\n                      list.kadar_beli +\r\n                      \"|\" +\r\n                      list.kode_kategori +\r\n                      \"|\" +\r\n                      list.kode_kelompok +\r\n                      \"|\" +\r\n                      list?.harga_beli,\r\n                    name: list.nama_jenis,\r\n                  };\r\n                  return data;\r\n                })}\r\n                onChange={(data) => this.pilihBarang(data)}\r\n                onBlur={this.setKadar()}\r\n                placeholder=\"Silahkan Pilih\"\r\n              ></Field>\r\n            ) : (\r\n              <SkeletonLoading label=\"Kode Model\" />\r\n            )}\r\n          </div>\r\n          <div\r\n            className=\"col-md-8 form-group\"\r\n            style={\r\n              this.props.from === \"terima\" ? null : { visibility: \"hidden\" }\r\n            }\r\n          >\r\n            <Field\r\n              name=\"keterangan\"\r\n              label=\"Keterangan\"\r\n              type=\"text\"\r\n              component={renderField}\r\n              normalize={(value) => value && value.toUpperCase()}\r\n            />\r\n          </div>\r\n          <div className={this.state.non_aksesoris}>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"kadar\"\r\n                label=\"Cap Kode\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"p\"\r\n                label=\"Plastik\"\r\n                type=\"number\"\r\n                component={renderField}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"k\"\r\n                label=\"Kertas\"\r\n                type=\"number\"\r\n                component={renderField}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"pkg\"\r\n                label=\"Bungkus (Gr)\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                onBlur={this.onclick1()}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"bruto\"\r\n                label=\"Berat (Gr)\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                onBlur={this.onclick1()}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"kadarTransaksi\"\r\n                label=\"Kode Awal (%)\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                onBlur={this.onclick1()}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"gross\"\r\n                label=\"Gross (Gr)\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <Field\r\n                name=\"netto\"\r\n                label=\"Murni (Gr)\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group d-none\">\r\n              <Field\r\n                name=\"kode_kategori\"\r\n                label=\"Kode Kategori\"\r\n                type=\"number\"\r\n                component={renderField}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 form-group\">\r\n              <label htmlFor=\"\">Ongkos (Rp)</label>\r\n              <Field\r\n                name=\"rp\"\r\n                component=\"input\"\r\n                type=\"tel\"\r\n                className=\"form-control\"\r\n                {...currencyMask}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className={this.state.aksesoris}>\r\n            <div className=\"col-md-4 form-group\">\r\n              <Field\r\n                name=\"qty\"\r\n                label=\"QTY\"\r\n                type=\"number\"\r\n                component={renderField}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-4 form-group\">\r\n              <label htmlFor=\"\">Harga Beli (Rp)</label>\r\n              <Field\r\n                name=\"harga_beli\"\r\n                component=\"input\"\r\n                type=\"tel\"\r\n                className=\"form-control\"\r\n                {...currencyMask}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-12 form-group mt-3\">\r\n            <div className=\"text-right\">\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                type=\"submit\"\r\n                disabled={this.props.submitting}\r\n              >\r\n                Simpan\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nFormTerimaSupplier = reduxForm({\r\n  form: \"TerimaSupplier\",\r\n  enableReinitialize: true,\r\n})(FormTerimaSupplier);\r\nconst selector = formValueSelector(\"TerimaSupplier\"); // <-- same as form name\r\n\r\nexport default connect((state) => {\r\n  const { bruto, kadarTransaksi, pkg } = selector(\r\n    state,\r\n    \"bruto\",\r\n    \"kadarTransaksi\",\r\n    \"pkg\"\r\n  );\r\n  return {\r\n    netto: (Number(bruto) * (Number(kadarTransaksi) / 100)).toFixed(3),\r\n    gross: (Number(bruto) + Number(pkg)).toFixed(2),\r\n    initialValues: {\r\n      discGlobalPr: 0,\r\n      p: 0,\r\n      k: 0,\r\n      pkg: 0,\r\n      bruto: 0,\r\n      rp: 0,\r\n    },\r\n  };\r\n})(FormTerimaSupplier);\r\n"],"sourceRoot":""}