(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[160],{1120:function(a,e,t){"use strict";t.r(e);var o=t(166),r=t.n(o),s=t(220),n=t(24),l=t(25),i=t(27),p=t(26),d=t(0),c=t.n(d),u=t(17),_=t(12),g=t(327),k=t(328),b=t(331),F=t(34),m=t(47),h=t.n(m),j=t(92),f=t(6),v=t(5),S=t(13),O=t.n(S),x=t(133),N=t(132),y=t(52),I=t(23),G=t(32),E=function(a){Object(i.a)(t,a);var e=Object(p.a)(t);function t(a){var o;return Object(n.a)(this,t),(o=e.call(this,a)).handleBarcode=function(){return function(a){clearTimeout(o.delay),o.delay=setTimeout((function(){var e=a.target.value;if(14===e.length)return Object(v.b)("barang-set/get-by-kode-barcode-set-active/"+e).then((function(a){var e=a.data.detail_barang.map((function(a){return parseFloat(a.netto)})).reduce((function(a,e){return a+e}),0);a.data.detail_barang.forEach((function(t){o.handleBarcodeSet(t,a.data.kode_barcode_set,a.data.detail_barang.length,e,t.harga_jual,t.qty)}))})),!0;var t=e.split("X");o.props.change("kodeBarang",t[0]),o.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]})}),1500)}},o.state={kodeBarang:[],non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none"},o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(j.e)())}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",(this.props.netto-this.props.discGlobalGr).toFixed(3))}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleBarcodeSet",value:function(){var a=Object(s.a)(r.a.mark((function a(e,t,o,s,n,l){var i,p,d,c,u,g,k=this;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),i=e.kode_jenis,p=this.props.KodeBarangList.filter((function(a){return a.kode_jenis===i})),d=0,c=0,u="LEVEL2"===this.props.level_customer?this.props.kodeCustomer:localStorage.getItem("customer_2"),g="LEVEL3"===this.props.level_customer?this.props.kodeCustomer:"-",a.next=9,Object(v.b)("/kelompok-harga/get/by-jenis-and-customer/".concat(u,"&").concat(e.kode_jenis)).then((function(a){return d=a.data.kode_tukar_normal||0})).catch((function(){return d=0}));case 9:return a.next=11,Object(v.b)("/kelompok-harga/get/by-jenis-and-customer/".concat(g,"&").concat(e.kode_jenis)).then((function(a){return c=a.data.kode_tukar_normal||0})).catch((function(){return c=0}));case 11:Object(v.b)("jenis/get/by-kode-jenis/".concat(e.kode_jenis)).then((function(a){var r,i=JSON.parse(localStorage.getItem("nota_penjualan_level1"))||[],u=JSON.parse(localStorage.getItem("nota_penjualan_level2"))||[],g=JSON.parse(localStorage.getItem("nota_penjualan_level3"))||[],b=JSON.parse(localStorage.getItem("nota_gambar"))||[],F=i.findIndex((function(a){return a.kode_kategori===a.kodeKategori})),m=u.findIndex((function(a){return a.kode_kategori===a.kodeKategori})),h=g.findIndex((function(a){return a.kode_kategori===a.kodeKategori}));if(b.push({lokasi_gambar:null===(r=a.data)||void 0===r?void 0:r.image}),localStorage.setItem("nota_gambar",JSON.stringify(b)),-1!==F){var j={netto_disc:(parseFloat(e.netto_disc||0)+parseFloat(i[F].netto_disc)).toFixed(3),netto:(parseFloat(e.netto||0)+parseFloat(i[F].netto)).toFixed(3),ongkos_rp:(parseFloat(void 0===e.rp?0:e.rp)+i[F].ongkos_rp).toLocaleString("id-ID"),disc:(parseFloat(e.disc_persen||0)+parseFloat(i[F].disc)).toFixed(3),bruto:(parseFloat(e.bruto||0)+parseFloat(i[F].bruto)).toFixed(3),kode_kategori:e.kodeKategori,kode_tukar:e.kadarTransaksi,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)+i[F].harga_jual},v={netto_disc:(parseFloat(e.bruto||0)*parseFloat(d)/100-parseFloat(e.disc_persen)*parseFloat(e.bruto||0)/100+parseFloat(u[F].netto_disc)).toFixed(3),netto:((parseFloat(e.bruto||0)*parseFloat(d)/100||0)+parseFloat(u[F].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp)+parseFloat(u[F].ongkos_rp),disc:(parseFloat(e.disc_persen)/100*parseFloat(e.bruto||0)+parseFloat(u[F].disc)).toFixed(3),bruto:parseFloat(e.bruto||0)+parseFloat(u[F].bruto),kode_kategori:e.kodeKategori,kode_tukar:d,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)+u[F].harga_jual},S={netto_disc:(parseFloat(e.bruto||0)*parseFloat(c)/100-parseFloat(e.disc_persen)*parseFloat(e.bruto||0)/100+parseFloat(g[F].netto_disc)).toFixed(3),netto:((parseFloat(e.bruto||0)*parseFloat(c)/100||0)+parseFloat(g[F].netto)).toFixed(3),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp)+parseFloat(g[F].ongkos_rp),disc:(parseFloat(e.disc_persen)/100*parseFloat(e.bruto||0)+parseFloat(g[F].disc)).toFixed(3),bruto:parseFloat(e.bruto||0)+parseFloat(g[F].bruto),kode_kategori:e.kodeKategori,kode_tukar:c,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)+ +g[F].harga_jual};i.push(j),u.push(v),g.push(S),i.splice(F,1),u.splice(m,1),g.splice(h,1),localStorage.setItem("nota_penjualan_level1",JSON.stringify(i)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(u)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(g))}else{var y={netto_disc:parseFloat(e.netto_disc||0).toFixed(3),netto:parseFloat(e.netto||0).toFixed(3),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp),disc:e.discGlobalGr||0,bruto:parseFloat(e.bruto||0).toFixed(3),kode_kategori:e.kodeKategori,kode_tukar:e.kadarTransaksi,disc_persen:e.disc_persen||0,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)},E={netto_disc:(parseFloat(e.bruto||0)*parseFloat(d)/100-parseFloat(e.disc_persen)*parseFloat(e.bruto||0)/100).toFixed(3),netto:(parseFloat(e.bruto||0)*parseFloat(d)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp),disc:(parseFloat(e.disc_persen)/100*parseFloat(e.bruto||0)).toFixed(3),bruto:parseFloat(e.bruto||0),kode_kategori:e.kodeKategori,kode_tukar:d,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)},J={netto_disc:(parseFloat(e.bruto||0)*parseFloat(c)/100-parseFloat(e.disc_persen)*parseFloat(e.bruto||0)/100).toFixed(3),netto:(parseFloat(e.bruto||0)*parseFloat(c)/100||0).toFixed(3),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp),disc:(parseFloat(e.disc_persen)/100*parseFloat(e.bruto||0)).toFixed(3),bruto:parseFloat(e.bruto||0),kode_kategori:e.kodeKategori,kode_tukar:c,keterangan:e.keterangan,jumlah_barang_set:o,total_berat_barang_set:s,kode_barcode_set:t,harga_jual:parseFloat(n)*parseFloat(l)};i.push(y),u.push(E),g.push(J),localStorage.setItem("nota_penjualan_level1",JSON.stringify(i)),localStorage.setItem("nota_penjualan_level2",JSON.stringify(u)),localStorage.setItem("nota_penjualan_level3",JSON.stringify(g))}var K={netto_disc:parseFloat(e.netto_disc||0).toFixed(3)||0,gross:parseFloat(e.gross||0).toFixed(3)||0,netto:parseFloat(e.netto||0).toFixed(3)||0,qty:l||1,k:parseFloat(e.k||0),ongkos_rp:parseFloat(void 0===e.rp?0:e.rp),kadar_cetak:(p[0].kadar_cetak||0).toString(),disc_persen:e.disc_persen||0,kadar_jual:parseFloat(e.kadar_jual||0),kadar_level2:a.data.level2||0,kadar_level3:a.data.level3||0,kadar_modal:p[0].kadar_modal||0,kode_jenis:p[0].kode_jenis||0,kode_barcode:"-",kode_barcode_set:t,p:parseFloat(e.p||0),disc:e.disc||0,pkg:parseFloat(e.pkg||0),bruto:parseFloat(e.bruto||0).toFixed(3),harga_jual:n},B=Object(f.e)({data:e,hasil:p,res:a,harga_jual:n}),P=Object(f.f)({data:e,res:a,hasil:p,harga_jual:n}),T=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],w=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],L=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[];T.push(K),w.push(B),L.push(P);var D=T.map((function(a){return parseFloat(a.netto_disc)})).reduce((function(a,e){return a+e}),0);localStorage.setItem("GrandTotalNetto",D),localStorage.setItem("transaksiPenjualan",JSON.stringify(T)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(w)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(L)),O.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),k.props.dispatch(Object(x.e)()),k.props.dispatch(Object(N.e)()),k.props.dispatch(Object(_.b)("FormTransaksiPO")),k.props.dispatch(Object(I.o)("transaksiPenjualan")),Object(f.w)("discGlobal_penjualan"),k.props.dispatch(Object(G.g)()),k.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})})).catch((function(a){return Object(y.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}));case 12:case"end":return a.stop()}}),a,this)})));return function(e,t,o,r,s,n){return a.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},c.a.createElement(g.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:F.a,defaultValue:this.props.noFaktur,normalize:function(a){return a&&a.toUpperCase()}})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},""!==String(this.props.KodeBarangList)?c.a.createElement(g.a,{name:"kodeBarang",label:"Kode Model",component:F.b,className:"form-control",options:this.props.KodeBarangList.filter((function(a){return"PERHIASAN"===a.kode_kelompok||"AKSESORIS"===a.kode_kelompok})).map((function(a){return{value:a.kode_jenis,name:a.nama_jenis}}))}):c.a.createElement(h.a,{width:"100%",height:50})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"request_warna_batu",label:"Request Warna Batu",type:"text",component:F.a})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"request_lain",label:"Request Lain",type:"text",component:F.a})),c.a.createElement("div",{className:"col-lg-12 col-md-12"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{type:"submit",disabled:this.props.onSend,className:"btn btn-primary"},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Simpan",c.a.createElement("i",{className:"fa fa-paper-plane ml-3"}))))))}}]),t}(d.Component);E=Object(k.a)({form:"FormTransaksiPO",enableReinitialize:!0})(E);var J=Object(b.a)("FormTransaksiPO");e.default=Object(u.b)((function(a){var e=J(a,"bruto","kadarTransaksi","pkg","discGlobalPr"),t=e.bruto,o=e.pkg,r=e.discGlobalPr;return{netto:parseFloat(t||0).toFixed(3),gross:parseFloat(t||0)+parseFloat(o||0),discGlobalGr:(parseFloat(t||0)*(parseFloat(r||0)/100)).toFixed(3),KodeBarangList:a.provinsi.kodeBarang,onSend:a.provinsi.onSend,initialValues:{discGlobalPr:0,p:0,k:0,pkg:0,bruto:0,discGlobalGr:0,harga_jual:0,kadarTransaksi:100}}}))(E)}}]);
//# sourceMappingURL=160.58972677.chunk.js.map