(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[63],{1166:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(16),l=a(18),o=a(17),s=a(0),c=a.n(s),i=a(12),m=a(708),u=a(100),d=a.n(u),p=a(61),h=a.n(p),b=a(101),E=a.n(b),f=a(651),g=a.n(f),y=a(37),N=a.n(y),v=a(102),S=a.n(v),k=a(23),B=a(55),O=a(240),T=a(49),P=a(24),j=Object(s.lazy)((function(){return a.e(10).then(a.bind(null,806))})),L=p.Search.SearchBar,w=p.CSVExport.ExportCSVButton,x=Object(s.lazy)((function(){return Promise.resolve().then(a.bind(null,103))})),A=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://147.139.193.169:8001/api/v1/",REACT_APP_TYPE:"real"}).REACT_APP_BACKEND_URL_NON_MASTER,C=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).disabledButton=function(e){e.target.disabled=!0},r.nextStep=function(){var e=r.state.step;0===e?r.setState({step:e+1,step2:"row",step1:"row d-none"}):1===e&&r.setState({step:e+1,step2:"row d-none",step3:"row"})},r.prevStep=function(){var e=r.state.step;1===e?r.setState({step:e-1,step2:"row d-none",step1:"row"}):2===e&&r.setState({step:e-1,step3:"row d-none",step2:"row"})},r.state={listSupplier:[],step:0,step1:"row",step2:"row d-none",columns:[{dataField:"tanggal",text:"Tanggal",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"namaAktor",text:"Nama Toko",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"noBon",text:"Nomor Bon",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"rp",text:"Bon (Rp)",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"bruto",text:"Bon (Gr)",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"aksi",text:"Aksi",csvExport:!1,formatter:function(e,t){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(e){return r.klikPilih(t)}},c.a.createElement("i",{className:"fa fa-check-circle mr-2"}),"PILIH"))},headerStyle:function(){return{width:"9%"}}}],data:[{tanggal:"2020-11-10",noBon:"FAKTUR2020",totalBayar:3e7}],listValidasiBarang:[]},r}return Object(r.a)(a,[{key:"klikPilih",value:function(e){this.props.dispatch(Object(P.j)()),this.setState({totalBon:e.rp,noBon:e.noFaktur})}},{key:"handleSubmitPembayaran",value:function(e){var t=this,a=JSON.parse(localStorage.getItem("alatBayarGiroLM")),n=JSON.parse(localStorage.getItem("alatBayarTunaiLM")),r=JSON.parse(localStorage.getItem("alatBayarTrfLM")),l=null===a?0:a[0].giroNetto,o=null===n?0:n[0].tunaiNetto,s=null===r?0:r[0].transferRp,c={alatBayarTunai:JSON.parse(localStorage.getItem("alatBayarTunaiLM")),alatBayarTrf:JSON.parse(localStorage.getItem("alatBayarTrfLM")),alatBayarGiro:JSON.parse(localStorage.getItem("alatBayarGiroLM")),footerDocument:{inputBy:"ADMIN"},noFaktur:this.props.noFaktur,noBon:this.props.noFaktur,tipeTransaksi:"PELUNASAN-JUAL-LM",totalAlatBayar:{totalTrfRp:o,totalTunaiRp:s,totalCt:0,totalRsk:0,totalGiroRp:l,totalPutusRp:0,totalPutusGr:0,tipeData:"-"},fakturList:[{rp:0,netto:0,noFakturPilih:e.noBon}]};console.log(JSON.stringify(c)),S.a.post(A+"cst/dc/byr",c).then((function(){return t.props.dispatch(Object(P.g)())})).then((function(){return Object(k.b)("Pembayaran berhasil")})).then((function(){return Object(O.c)(["cashLM","alatBayarTunaiLM","alatBayarTrfLM","giroLM","alatBayarGiroLM","transferLM"])})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return t.props.dispatch(B.b)})).catch((function(){return Object(k.c)("Pembayaran Gagal, Mohon periksa kembali koneksi anda")}))}},{key:"componentDidMount",value:function(){this.getData(),this.props.dispatch(Object(B.b)())}},{key:"getData",value:function(){var e=this;S.a.get(A+"cst/dc/lm/heads?statusValid=VALID").then((function(t){return e.setState({listValidasiBarang:t.data.filter((function(e){return"JUAL LM"===e.tipeTransaksi}))})}))}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"card"},c.a.createElement(T.default,{title:"Pembayaran Penjualan LM"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("br",null),c.a.createElement("div",{className:"col-lg-12 col-md-12"},c.a.createElement(g.a,{steps:[{title:"Pilih Data"},{title:"Konfirmasi"}],activeStep:this.state.step})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:this.state.step1},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(m.a,null)),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(h.a,{keyField:"kodeKelompok",data:this.state.listValidasiBarang,columns:this.state.columns,search:!0},(function(e){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(L,Object.assign({},e.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(d.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:E()()})))}))),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.nextStep()}},"Next")))),c.a.createElement("div",{className:this.state.step2},c.a.createElement(h.a,{keyField:"kodeKelompok",data:this.state.data,columns:this.state.columns,search:!0},(function(e){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(L,Object.assign({},e.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(d.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:E()()})),c.a.createElement(w,Object.assign({},e.csvProps,{className:"btn btn-primary"}),"Export CSV"))})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:"text-left"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.prevStep()},type:"button"},"Back"))),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Simpan"))))))))),c.a.createElement(x,{content:c.a.createElement(s.Suspense,{fallback:c.a.createElement(N.a,{width:"100%",height:50,count:5})},c.a.createElement(j,{onSubmit:function(t){return e.handleSubmitPembayaran(t)},totalBon:this.state.totalBon,sumTotalBayar:this.props.sumTotalBayar,noBon:this.state.noBon})),title:"Tambah Data Pembayaran"})))}}]),a}(s.Component);t.default=Object(i.b)((function(e){return{sumTotalBayar:e.provinsi.sumTotalBayar,noFaktur:e.provinsi.noFaktur}}),null)(C)},708:function(e,t,a){"use strict";var n=a(15),r=a(16),l=a(18),o=a(17),s=a(0),c=a.n(s),i=a(12),m=a(343),u=a(344),d=a(74),p=function(e){var t=e.input,a=e.label,n=e.type,r=e.limit,l=e.readOnly,o=e.meta,s=o.touched,i=o.error,m=o.warning;return c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"",className:"text-black"},a),c.a.createElement("input",Object.assign({},t,{type:n,className:"form-control",maxLength:r,readOnly:l})),s&&(i&&c.a.createElement("p",{className:"invalid-feedback"},i)||m&&c.a.createElement("p",null,m)))},h=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(m.a,{label:"Tanggal",name:"tanggal",type:"date",component:p})),c.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},c.a.createElement(m.a,{label:"Nama Toko",name:"namaToko",type:"text",component:p})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement("label",{htmlFor:""},"Nama Toko"),c.a.createElement(d.a,{options:this.state.items,search:!0,placeholder:"Select your country"})))}}]),a}(s.Component);h=Object(u.a)({form:"PembayaranPenjualanLM",enableReinitialize:!0})(h),t.a=Object(i.b)()(h)}}]);
//# sourceMappingURL=63.69000b2c.chunk.js.map