(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[89],{1229:function(e,a,t){"use strict";t.r(a);var n=t(15),i=t(16),r=t(18),l=t(17),o=t(0),c=t.n(o),p=t(7),s=t(49),m=t(60),u=t(12),g=t(343),d=t(344),h=t(347),_=t(33),b=t(222),k=t(5),v=t(19),f=t(20),E=t(23),N=t(236),O=Object(N.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),y=function(e){Object(r.a)(t,e);var a=Object(l.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).updateGr=function(){i.props.change("piutang_gr_akhir",i.props.piutang_gr_akhir)},i.state={},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(_.k)())}},{key:"updateTitipGr",value:function(){this.props.change("titip_gr_akhir",this.props.titip_gr_akhir)}},{key:"updateTitipRp",value:function(){this.props.change("titip_rp_akhir",this.props.titip_gr_akhir)}},{key:"updateRp",value:function(){this.props.change("piutang_rp_akhir",this.props.piutang_rp_akhir)}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(g.a,{name:"kode_customer",component:v.b,options:this.props.customer.map((function(e){return{value:e.kode_customer,name:e.nama_customer}})),type:"text",label:"Nama Toko",placeholder:"Masukan Nama Toko",disabled:!0})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(g.a,{name:"kode_customer_tujuan",component:v.b,options:this.props.customer.map((function(e){return{value:e.kode_customer,name:e.nama_customer}})),type:"text",label:"Nama Toko Tujuan ",placeholder:"Masukan Nama Toko Tujuan"})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr",component:v.a,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp",component:v.a,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr",component:v.a,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp",component:v.a,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr_ambil",component:v.a,type:"number",label:"Ambil Piutang GR",placeholder:"Masukan Piutang GR",onChange:this.updateGr()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_rp_ambil",component:v.a,type:"number",label:"Ambil Piutang RP",placeholder:"Masukan Piutang RP",onChange:this.updateRp()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr_ambil",component:v.a,type:"number",label:"Ambil Titip GR",placeholder:"Masukan Titip GR",onChange:this.updateTitipGr()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_rp_ambil",component:v.a,type:"number",label:"Ambil Titip RP",placeholder:"Masukan Titip RP",onChange:this.updateTitipRp()})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-11"},c.a.createElement("hr",null)),c.a.createElement("div",{className:"col-lg-1"},c.a.createElement("i",{className:"fa fa-minus"})))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr_akhir",component:v.a,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp_akhir",component:v.a,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr_akhir",component:v.a,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp_akhir",component:v.a,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},O)))),c.a.createElement("div",{className:"col-lg-12 col-md-12 mt-2"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.onSend},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",c.a.createElement("i",{class:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))}}]),t}(o.Component);y=Object(d.a)({form:"TransferBalance",enableReinitialize:!0})(y);var j=Object(h.a)("TransferBalance"),T=Object(u.b)((function(e){var a=j(e,"piutang_gr","piutang_rp","titip_gr","titip_rp","piutang_gr_ambil","piutang_rp_ambil","titip_gr_ambil","titip_rp_ambil"),t=a.piutang_gr,n=a.piutang_rp,i=a.titip_gr,r=a.titip_rp,l=a.piutang_gr_ambil,o=a.piutang_rp_ambil,c=a.titip_gr_ambil,p=a.titip_rp_ambil;return{customer:e.provinsi.customer,titip_rp_akhir:parseFloat(r)-parseFloat(p||0),titip_gr_akhir:parseFloat(i)-parseFloat(c||0),piutang_rp_akhir:parseFloat(n)-parseFloat(o||0),piutang_gr_akhir:parseFloat(t)-parseFloat(l||0),initialValues:{piutang_gr:e.provinsi.listPiutangCustomer.piutang_gr,piutang_rp:e.provinsi.listPiutangCustomer.piutang_rp,titip_gr:e.provinsi.listPiutangCustomer.titip_gr,titip_rp:e.provinsi.listPiutangCustomer.titip_rp,kode_customer:e.provinsi.listPiutangCustomer.kode_customer,piutang_gr_ambil:0,piutang_rp_ambil:0,titip_gr_ambil:0,titip_rp_ambil:0}}}))(y),P=t(103),R=t(24),x=t(55),C=t(6),F=Object(N.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),G=function(e){Object(r.a)(t,e);var a=Object(l.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).inputChange=function(e){return function(a){i.setState(Object(m.a)({},e,a.target.value))}},i.state={columns:[{dataField:"tanggal",text:"Tanggal"},{dataField:"kode_customer",text:"Kode Customer"},{dataField:"piutang_gr",text:"Piutang GR",align:"right",headerAlign:"right"},{dataField:"piutang_rp",text:"Piutang RP",align:"right",headerAlign:"right"},{dataField:"titip_gr",text:"Titip GR",align:"right",headerAlign:"right"},{dataField:"titip_rp",text:"Titip RP",align:"right",headerAlign:"right"}],searchText:"",listCustomer:[]},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(_.k)()),this.props.dispatch(Object(x.b)())}},{key:"onChange",value:function(){this.props.change("cashNetto",this.props.cashNetto),this.props.change("transferNetto",this.props.transferNetto)}},{key:"onSubmitToko",value:function(e){var a=this,t=e.split("|");this.props.change("kodeToko",t[0]),this.props.change("kodeCustomer",t[1]),this.props.dispatch(Object(b.c)(t[0],this.props.tanggal)),this.props.dispatch(Object(f.t)()),Object(k.b)("trx-transfer-balance/get-piutang-titipan/".concat(t[0],"&").concat(this.props.tanggal)).then((function(e){a.props.dispatch(Object(f.k)()),a.props.change("piutang_gr",e.data.piutang_gr),a.props.change("piutang_rp",e.data.piutang_rp),a.props.change("titip_gr",e.data.titip_gr),a.props.change("titip_rp",e.data.titip_rp)})).catch((function(e){return Object(E.c)("Gagal Ambil Data , Detial : ".concat(e)).then((function(){return a.props.dispatch(Object(f.k)())}))}))}},{key:"handleSubmit",value:function(e){var a=this;if(void 0===e.kode_customer_tujuan)return Object(E.e)("Mohon Isi Customer Tujuan"),!1;var t={no_transfer:this.props.noFaktur,tanggal:this.props.tanggal||Object(C.r)(),kode_customer_from:e.kode_customer,kode_customer_to:e.kode_customer_tujuan,total_jml_gr:e.piutang_gr_ambil,total_jml_rp:e.piutang_rp_ambil,total_titip_gr:e.titip_gr_ambil,total_titip_rp:e.titip_rp_ambil};Object(k.d)("trx-transfer-balance/simpan",t).then((function(){return Object(E.b)("Transfer Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return a.props.dispatch(Object(R.g)())})).then((function(){return a.props.dispatch(Object(x.b)())})).then((function(){return window.location.reload()})).catch((function(e){return Object(E.c)("Gagal Transfer, Detail : ".concat(e))}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(g.a,{name:"tanggal",label:"Tanggal",type:"date",component:v.a})),c.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},c.a.createElement(g.a,{name:"kodeToko",component:v.a,type:"text",label:"Nama Toko"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(g.a,{name:"kode_customer",component:v.b,options:this.props.customer.map((function(e){return{value:e.kode_customer+"|"+e.nama_customer,name:e.nama_toko}})),onChange:function(a){return e.onSubmitToko(a)},type:"text",label:"Nama Toko",placeholder:"Masukan Nama Toko"})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(g.a,{name:"kodeCustomer",component:v.a,type:"text",label:"Nama Customer",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr",component:v.a,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp",component:v.a,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},F))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr",component:v.a,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp",component:v.a,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},F))),c.a.createElement("div",{className:"col-lg-12 col-md-12 mt-2"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:this.props.onSend,onClick:function(){return e.props.dispatch(Object(R.j)())}},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Transfer Balance"))),c.a.createElement(P.default,{content:c.a.createElement(T,{onSubmit:function(a){return e.handleSubmit(a)}}),title:"Transfer Balance"}))}}]),t}(o.Component);G=Object(d.a)({form:"FormTransferBalance",enableReinitialize:!0})(G);var M=Object(h.a)("FormTransferBalance"),S=Object(u.b)((function(e){var a=M(e,"harga","cash","transfer","tanggal"),t=a.harga,n=a.cash,i=a.transfer,r=a.tanggal;return{cashNetto:(parseFloat(n)/parseFloat(t)).toFixed(3),transferNetto:(parseFloat(i)/parseFloat(t)).toFixed(3),customer:e.provinsi.customer,piutang_gr:e.provinsi.listPiutangCustomer.piutang_gr,piutang_rp:e.provinsi.listPiutangCustomer.piutang_rp,titip_gr:e.provinsi.listPiutangCustomer.titip_gr,titip_rp:e.provinsi.listPiutangCustomer.titip_rp,tanggal:r,onSend:e.provinsi.onSend,noFaktur:e.provinsi.noFaktur,initialValues:{tanggal:Object(C.r)()}}}))(G),A=function(e){Object(r.a)(t,e);var a=Object(l.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).state={},i}return Object(i.a)(t,[{key:"handlSubmit",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"col-lg-12 col-d-12"},c.a.createElement("ol",{className:"breadcrumb mb-2"},c.a.createElement(p.b,{to:"/KlasifikasiCustomer"},c.a.createElement("button",{type:"button",className:"btn btn-secondary"},c.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," ","Back"))),c.a.createElement("div",{className:"card"},c.a.createElement(s.default,{title:"Transfer Balance Customer"}),c.a.createElement("div",{className:"card-body"},c.a.createElement(S,{onSubmit:function(a){return e.handlSubmit(a)}})))))}}]),t}(o.Component);a.default=A}}]);
//# sourceMappingURL=89.afee9040.chunk.js.map