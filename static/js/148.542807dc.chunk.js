(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[148],{1165:function(e,t,a){"use strict";a.r(t);var n=a(60),r=a(15),o=a(16),i=a(18),s=a(17),l=a(0),p=a.n(l),c=a(12),u=a(62),m=a(102),d=a.n(m),h=a(55),b=a(100),k=a.n(b),g=a(61),f=a.n(g),O=a(101),v=a.n(O),T=a(11),S=a(13),j=a.n(S),P=a(80),L=a(23),M=a(141),E=a(20),F=a(97),B=a(49),D=a(37),C=a.n(D),N=a(24),_=Object(l.lazy)((function(){return a.e(13).then(a.bind(null,804))})),G=Object(l.lazy)((function(){return a.e(12).then(a.bind(null,805))})),y=Object(l.lazy)((function(){return Promise.resolve().then(a.bind(null,103))})),A=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"http://103.119.55.28:7002/api/v1/",REACT_APP_TYPE:"demo"}).REACT_APP_BACKEND_URL_NON_MASTER,I=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;Object(r.a)(this,a),(o=t.call(this,e)).inputChange=function(e){return function(t){o.setState(Object(n.a)({},e,t.target.value)),localStorage.setItem([e],t.target.value)}};var i=new Date,s="".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate());return o.state={listSupplier:[],columns:[{dataField:"kodeJenis",text:"Kode Model"},{dataField:"kadarCetak",text:"Cap Kode"},{dataField:"p",text:"P"},{dataField:"k",text:"K"},{dataField:"pkg",text:"Bungkus(Gr)"},{dataField:"bruto",text:"Berat(Gr)"},{dataField:"kadarTransaksi",text:"Kode Tukar"},{dataField:"netto",text:"Murni(Gr)",footerClasses:"sum-netto-terima-supplier"}],tanggal_invoice:s,tanggal_barang:s,noBon:"",totalNW:0,totalBruto:0,totalPkg:0,totalGross:0,totalOngkir:0,kodeSupplier:"",namaSupplier:"",keterangan:"",startingDate:s,tampungBarang:[],tampungBarangLocal:[],urutan:localStorage.getItem("urutan")||0},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(u.f)()),this.props.dispatch(Object(h.b)()),this.props.dispatch(Object(P.i)()),this.props.dispatch(Object(E.o)("TransaksiPembelianLM")),this.props.dispatch(Object(E.l)("TransaksiPembelianLM")),this.props.dispatch(Object(E.q)("TransaksiPembelianLM")),this.props.dispatch(Object(E.m)("TransaksiPembelianLM")),this.props.dispatch(Object(E.s)("TransaksiPembelianLM")),this.props.dispatch(Object(h.b)()),this.props.dispatch(Object(F.i)())}},{key:"handleSubmit",value:function(e){var t=this,a=(e.kodeJenis?e.kodeJenis:"DEFALT | DEFAULT").split("|"),n={noFaktur:this.props.noFaktur,nettoDiscGlobalExt:parseFloat(e.totalHargaLM),gross:parseFloat(e.gross),netto:parseFloat(e.netto),qty:0,tipeTransaksi:"JUAL LM",k:parseFloat(e.k),rp:parseFloat(e.harga),kadarCetak:a[2],keterangan:e.keterangan,discGlobalPr:0,kodeKategori:"-",kadarTransaksi:parseFloat(e.kadarTransaksi),kodeJenis:a[0],noBarcode:"-",p:parseFloat(e.p),discGlobalGr:0,pkg:parseFloat(e.pkg),bruto:parseFloat(e.bruto),nettoDiscGlobal:0},r=JSON.parse(localStorage.getItem("TransaksiPembelianLM"))||[];r.push(n),localStorage.setItem("TransaksiPembelianLM",JSON.stringify(r)),this.props.dispatch(Object(P.i)()),this.props.dispatch(Object(N.g)()),j.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return t.props.dispatch(Object(T.b)("TerimaSupplier"))})).then((function(){return t.props.dispatch(Object(P.i)())})).then((function(){return t.props.dispatch(Object(E.o)("TransaksiPembelianLM"))})).then((function(){return t.props.dispatch(Object(E.l)("TransaksiPembelianLM"))})).then((function(){return t.props.dispatch(Object(E.q)("TransaksiPembelianLM"))})).then((function(){return t.props.dispatch(Object(E.m)("TransaksiPembelianLM"))})).then((function(){return t.props.dispatch(Object(E.s)("TransaksiPembelianLM"))})).then((function(){return t.props.dispatch(Object(F.i)())}))}},{key:"kirimData",value:function(e){var t=this;if(void 0===e.customer)return Object(L.e)("Mohon pilih Supplier"),!1;if(void 0===e.keterangan)return Object(L.e)("Mohon isi Keterangan"),!1;if(void 0===e.noBon)return Object(L.e)("Mohon Isi nomor Bon"),!1;if(null===localStorage.getItem("TransaksiPembelianLM"))return Object(L.e)("Barang masih kosong, mohon tambahkan barang"),!1;var a={noFaktur:this.props.noFaktur.toUpperCase(),tanggal:e.tanggal_invoice,noBon:void 0===e.noBon.toUpperCase()?"-":e.noBon.toUpperCase(),kodeCustomer:void 0===e.kodeCustomer?"-":e.kodeCustomer.toUpperCase(),namaToko:void 0===e.namaToko?"-":e.namaToko.toUpperCase(),tanggalBarang:e.tanggal_barang,tipeTransaksi:"BELI LM",barangDetails:JSON.parse(localStorage.getItem("TransaksiPembelianLM")),footerDocument:{inputBy:this.props.username}};console.log(JSON.stringify(a)),this.props.dispatch(Object(E.t)());var n=[];JSON.parse(localStorage.getItem("TransaksiPembelianLM")).forEach((function(e,t){var a=[++t,e.kodeJenis,e.kadarCetak,e.p,e.k,e.pkg,e.bruto,e.kadarTransaksi,e.netto,parseFloat(e.rp).toLocaleString("id-ID")];n.push(a)})),console.log(JSON.stringify(n));var r=["No","Kode Model","Cap Kode","P","K","Bungkus(Gr)","Berat(Gr)","Harga(Gr)","Murni(Gr)","Ongkos(Rp)"];d.a.post(A+"cst/dc/lm",a).then((function(a){return j.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return t.props.dispatch(Object(E.k)())})).then((function(){return t.props.dispatch(Object(T.b)("FormHeadPenjualanLM"))})).then((function(){return localStorage.removeItem("TransaksiPembelianLM")})).then((function(){return localStorage.removeItem("FakturRekapBon")})).then((function(){return t.props.dispatch(Object(P.i)())})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return t.props.dispatch(Object(E.o)("TransaksiPembelianLM"))})).then((function(){return Object(M.a)("no Terima",t.props.noFaktur,"Tanggal",t.state.tanggal_invoice,"No Bon",e.noBon.toUpperCase(),"Supplier",t.state.kodeSupplier,"ADMIN",t.state.tanggal,"",r,"Terima Barang Supplier",n)}))})).catch((function(e){return j.a.fire({position:"top-end",icon:"error",text:"Data Gagal Ditambahkan",showConfirmButton:!1,timer:1500}).then((function(){return t.props.dispatch(Object(E.k)())}))}))}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"container-fluid",style:{color:"black"}},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-12"},p.a.createElement("div",{className:"card"},p.a.createElement(B.default,{title:"Transaksi Pembelian LM"}),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{className:"col-lg-12 col-md-12"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-lg-9 mb-3"}),p.a.createElement("div",{className:"col-lg-3"}),p.a.createElement("br",null),p.a.createElement(_,{onSubmit:function(t){return e.kirimData(t)},onSend:this.props.onSend})),this.props.listDataTablePembelianLM?p.a.createElement(f.a,{keyField:"id",data:this.props.listDataTablePembelianLM,columns:this.state.columns,search:!0},(function(e){return p.a.createElement("div",{className:"form-group mt-2"},p.a.createElement(k.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:v()()})))})):null))))),p.a.createElement(y,{content:p.a.createElement(l.Suspense,{fallback:p.a.createElement(C.a,{width:"100%",height:50,count:5})},p.a.createElement(G,{from:"terima",onSubmit:function(t){return e.handleSubmit(t)},noFaktur:this.props.noFaktur})),title:"Tambah Data LM"}))}}]),a}(l.Component);t.default=Object(c.b)((function(e){return{supplierList:e.provinsi.supplier,tampungBarang:e.provinsi.terimaSupplierTemp,noFaktur:e.provinsi.noFaktur,username:e.provinsi.username,alert:e.provinsi.alert,error:e.provinsi.error,totalNW:e.provinsi.totalNW,listDataTablePembelianLM:e.provinsi.listDataTablePembelianLM,sumNetto:e.perhitungan.sumNetto,sumBruto:e.perhitungan.sumBruto,sumPkg:e.perhitungan.sumPkg,sumRp:e.perhitungan.sumRp,sumGross:e.perhitungan.sumGross,onSend:e.provinsi.onSend}}),null)(I)}}]);
//# sourceMappingURL=148.542807dc.chunk.js.map