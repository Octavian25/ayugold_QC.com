{"version":3,"sources":["Laporan/Component/FormReparasi.jsx","Laporan/Component/LaporanPrintReparasi.jsx","Laporan/laporanReparasi.jsx"],"names":["FormReparasi","props","state","type_laporan","this","dispatch","getrekeningList","getcustomerList","from","onSubmit","handleSubmit","className","Field","label","name","type","component","renderField","renderFieldSelect","options","listCustomer","map","data","value","kode_customer","nama_toko","disabled","onSend","aria-hidden","Component","reduxForm","form","enableReinitialize","connect","listBank","provinsi","rekening","customer","initialValues","tanggal","getToday","LaporanPrintReparasi","jenis","doc","jsPDF","tableRows","finalY","setFontSize","text","addImage","logo_ayu_base64","forEach","item","index","tableColumn","content","no_bon","colSpan","styles","halign","total_qty","total_bruto","total_ongkos","detail_barang","detail","rows","kode_kategori","qty","formatGram","bruto","formatRp","ongkos_rp","parseFloat","parseInt","push","foot","autoTable","head","body","startY","theme","rowPageBreak","margin","top","bodyStyles","lineColor","fontSize","lineWidth","headStyles","fillColor","footStyles","autoTableEndPosY","getUserID","pages","internal","getNumberOfPages","pageWidth","pageSize","width","pageHeight","height","j","horizontalPos","verticalPos","setPage","align","autoPrint","setProperties","title","string","output","x","window","open","document","write","laporanReparasi","progressSend","status","AxiosMasterGet","then","res","finishSend","checkLaporan","localStorage","getItem","catch","err","gagal","href","data-toggle","aria-expanded","id","handleProses"],"mappings":"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","file":"static/js/98.7b19cab1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { getcustomerList } from \"../../actions/customerAction\";\r\nimport { getrekeningList } from \"../../actions/rekeningAction\";\r\nimport { getToday } from \"../../GlobalComponent/function\";\r\nimport { renderField, renderFieldSelect } from \"../../renderField\";\r\n\r\nclass FormReparasi extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      type_laporan: \"SIMPLE\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getrekeningList());\r\n    this.props.dispatch(getcustomerList());\r\n  }\r\n  render() {\r\n    switch (this.props.from) {\r\n      case \"PROSES\":\r\n        return (\r\n          <form onSubmit={this.props.handleSubmit}>\r\n            <div className=\"col-lg-12\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-4\">\r\n                  <Field\r\n                    label=\"Tanggal\"\r\n                    name=\"tanggal\"\r\n                    type=\"date\"\r\n                    component={renderField}\r\n                  />\r\n                </div>\r\n                <div className=\"col-lg-4\">\r\n                  <Field\r\n                    className=\"form-control\"\r\n                    name=\"nama_toko\"\r\n                    label=\"Nama Toko\"\r\n                    component={renderFieldSelect}\r\n                    options={this.props.listCustomer.map((data) => {\r\n                      let hasil = {\r\n                        value: data.kode_customer,\r\n                        name: data.nama_toko,\r\n                      };\r\n                      return hasil;\r\n                    })}\r\n                  ></Field>\r\n                </div>\r\n                <div className=\"col-lg-4\">\r\n                  <Field\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    label=\"Status Reparasi\"\r\n                    component={renderFieldSelect}\r\n                    options={[\r\n                      {\r\n                        value: \"PROSES\",\r\n                        name: \"PROSES\",\r\n                      },\r\n                      {\r\n                        value: \"SELESAI\",\r\n                        name: \"SELESAI\",\r\n                      },\r\n                      {\r\n                        value: \"SERAH\",\r\n                        name: \"SERAH\",\r\n                      },\r\n                    ]}\r\n                  ></Field>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-lg-12\">\r\n              <div className=\"text-right\">\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  type=\"submit\"\r\n                  disabled={this.props.onSend}\r\n                >\r\n                  {this.props.onSend ? (\r\n                    <span\r\n                      className=\"spinner-border spinner-border-sm mr-3\"\r\n                      aria-hidden=\"true\"\r\n                    ></span>\r\n                  ) : (\r\n                    <i className=\"fa fa-print mr-2\"></i>\r\n                  )}\r\n                  Print\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        );\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nFormReparasi = reduxForm({\r\n  form: \"FormReparasi\",\r\n  enableReinitialize: true,\r\n})(FormReparasi);\r\nexport default connect((state) => {\r\n  return {\r\n    listBank: state.provinsi.rekening,\r\n    onSend: state.provinsi.onSend,\r\n    listCustomer: state.provinsi.customer,\r\n    initialValues: {\r\n      tanggal: getToday(),\r\n    },\r\n  };\r\n})(FormReparasi);\r\n","import jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nimport { formatGram, formatRp, getUserID, logo_ayu_base64 } from \"../../helper\";\r\n// Date Fns is used to format the dates we receive\r\n\r\n// define a generatePDF function that accepts a tickets argument\r\nconst LaporanPrintReparasi = (\r\n  username = \"\",\r\n  tanggal = \"\",\r\n  validby = \"\",\r\n  data,\r\n  jenis = \"\"\r\n) => {\r\n  // initialize jsPDF\r\n  const doc = new jsPDF('portrait');\r\n  //   let data = JSON.parse(localStorage.getItem(\"tt_pengeluaran_barang\")) || [];\r\n  let tableRows = [];\r\n\r\n  let finalY = 45;\r\n  doc.setFontSize(15);\r\n  doc.text(\"LAPORAN REPARASI \" + jenis, 14, 33);\r\n  doc.addImage(logo_ayu_base64, \"PNG\", 14, 10, 35, 12);\r\n\r\n  doc.setFontSize(10);\r\n  data.forEach((item, index) => {\r\n    let tableColumn = [\r\n      [\r\n        {\r\n          content: \"Nomor Bon : \" + item.no_bon,\r\n          colSpan: 5,\r\n        },\r\n      ],\r\n      [\r\n        {\r\n          content: \"Tanggal Transaksi : \" + item.tanggal,\r\n          colSpan: 5,\r\n        },\r\n      ],\r\n      [\r\n        {\r\n          content: `KODE KATEGORI`,\r\n        },\r\n        {\r\n          content: `QTY`,\r\n          styles: { halign: \"right\" },\r\n        },\r\n        {\r\n          content: `BRUTO`,\r\n          styles: { halign: \"right\" },\r\n        },\r\n        {\r\n          content: `ONGKOS REPARASI`,\r\n          styles: { halign: \"right\" },\r\n        },\r\n        {\r\n          content: `TOTAL ONGKOS REPARASI`,\r\n          styles: { halign: \"right\" },\r\n        },\r\n      ],\r\n    ];\r\n    let total_qty = 0;\r\n    let total_bruto = 0;\r\n    let total_ongkos = 0;\r\n    item.detail_barang.forEach((detail) => {\r\n      let rows = [\r\n        detail.kode_kategori,\r\n        { content: detail.qty, styles: { halign: \"right\" } },\r\n        { content: formatGram(detail.bruto), styles: { halign: \"right\" } },\r\n        { content: formatRp(detail.ongkos_rp), styles: { halign: \"right\" } },\r\n        {\r\n          content: formatRp(\r\n            parseFloat(detail.ongkos_rp) * parseInt(detail.qty)\r\n          ),\r\n          styles: { halign: \"right\" },\r\n        },\r\n      ];\r\n      tableRows.push(rows);\r\n      total_qty = parseInt(total_qty) + parseInt(detail.qty);\r\n      total_bruto = parseFloat(total_bruto) + parseFloat(detail.bruto);\r\n      total_ongkos =\r\n        parseInt(total_ongkos) +\r\n        parseFloat(detail.ongkos_rp) * parseInt(detail.qty);\r\n    });\r\n    let foot = [\r\n     [ \"Grand Total\",\r\n      { content: total_qty, styles: { halign: \"right\" } },\r\n      { content: formatGram(total_bruto), styles: { halign: \"right\" } },\r\n      { content: \"\", styles: { halign: \"right\" } },\r\n      { content: formatRp(total_ongkos), styles: { halign: \"right\" } },]\r\n    ];\r\n    doc.autoTable({\r\n      head: tableColumn,\r\n      body: tableRows,\r\n      foot: foot,\r\n      startY: finalY,\r\n      theme: \"plain\",\r\n      rowPageBreak: \"avoid\",\r\n\r\n      margin: { top: 20 },\r\n      bodyStyles: { lineColor: \"#969696\",fontSize : 8, lineWidth: 0.05},\r\n      headStyles: {\r\n        lineColor: \"#969696\",\r\n        lineWidth: 0.05,\r\n        fontSize : 8,\r\n        fillColor: \"#E8E8E8\",\r\n      },\r\n      footStyles: {\r\n        lineColor: \"#969696\",\r\n        lineWidth: 0.05,\r\n        fillColor: \"#E8E8E8\",fontSize : 8,\r\n      },\r\n    });\r\n    finalY = doc.autoTableEndPosY() + 10;\r\n    tableRows = [];\r\n  });\r\n\r\n  tableRows = [];\r\n\r\n  doc.text(`Cetak By\t: ${getUserID()}`, 14, finalY + 10);\r\n\r\n  doc.text(`Cetak\tDate : ${tanggal}`, 14, finalY + 16);\r\n\r\n  const pages = doc.internal.getNumberOfPages();\r\n  const pageWidth = doc.internal.pageSize.width; //Optional\r\n  const pageHeight = doc.internal.pageSize.height; //Optional\r\n  doc.setFontSize(10); //Optional\r\n  for (let j = 1; j < pages + 1; j++) {\r\n    let horizontalPos = pageWidth / 2; //Can be fixed number\r\n    let verticalPos = pageHeight - 10; //Can be fixed number\r\n    doc.setPage(j);\r\n    doc.text(`${j} of ${pages}`, horizontalPos, verticalPos, {\r\n      align: \"center\",\r\n    });\r\n  }\r\n  doc.autoPrint();\r\n  doc.setProperties({\r\n    title: \"LAPORAN REPARASI \" + jenis,\r\n  });\r\n  // doc.save(`PenerimaanSUpplier.pdf`);\r\n  var string = doc.output(\"datauristring\");\r\n  var x = window.open();\r\n  x.document.open();\r\n  x.document.write(\r\n    \"<html><head><title>LAPORAN REPARASI</title></head><body style='margin:0 !important'><embed width='100%' height='100%'  src=\" +\r\n      string +\r\n      \"></embed></body></html>\"\r\n  );\r\n  // setInterval(() => {\r\n  //   x.close();\r\n  // }, 1000);\r\n};\r\n\r\nexport default LaporanPrintReparasi;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { finishSend, progressSend } from \"../actions/LogicAction\";\r\nimport { gagal } from \"../Alert\";\r\nimport { AxiosMasterGet } from \"../Axios\";\r\nimport { getToday } from \"../getDate\";\r\nimport { checkLaporan } from \"../helper\";\r\nimport FormReparasi from \"./Component/FormReparasi\";\r\nimport LaporanPrintReparasi from \"./Component/LaporanPrintReparasi\";\r\n\r\nclass laporanReparasi extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  handleProses(data) {\r\n    this.props.dispatch(progressSend());\r\n    let status = data.status;\r\n    let customer = data.nama_toko;\r\n    let tanggal = data.tanggal;\r\n      AxiosMasterGet(`report/reparasi/${tanggal}&${customer}&${status}`)\r\n        .then((res) => {\r\n          this.props.dispatch(finishSend());\r\n          if (checkLaporan(res.data)) {\r\n            LaporanPrintReparasi(\r\n              localStorage.getItem(\"username\"),\r\n              getToday(),\r\n              localStorage.getItem(\"username\"),\r\n              res.data,\r\n              status\r\n            );\r\n          }\r\n        })\r\n        .catch((err) =>\r\n          gagal(\"Gagal Mengambil data, Mohon periksa koneksi anda\").then(() =>\r\n            this.props.dispatch(finishSend())\r\n          )\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"col-lg-12\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12 col-md-12\">\r\n                  <ul className=\"nav nav-tabs nav-justified nav-bordered mb-3\">\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        href=\"#proses-tab\"\r\n                        data-toggle=\"tab\"\r\n                        aria-expanded=\"false\"\r\n                        className=\"nav-link active\"\r\n                      >\r\n                        <i className=\"mdi mdi-home-variant d-lg-none d-block mr-1\" />\r\n                        <span className=\"d-none d-lg-block\">Laporan Reparasi</span>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                  <div className=\"tab-content\">\r\n                    <div className=\"tab-pane show active\" id=\"proses-tab\">\r\n                      <FormReparasi\r\n                        from=\"PROSES\"\r\n                        onSubmit={(data) => this.handleProses(data)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(laporanReparasi);\r\n"],"sourceRoot":""}