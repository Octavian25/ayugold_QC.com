{"version":3,"sources":["Stocking/KirimMasak.jsx"],"names":["FormKirimMasak","lazy","FormKirimMasakBarang","ModalMasterData","server","process","REACT_APP_BACKEND_URL_NON_MASTER","KirimMasak","props","inputChange","input","e","setState","target","value","state","products","response","tanggal","tukang","listTukang","columns","dataField","text","footer","align","headerAlign","columnData","reduce","acc","item","parseFloat","toFixed","csvExport","formatter","rowContent","row","rowIndex","className","data-tip","data-for","onClick","deleteIndex","dispatch","getListKirimMasak","id","type","effect","this","getUUID","getBruto","getNetto","getQty","panggilTukang","Axios","get","serverMaster","then","res","data","catch","err","Swal","fire","position","icon","showConfirmButton","timer","console","log","bruto","undefined","kodeBarang","warning","split","nama","noFaktur","toUpperCase","netto","rp","kadarTransaksi","nettoDiscGlobalExt","keterangan","pkg","gross","p","kodeKategori","qty","k","kadarCetak","kadar","noBarcode","kodeJenis","discGlobalGr","nettoDiscGlobal","discGlobalPr","array","JSON","parse","localStorage","getItem","push","setItem","stringify","reset","simpan","noBon","kodeTukang","namaTukang","kodeLokasi","barangDetails","footerItem","totalNetto","sumNetto","totalBruto","sumBruto","totalNettoExt","totalP","totalGross","totalQty","sumQty","totalpkg","totalRp","totalK","footerDocument","inputBy","username","progressSend","tableRows","forEach","ticket","i","ticketData","columTable","post","finishSend","removeItem","PrintNota","tipeData","kodeExt","statusAktif","namaLokasi","getListTukang","showModal","modalKirimMasak","style","color","title","htmlFor","name","onChange","key","map","list","marginLeft","tukangModal","disabled","onSend","kirimMasak","aria-hidden","kirimModal","listBarang","keyField","bordered","headerClasses","noDataIndication","content","fallback","width","height","count","onSubmit","handleSubmit","tambahTukang","Component","connect","provinsi","perhitungan"],"mappings":"mVA0BMA,EAAiBC,gBAAK,kBAAM,mCAC5BC,EAAuBD,gBAAK,kBAChC,mCAEIE,EAAkBF,gBAAK,kBAC3B,4CAaIG,EAASC,iLAAYC,iCAErBC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA+GRC,YAAc,SAACC,GAAD,OAAW,SAACC,GACxB,EAAKC,SAAL,eACGF,EAAQC,EAAEE,OAAOC,UAhHpB,EAAKC,MAAQ,CACXC,SAAU,GACVC,SAAU,GACVC,QAAS,GACTC,OAAQ,kBACRC,WAAY,GACZC,QAAS,CACP,CACEC,UAAW,YACXC,KAAM,aACNC,OAAQ,IAEV,CACEF,UAAW,iBACXC,KAAM,WACNC,OAAQ,GACRC,MAAO,QACPC,YAAa,SAEf,CACEJ,UAAW,QACXC,KAAM,YACNE,MAAO,QACPC,YAAa,QACbF,OAAQ,SAACG,GAAD,OACNA,EACGC,QAAO,SAACC,EAAKC,GAAN,OAAeC,WAAWF,GAAOE,WAAWD,KAAO,GAC1DE,QAAQ,KAEf,CACEV,UAAW,QACXC,KAAM,YACNC,OAAQ,SAACG,GAAD,OACNA,EACGC,QAAO,SAACC,EAAKC,GAAN,OAAeC,WAAWF,GAAOE,WAAWD,KAAO,GAC1DE,QAAQ,KAEf,CACEV,UAAW,OACXC,KAAM,OACNU,WAAW,EACXC,UAAW,SAACC,EAAYC,EAAKC,GAC3B,OACE,yBAAKC,UAAU,eACb,4BACEC,YAAA,EACAC,WAAS,QACTF,UAAU,sBACVG,QAAS,kBACPC,YACE,aACAL,EACA,EAAK7B,MAAMmC,SACXC,iBAIJ,kBAAC,IAAD,CAAcC,GAAG,QAAQC,KAAK,OAAOC,OAAO,SAC1C,wCAEF,uBAAGT,UAAU,sBAEf,kCAhEK,E,qDAsFnB,WACEU,KAAKxC,MAAMmC,SAASC,eACpBI,KAAKxC,MAAMmC,SAASM,eACpBD,KAAKxC,MAAMmC,SAASO,YAAS,eAC7BF,KAAKxC,MAAMmC,SAASQ,YAAS,eAC7BH,KAAKxC,MAAMmC,SAASS,YAAO,eAC3BJ,KAAKK,kB,2BAGP,WAAiB,IAAD,OACdC,IAAMC,IAAIC,iEACPC,MAAK,SAACC,GAAD,OACJ,EAAK9C,SAAS,CACZQ,WAAYsC,EAAIC,UAGnBC,OAAM,SAACC,GAAD,OACLC,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,QACN1C,KAAM,+CACN2C,mBAAmB,EACnBC,MAAO,OACNV,MAAK,kBAAMW,QAAQC,IAAIR,W,0BAQhC,SAAaF,GAAO,IAAD,OAEjB,GADAS,QAAQC,IAAIV,EAAKW,YACOC,IAApBZ,EAAKa,WAEP,OADAC,YAAQ,2BACD,EACF,QAAmBF,IAAfZ,EAAKW,MAEd,OADAG,YAAQ,oBACD,EAET,IAGIC,GAHOf,EAAKa,WACZb,EAAKa,WACL,mCACaE,MAAM,KACnBC,EAAO,CACTC,SAAU5B,KAAKxC,MAAMoE,SAASC,cAC9BC,MAAO/C,WAAW4B,EAAKmB,OACvBR,MAAOvC,WAAW4B,EAAKW,OACvBS,GAAI,EACJC,eAAgBjD,WAAW4B,EAAKqB,gBAChCC,mBAAoB,EACpBC,WAAYR,EAAM,GAClBS,IAAK,EACLC,MAAO,EACPC,EAAG,EACHC,aAAc,IACdC,IAAK,EACLC,EAAG,EACHC,WAAY1D,WAAW4B,EAAK+B,OAC5BC,UAAW,IACXC,UAAWlB,EAAM,GAAGG,cACpBgB,aAAc,EACdC,gBAAiB,EACjBC,aAAc,GAEZC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,gBAAkB,GAC9DJ,EAAMK,KAAK1B,GACXwB,aAAaG,QAAQ,aAAcL,KAAKM,UAAUP,IAClDlC,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,UACN1C,KAAM,6BACN2C,mBAAmB,EACnBC,MAAO,OAENV,MAAK,kBAAM,EAAKjD,MAAMmC,SAASQ,YAAS,kBACxCM,MAAK,kBAAM,EAAKjD,MAAMmC,SAASO,YAAS,kBACxCO,MAAK,kBAAM,EAAKjD,MAAMmC,SAASS,YAAO,kBACzCJ,KAAKxC,MAAMmC,SAASC,eACpBI,KAAKxC,MAAMmC,SAAS6D,YAAM,2B,wBAG5B,WAAc,IAAD,OACX,GAA0B,oBAAtBxD,KAAKjC,MAAMI,OAEb,OADAsD,YAAQ,0BACD,EACF,GAA2B,KAAvBzB,KAAKjC,MAAMG,QAEpB,OADAuD,YAAQ,sBACD,EACF,GAA2C,OAAvC0B,aAAaC,QAAQ,cAE9B,OADA3B,YAAQ,gDACD,EAET,IACIC,GADO1B,KAAKjC,MAAMI,OAAS6B,KAAKjC,MAAMI,OAAS,mBAClCuD,MAAM,KACnB+B,EAAS,CACX7B,SAAU5B,KAAKxC,MAAMoE,SAASC,cAC9B6B,MAAO1D,KAAKxC,MAAMoE,SAASC,cAC3B3D,QAAS8B,KAAKjC,MAAMG,QAAQ2D,cAC5B8B,WAAYjC,EAAM,GAAGG,cACrB+B,WAAYlC,EAAM,GAAGG,cACrBgC,WAAYnC,EAAM,GAAGG,cACrBiC,cAAeb,KAAKC,MAAMC,aAAaC,QAAQ,eAC/CW,WAAY,CACVC,WAAYhE,KAAKxC,MAAMyG,SACvBC,WAAYlE,KAAKxC,MAAM2G,SACvBC,cAAe,EACfC,OAAQ,EACRC,WAAY,EACZC,SAAUvE,KAAKxC,MAAMgH,OACrBC,SAAU,EACVC,QAAS,EACTC,OAAQ,GAEVC,eAAgB,CACdC,QAAS7E,KAAKxC,MAAMsH,WAGxB1D,QAAQC,IAAI4B,KAAKM,UAAUE,IAC3BzD,KAAKxC,MAAMmC,SAASoF,eAEpB,IAAMC,EAAY,GACN/B,KAAKC,MAAMC,aAAaC,QAAQ,eAEtC6B,SAAQ,SAACC,EAAQC,GACrB,IAAMC,EAAa,CACjBD,IACAD,EAAOtC,UACPsC,EAAO5D,MACP4D,EAAOlD,eACPkD,EAAOpD,OAGTkD,EAAU3B,KAAK+B,MAEjBhE,QAAQC,IAAI4B,KAAKM,UAAUyB,IAC3B,IAAIK,EAAa,CAAC,KAAM,aAAc,QAAS,YAAa,SAE5D/E,IAAMgF,KAAKlI,EAAS,qBAAsBqG,GACvChD,MAAK,kBACJK,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,UACN1C,KAAM,qBACN2C,mBAAmB,EACnBC,MAAO,OAENV,MAAK,kBAAM,EAAKjD,MAAMmC,SAAS4F,kBAC/B9E,MAAK,kBAAM0C,aAAaqC,WAAW,eACnC/E,MAAK,kBACJgF,YACE,UACA,EAAK1H,MAAMG,QAAQ2D,cACnB,cACAH,EAAM,GACN,YACA,EAAKlE,MAAMoE,SAASC,cACpB,GACA,GACA,QACA,EAAK9D,MAAMG,QAAQ2D,cACnB,GACAwD,EACA,oBACAL,MAGHvE,MAAK,kBAAM0C,aAAaqC,WAAW,iBACnC/E,MAAK,kBAAM,EAAKjD,MAAMmC,SAASC,kBAC/Ba,MAAK,kBACJ,EAAK7C,SAAS,CACZM,QAAS,GACTC,OAAQ,QAGXsC,MAAK,kBAAM,EAAKjD,MAAMmC,SAASM,kBAC/BQ,MAAK,kBAAM,EAAKjD,MAAMmC,SAAS6D,YAAM,+BAEzC5C,OAAM,SAACC,GAAD,OACLC,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,QACN1C,KAAM,+CACN2C,mBAAmB,EACnBC,MAAO,OACNV,MAAK,kBAAMW,QAAQC,IAAIR,W,0BAIhC,SAAaF,GAAO,IAAD,OACb8C,EAAS,CACXiC,SAAU,SACV7B,WAAYlD,EAAKkD,WAAWhC,cAC5B8D,QAAShF,EAAKkD,WAAWhC,cACzB+D,YAAa,QACbC,WAAYlF,EAAKkF,WAAWhE,eAE9BvB,IAAMgF,KAAK9E,8CAA0BiD,GAClChD,MAAK,kBACJK,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,UACN1C,KAAM,uBACN2C,mBAAmB,EACnBC,MAAO,OAENV,MAAK,kBAAM,EAAKjD,MAAMmC,SAASmG,kBAC/BrF,MAAK,kBAAM,EAAKJ,sBAEpBO,OAAM,SAACC,GAAD,OACLC,IAAKC,KAAK,CACRC,SAAU,UACVC,KAAM,QACN1C,KAAM,+CACN2C,mBAAmB,EACnBC,MAAO,OAENV,MAAK,kBAAMW,QAAQC,IAAIR,MACvBJ,MAAK,kBAAM,EAAKjD,MAAMmC,SAAS4F,uB,wBAIxC,WACEvF,KAAKxC,MAAMmC,SAASoG,eACpB/F,KAAKpC,SAAS,CACZoI,iBAAiB,M,yBAGrB,WACEhG,KAAKxC,MAAMmC,SAASoG,eACpB/F,KAAKpC,SAAS,CACZoI,iBAAiB,M,oBAGrB,WAAU,IAAD,OACP,OACE,yBAAK1G,UAAU,kBAAkB2G,MAAO,CAAEC,MAAO,UAC/C,yBAAK5G,UAAU,OACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,QACb,kBAAC,UAAD,CAAY6G,MAAM,gBAClB,yBAAK7G,UAAU,aACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,qBACb,2BAAO8G,QAAQ,IAAf,WACA,2BACEC,KAAK,UACLxG,GAAG,UACHC,KAAK,OACLR,UAAU,eACVgH,SAAUtG,KAAKvC,YAAY,WAC3BK,MAAOkC,KAAKjC,MAAMG,WAGtB,yBAAKoB,UAAU,qBACb,2BAAO8G,QAAQ,IAAf,UACA,4BACEC,KAAK,SACLxG,GAAG,SACHP,UAAU,eACVgH,SAAUtG,KAAKvC,YAAY,UAC3BK,MAAOkC,KAAKjC,MAAMI,QAElB,4BAAQL,MAAM,kBAAkByI,IAAI,WAApC,kBAGCvG,KAAKjC,MAAMK,WAAWoI,KAAI,SAACC,GAAD,OACzB,4BACE3I,MAAO2I,EAAK5C,WAAa,IAAM4C,EAAKZ,WACpCU,IAAKE,EAAK5C,YAET4C,EAAKZ,iBAKd,yBACEvG,UAAU,0CACV2G,MAAO,CAAES,YAAa,KAEtB,2BAAON,QAAQ,GAAG9G,UAAU,cAA5B,KAGA,4BACEA,UAAU,+BACVG,QAAS,kBAAM,EAAKkH,gBAFtB,MAOF,yBAAKrH,UAAU,yBAIrB,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,yBAAKA,UAAU,aACb,4BACEsH,SAAU5G,KAAKxC,MAAMqJ,OACrBvH,UAAU,kBACVG,QAAS,kBAAM,EAAKqH,eAEnB9G,KAAKxC,MAAMqJ,OACV,0BACEvH,UAAU,wCACVyH,cAAY,SAEZ,KAVN,SAYE,uBAAGzH,UAAU,8BAInB,yBAAKA,UAAU,YACb,yBAAKA,UAAU,cACb,4BACEA,UAAU,kBACVG,QAAS,kBAAM,EAAKuH,eAFtB,cAKE,uBAAG1H,UAAU,0BAOzB,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,aACZU,KAAKxC,MAAMyJ,WACV,kBAAC,IAAD,CACEC,SAAS,YACTvG,KAAMX,KAAKxC,MAAMyJ,WACjB5I,QAAS2B,KAAKjC,MAAMM,QACpB8I,UAAU,EACVC,cAAc,iBAGhB,kBAAC,IAAD,CACEF,SAAS,YACTvG,KAAM,GACNtC,QAAS2B,KAAKjC,MAAMM,QACpB8I,UAAU,EACVC,cAAc,eACdC,iBAAiB,wBAQ/B,kBAAClK,EAAD,CACEmK,QACE,kBAAC,WAAD,CACEC,SAAU,kBAAC,IAAD,CAAUC,MAAO,OAAQC,OAAQ,GAAIC,MAAO,KAErD1H,KAAKjC,MAAMiI,gBACV,kBAAC9I,EAAD,CACEyK,SAAU,SAAChH,GAAD,OAAU,EAAKiH,aAAajH,MAGxC,kBAAC3D,EAAD,CAAgB2K,SAAU,SAAChH,GAAD,OAAU,EAAKkH,aAAalH,OAI5DwF,MAAM,4B,GAxcS2B,aA+cVC,uBA5dI,SAAChK,GAClB,MAAO,CACLkJ,WAAYlJ,EAAMiK,SAASlB,WAC3BlF,SAAU7D,EAAMiK,SAASpG,SACzBkD,SAAU/G,EAAMiK,SAASlD,SACzBX,SAAUpG,EAAMkK,YAAY9D,SAC5BF,SAAUlG,EAAMkK,YAAYhE,SAC5BO,OAAQzG,EAAMkK,YAAYzD,OAC1BqC,OAAQ9I,EAAMiK,SAASnB,UAodQ,KAApBkB,CAA0BxK","file":"static/js/114.e75c6ccd.chunk.js","sourcesContent":["import React, { Component, lazy, Suspense } from \"react\";\r\n\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\n\r\nimport Swal from \"sweetalert2\";\r\nimport { getListKirimMasak } from \"../actions/kirimMasakAction\";\r\nimport { connect } from \"react-redux\";\r\nimport { getUUID } from \"../actions/fakturAction\";\r\nimport {\r\n  finishSend,\r\n  getBruto,\r\n  getNetto,\r\n  getQty,\r\n  progressSend,\r\n} from \"../actions/LogicAction\";\r\nimport Axios from \"axios\";\r\nimport { getListTukang } from \"../actions/listTukang\";\r\nimport PrintNota from \"./Component/PrintNota\";\r\nimport { warning } from \"../Alert\";\r\nimport { reset } from \"redux-form\";\r\nimport { deleteIndex } from \"../deleteLocalStorage\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { showModal } from \"../actions/ModalAction\";\r\nimport HeaderCard from \"../HeaderCard\";\r\n\r\nconst FormKirimMasak = lazy(() => import(\"./Component/FormKirimMasak\"));\r\nconst FormKirimMasakBarang = lazy(() =>\r\n  import(\"./Component/FormKirimMasakBarang\")\r\n);\r\nconst ModalMasterData = lazy(() =>\r\n  import(\"../DataMaster/Component/ModalMasterData\")\r\n);\r\nconst maptostate = (state) => {\r\n  return {\r\n    listBarang: state.provinsi.kirimMasak,\r\n    noFaktur: state.provinsi.noFaktur,\r\n    username: state.provinsi.username,\r\n    sumBruto: state.perhitungan.sumBruto,\r\n    sumNetto: state.perhitungan.sumNetto,\r\n    sumQty: state.perhitungan.sumQty,\r\n    onSend: state.provinsi.onSend,\r\n  };\r\n};\r\nconst server = process.env.REACT_APP_BACKEND_URL_NON_MASTER;\r\nconst serverMaster = process.env.REACT_APP_BACKEND_URL;\r\nclass KirimMasak extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      response: \"\",\r\n      tanggal: \"\",\r\n      tukang: \"DEFAULT|DEFAULT\",\r\n      listTukang: [],\r\n      columns: [\r\n        {\r\n          dataField: \"kodeJenis\",\r\n          text: \"Kode Jenis\",\r\n          footer: \"\",\r\n        },\r\n        {\r\n          dataField: \"kadarTransaksi\",\r\n          text: \"Cap Kode\",\r\n          footer: \"\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n        },\r\n        {\r\n          dataField: \"bruto\",\r\n          text: \"Bruto(Gr)\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n          footer: (columnData) =>\r\n            columnData\r\n              .reduce((acc, item) => parseFloat(acc) + parseFloat(item), 0)\r\n              .toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"netto\",\r\n          text: \"Netto(Gr)\",\r\n          footer: (columnData) =>\r\n            columnData\r\n              .reduce((acc, item) => parseFloat(acc) + parseFloat(item), 0)\r\n              .toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"Aksi\",\r\n          text: \"Aksi\",\r\n          csvExport: false,\r\n          formatter: (rowContent, row, rowIndex) => {\r\n            return (\r\n              <div className=\"text-center\">\r\n                <button\r\n                  data-tip\r\n                  data-for=\"hapus\"\r\n                  className=\"btn btn-danger mr-2\"\r\n                  onClick={() =>\r\n                    deleteIndex(\r\n                      \"kirimMasak\",\r\n                      rowIndex,\r\n                      this.props.dispatch,\r\n                      getListKirimMasak()\r\n                    )\r\n                  }\r\n                >\r\n                  <ReactTooltip id=\"hapus\" type=\"dark\" effect=\"solid\">\r\n                    <span>Hapus</span>\r\n                  </ReactTooltip>\r\n                  <i className=\"fa fa-trash mr-1\"></i>\r\n                </button>\r\n                <br />\r\n                {/* <button\r\n                  data-tip\r\n                  data-for=\"edit\"\r\n                  className=\"btn btn-warning mr-2\"\r\n                  data-toggle=\"modal\"\r\n                  data-target=\"#editModal\"\r\n                  onClick={() => console.log(\"EDIT\")}\r\n                >\r\n                  <ReactTooltip id=\"edit\" type=\"dark\" effect=\"solid\">\r\n                    <span>Edit</span>\r\n                  </ReactTooltip>\r\n                  <i className=\"fa fa-edit mr-1\"></i>\r\n                </button> */}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getListKirimMasak());\r\n    this.props.dispatch(getUUID());\r\n    this.props.dispatch(getBruto(\"kirimMasak\"));\r\n    this.props.dispatch(getNetto(\"kirimMasak\"));\r\n    this.props.dispatch(getQty(\"kirimMasak\"));\r\n    this.panggilTukang();\r\n  }\r\n\r\n  panggilTukang() {\r\n    Axios.get(serverMaster + \"storages2?tipeData=TUKANG\")\r\n      .then((res) =>\r\n        this.setState({\r\n          listTukang: res.data,\r\n        })\r\n      )\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"error\",\r\n          text: \"Sepertinya ada kendala, silahkan cek koneksi\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then(() => console.log(err))\r\n      );\r\n  }\r\n  inputChange = (input) => (e) => {\r\n    this.setState({\r\n      [input]: e.target.value,\r\n    });\r\n  };\r\n  handleSubmit(data) {\r\n    console.log(data.bruto);\r\n    if (data.kodeBarang === undefined) {\r\n      warning(\"Mohon pilih Kode Model\");\r\n      return false;\r\n    } else if (data.bruto === undefined) {\r\n      warning(\"Mohon isi Bruto\");\r\n      return false;\r\n    }\r\n    var supp = data.kodeBarang\r\n      ? data.kodeBarang\r\n      : \"DEFAULT|DEFAULT|DEFAULT|DEFAULT\";\r\n    var split = supp.split(\"|\");\r\n    var nama = {\r\n      noFaktur: this.props.noFaktur.toUpperCase(),\r\n      netto: parseFloat(data.netto),\r\n      bruto: parseFloat(data.bruto),\r\n      rp: 0,\r\n      kadarTransaksi: parseFloat(data.kadarTransaksi),\r\n      nettoDiscGlobalExt: 0,\r\n      keterangan: split[3],\r\n      pkg: 0,\r\n      gross: 0,\r\n      p: 0,\r\n      kodeKategori: \"-\",\r\n      qty: 1,\r\n      k: 0,\r\n      kadarCetak: parseFloat(data.kadar),\r\n      noBarcode: \"-\",\r\n      kodeJenis: split[0].toUpperCase(),\r\n      discGlobalGr: 0,\r\n      nettoDiscGlobal: 0,\r\n      discGlobalPr: 0,\r\n    };\r\n    var array = JSON.parse(localStorage.getItem(\"kirimMasak\")) || [];\r\n    array.push(nama);\r\n    localStorage.setItem(\"kirimMasak\", JSON.stringify(array));\r\n    Swal.fire({\r\n      position: \"top-end\",\r\n      icon: \"success\",\r\n      text: \"Data Berhasil Ditambahkan!\",\r\n      showConfirmButton: false,\r\n      timer: 1500,\r\n    })\r\n      .then(() => this.props.dispatch(getNetto(\"kirimMasak\")))\r\n      .then(() => this.props.dispatch(getBruto(\"kirimMasak\")))\r\n      .then(() => this.props.dispatch(getQty(\"kirimMasak\")));\r\n    this.props.dispatch(getListKirimMasak());\r\n    this.props.dispatch(reset(\"FormKirimMasakBarang\"));\r\n  }\r\n\r\n  kirimMasak() {\r\n    if (this.state.tukang === \"DEFAULT|DEFAULT\") {\r\n      warning(\"Mohon isi data tukang\");\r\n      return false;\r\n    } else if (this.state.tanggal === \"\") {\r\n      warning(\"Mohon isi tanggal\");\r\n      return false;\r\n    } else if (localStorage.getItem(\"kirimMasak\") === null) {\r\n      warning(\"Barang masih kosong, Mohon tambahkan barang\");\r\n      return false;\r\n    }\r\n    var supp = this.state.tukang ? this.state.tukang : \"DEFAULT|DEFAULT\";\r\n    var split = supp.split(\"|\");\r\n    var simpan = {\r\n      noFaktur: this.props.noFaktur.toUpperCase(),\r\n      noBon: this.props.noFaktur.toUpperCase(),\r\n      tanggal: this.state.tanggal.toUpperCase(),\r\n      kodeTukang: split[0].toUpperCase(),\r\n      namaTukang: split[1].toUpperCase(),\r\n      kodeLokasi: split[0].toUpperCase(),\r\n      barangDetails: JSON.parse(localStorage.getItem(\"kirimMasak\")),\r\n      footerItem: {\r\n        totalNetto: this.props.sumNetto,\r\n        totalBruto: this.props.sumBruto,\r\n        totalNettoExt: 0,\r\n        totalP: 0,\r\n        totalGross: 0,\r\n        totalQty: this.props.sumQty,\r\n        totalpkg: 0,\r\n        totalRp: 0,\r\n        totalK: 0,\r\n      },\r\n      footerDocument: {\r\n        inputBy: this.props.username, //INPUT BY DEFAULT\r\n      },\r\n    };\r\n    console.log(JSON.stringify(simpan));\r\n    this.props.dispatch(progressSend());\r\n    // INISIALISASI AUTOTABLE\r\n    const tableRows = [];\r\n    var table = JSON.parse(localStorage.getItem(\"kirimMasak\"));\r\n    // for each ticket pass all its data into an array\r\n    table.forEach((ticket, i) => {\r\n      const ticketData = [\r\n        i++,\r\n        ticket.kodeJenis,\r\n        ticket.bruto,\r\n        ticket.kadarTransaksi,\r\n        ticket.netto,\r\n      ];\r\n      // push each tickcet's info into a row\r\n      tableRows.push(ticketData);\r\n    });\r\n    console.log(JSON.stringify(tableRows));\r\n    var columTable = [\"No\", \"Kode Jenis\", \"Bruto\", \"Harga (%)\", \"Netto\"];\r\n    // AKHIR INISIALISASI AUTOTABLE\r\n    Axios.post(server + \"item/dc/kirimmasak\", simpan)\r\n      .then(() =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"success\",\r\n          text: \"Transaksi Berhasil\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n          .then(() => this.props.dispatch(finishSend()))\r\n          .then(() => localStorage.removeItem(\"noFaktur\"))\r\n          .then(() =>\r\n            PrintNota(\r\n              \"Tanggal\",\r\n              this.state.tanggal.toUpperCase(),\r\n              \"Kode Tukang\",\r\n              split[0],\r\n              \"No Faktur\",\r\n              this.props.noFaktur.toUpperCase(),\r\n              \"\",\r\n              \"\",\r\n              \"ADMIN\",\r\n              this.state.tanggal.toUpperCase(),\r\n              \"\",\r\n              columTable,\r\n              \"BUKTI KIRIM MASAK\",\r\n              tableRows\r\n            )\r\n          )\r\n          .then(() => localStorage.removeItem(\"kirimMasak\"))\r\n          .then(() => this.props.dispatch(getListKirimMasak()))\r\n          .then(() =>\r\n            this.setState({\r\n              tanggal: \"\",\r\n              tukang: \"\",\r\n            })\r\n          )\r\n          .then(() => this.props.dispatch(getUUID()))\r\n          .then(() => this.props.dispatch(reset(\"FormKirimMasakBarang\")))\r\n      )\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"error\",\r\n          text: \"Sepertinya ada kendala, silahkan cek koneksi\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then(() => console.log(err))\r\n      );\r\n  }\r\n\r\n  tambahTukang(data) {\r\n    var simpan = {\r\n      tipeData: \"TUKANG\",\r\n      kodeLokasi: data.kodeLokasi.toUpperCase(),\r\n      kodeExt: data.kodeLokasi.toUpperCase(),\r\n      statusAktif: \"AKTIF\",\r\n      namaLokasi: data.namaLokasi.toUpperCase(),\r\n    };\r\n    Axios.post(serverMaster + \"storage\", simpan)\r\n      .then(() =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"success\",\r\n          text: \"Tambah Data Berhasil\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n          .then(() => this.props.dispatch(getListTukang()))\r\n          .then(() => this.panggilTukang())\r\n      )\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          position: \"top-end\",\r\n          icon: \"error\",\r\n          text: \"Sepertinya ada kendala, silahkan cek koneksi\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n          .then(() => console.log(err))\r\n          .then(() => this.props.dispatch(finishSend()))\r\n      );\r\n  }\r\n\r\n  kirimModal() {\r\n    this.props.dispatch(showModal());\r\n    this.setState({\r\n      modalKirimMasak: true,\r\n    });\r\n  }\r\n  tukangModal() {\r\n    this.props.dispatch(showModal());\r\n    this.setState({\r\n      modalKirimMasak: false,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\" style={{ color: \"black\" }}>\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <div className=\"card\">\r\n              <HeaderCard title=\"Kirim Masak\" />\r\n              <div className=\"card-body\">\r\n                <div className=\"col-lg-12\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-3 col-lg-3\">\r\n                      <label htmlFor=\"\">Tanggal</label>\r\n                      <input\r\n                        name=\"tanggal\"\r\n                        id=\"tanggal\"\r\n                        type=\"date\"\r\n                        className=\"form-control\"\r\n                        onChange={this.inputChange(\"tanggal\")}\r\n                        value={this.state.tanggal}\r\n                      ></input>\r\n                    </div>\r\n                    <div className=\"col-md-4 col-lg-3\">\r\n                      <label htmlFor=\"\">Tukang</label>\r\n                      <select\r\n                        name=\"tukang\"\r\n                        id=\"tukang\"\r\n                        className=\"form-control\"\r\n                        onChange={this.inputChange(\"tukang\")}\r\n                        value={this.state.tukang}\r\n                      >\r\n                        <option value=\"DEFAULT|DEFAULT\" key=\"DEFAULT\">\r\n                          SILAHKAN PILIH\r\n                        </option>\r\n                        {this.state.listTukang.map((list) => (\r\n                          <option\r\n                            value={list.kodeLokasi + \"|\" + list.namaLokasi}\r\n                            key={list.kodeLokasi}\r\n                          >\r\n                            {list.namaLokasi}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    <div\r\n                      className=\"col-lg-1 col-md-1 no-gutters form-group\"\r\n                      style={{ marginLeft: -30 }}\r\n                    >\r\n                      <label htmlFor=\"\" className=\"text-white\">\r\n                        .\r\n                      </label>\r\n                      <button\r\n                        className=\"btn btn-primary form-control\"\r\n                        onClick={() => this.tukangModal()}\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"col-md-5 col-lg-5\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-lg-12 mb-1\">\r\n                <div className=\"col-lg-12 mb-3\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-lg-6\">\r\n                      <div className=\"text-left\">\r\n                        <button\r\n                          disabled={this.props.onSend}\r\n                          className=\"btn btn-primary\"\r\n                          onClick={() => this.kirimMasak()}\r\n                        >\r\n                          {this.props.onSend ? (\r\n                            <span\r\n                              className=\"spinner-border spinner-border-sm mr-3\"\r\n                              aria-hidden=\"true\"\r\n                            ></span>\r\n                          ) : null}\r\n                          Simpan\r\n                          <i className=\"fa fa-paper-plane ml-3\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-lg-6\">\r\n                      <div className=\"text-right\">\r\n                        <button\r\n                          className=\"btn btn-primary\"\r\n                          onClick={() => this.kirimModal()}\r\n                        >\r\n                          Tambah Data\r\n                          <i className=\"fa fa-plus ml-3\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-lg-12 mb-3\">\r\n                <div className=\"col-lg-12\">\r\n                  {this.props.listBarang ? (\r\n                    <BootstrapTable\r\n                      keyField=\"kodeJenis\"\r\n                      data={this.props.listBarang}\r\n                      columns={this.state.columns}\r\n                      bordered={true}\r\n                      headerClasses=\"header-table\"\r\n                    />\r\n                  ) : (\r\n                    <BootstrapTable\r\n                      keyField=\"kodeJenis\"\r\n                      data={[]}\r\n                      columns={this.state.columns}\r\n                      bordered={true}\r\n                      headerClasses=\"header-table\"\r\n                      noDataIndication=\"Tidak Ada Data\"\r\n                    />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ModalMasterData\r\n          content={\r\n            <Suspense\r\n              fallback={<Skeleton width={\"100%\"} height={50} count={5} />}\r\n            >\r\n              {this.state.modalKirimMasak ? (\r\n                <FormKirimMasakBarang\r\n                  onSubmit={(data) => this.handleSubmit(data)}\r\n                />\r\n              ) : (\r\n                <FormKirimMasak onSubmit={(data) => this.tambahTukang(data)} />\r\n              )}\r\n            </Suspense>\r\n          }\r\n          title=\"Tambah Data Barang\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(KirimMasak);\r\n"],"sourceRoot":""}