(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[143],{1232:function(e,t,a){"use strict";a.r(t);var n=a(185),r=a.n(n),o=a(237),i=a(60),s=a(15),l=a(16),c=a(18),m=a(17),p=a(0),d=a.n(p),u=a(100),g=a.n(u),k=a(61),b=a.n(k),h=a(101),f=a.n(h),v=a(55),S=a(12),E=a(13),j=a.n(E),O=a(343),_=a(344),y=a(347),N=a(117),T=a(49),B=a(186),F=a(5),x=a(23),w=a(62),C=a(128),D=a(88),K=a(224),A=a(19),I=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return function(e){var t=(e.target.value?e.target.value:"DEFAULT | DEFAULT | DEFAULT | DEFAULT ").split("|");n.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]}),n.props.change("kadarTransaksi",t[2]),n.props.change("keterangan",t[3])}},n.state={listPerhiasan:[],listRongsok:[],listCiok:[],listBarangPerhiasan:[],kode_kelompok:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(D.f)()),this.props.dispatch(Object(C.d)()),this.props.dispatch(Object(K.c)())}},{key:"setNetto",value:function(){this.props.change("netto","NaN"===this.props.netto?0:this.props.netto)}},{key:"render",value:function(){var e=this;return d.a.createElement("form",{onSubmit:this.props.handleSubmit},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-12"},d.a.createElement(O.a,{disabled:""!==this.state.kode_kelompok,name:"kode_kategori",component:A.b,options:this.props.Kelompok.filter((function(e){return"AKSESORIS"!==e.kode_kelompok})).map((function(e){return{value:e.kode_group,name:e.nama_group}})),type:"text",label:"Kode Kelompok",placeholder:"Silahkan Pilih Kode Kelompok",onChange:function(t){return e.props.getSum(t)}}),d.a.createElement("p",null,d.a.createElement("strong",null,"Kode Kelompok")," hanya bisa dipilih"," ",d.a.createElement("strong",null,"sekali"),", jika ingin mengganti silahkan klik tombol hijau di atas")),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(O.a,{name:"jenis_barang",label:"Jenis Barang",type:"text",component:A.a})),d.a.createElement("div",{className:"col-lg-2"},d.a.createElement(O.a,{name:"berat_packing",label:"Berat Packing",type:"text",component:A.a})),d.a.createElement("div",{className:"col-lg-2"},d.a.createElement(O.a,{name:"gross",label:"Berat + Packing",type:"text",component:A.a})),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(O.a,{name:"keterangan",label:"Keterangan",type:"text",component:A.a,normalize:function(e){return e&&e.toUpperCase()}})),d.a.createElement("br",null)),d.a.createElement("div",{className:"col-lg-12"},d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{className:"btn btn-warning",type:"submit",disabled:this.props.onSend},this.props.onSend?d.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Tambah Data",d.a.createElement("i",{class:"fa fa-plus ml-3","aria-hidden":"true"})))))}}]),a}(p.Component);I=Object(_.a)({form:"FormTimbanganStock",enableReinitialize:!0})(I);var J=Object(y.a)("FormTimbanganStock"),P=Object(S.b)((function(e){var t=J(e,"gross","kadarTransaksi","pkg"),a=t.gross,n=t.kadarTransaksi,r=t.pkg;return{netto:((parseFloat(a||0)-parseFloat(r||0))*(parseFloat(n)/100)).toFixed(3),kode_barang:e.provinsi.kodeBarang,onSend:e.provinsi.onSend,Kelompok:e.provinsi.Kelompok,totalTimbangStock:e.provinsi.totalTimbangStock,initialValues:{total_real:e.provinsi.totalTimbangStock}}}))(I),L=a(339),R=a(43),U=a(38),G=a(6),z=a(340),H=k.Search.SearchBar,M=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).changeInput=function(e){return function(t){n.setState(Object(i.a)({},e,t.target.value))}},n.state={listLokasi:[],berat_bersih:0,columns:[{dataField:"jenis_barang",text:"Jenis Barang",sort:!0,headerStyle:function(){return{width:"30%"}}},{dataField:"berat_bersih",text:"Berat Bersih",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"berat_packing",text:"Berat + Packing",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"15%"}}},{dataField:"keterangan",text:"Keterangan",sort:!0,headerStyle:function(){return{width:"25%"}}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,t,a){return d.a.createElement("div",{className:"text-center"},d.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger mr-2",onClick:function(){return n.deleteRow(a)}},d.a.createElement("i",{className:"fa fa-trash mr-1"}),"HAPUS",d.a.createElement(R.a,{id:"hapus",type:"dark",effect:"solid"},d.a.createElement("span",null,"Hapus"))),d.a.createElement("button",{"data-tip":!0,"data-for":"edit",className:"btn btn-warning mr-2",onClick:function(){return n.props.dispatch(Object(z.d)(t))}},"EDIT",d.a.createElement(R.a,{id:"edit",type:"dark",effect:"solid"},d.a.createElement("span",null,"Edit"))))}}]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){localStorage.removeItem("TimbangStock"),this.props.dispatch(Object(N.h)()),this.props.dispatch(Object(L.b)()),this.props.dispatch(Object(N.f)()),this.props.dispatch(Object(B.d)()),this.props.dispatch(Object(v.b)()),this.props.dispatch(Object(w.e)())}},{key:"deleteRow",value:function(e,t){var a=this;j.a.fire({title:"Are You Sure ?",text:"You Will Delete This Data ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete"}).then((function(t){if(t.isConfirmed){var n=JSON.parse(localStorage.getItem("TimbangStock"))||[];n.splice(e,1),localStorage.setItem("TimbangStock",JSON.stringify(n)),j.a.fire({text:"Berhasil",timer:2e3,showConfirmButton:!1,position:"top-right",icon:"success"}).then((function(){return a.props.dispatch(Object(L.b)())}))}}))}},{key:"handleSubmit",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse(localStorage.getItem("TimbangStock"))||[],n=a.findIndex((function(e){return e.jenis_barang===t.jenis_barang})),o={jenis_barang:t.jenis_barang,berat_bersih:parseFloat(t.gross)-parseFloat(t.berat_packing),berat_packing:t.berat_packing,keterangan:t.keterangan},this.setState({kode_kategori:t.kode_kategori,berat_bersih:parseFloat(this.state.berat_bersih)+parseFloat(t.gross)-parseFloat(t.berat_packing)}),-1===n?(a.push(o),localStorage.setItem("TimbangStock",JSON.stringify(a)),j.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(L.b)()),this.props.dispatch(Object(z.b)())):(a[n]=o,localStorage.setItem("TimbangStock",JSON.stringify(a)),j.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(L.b)()),this.props.dispatch(Object(z.b)()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startTotalan",value:function(){var e=this,t=JSON.parse(localStorage.getItem("TimbangStock")),a={tanggal:Object(U.b)(),kode_kategori:this.state.kode_kategori,detail_barang:t};console.log(JSON.stringify(a)),Object(F.d)("timbang-stock/post/simpan",a).then((function(){Object(x.b)("Simpan Data Berhasil"),localStorage.removeItem("TimbangStock"),e.setState({kode_kategori:""}),setInterval((function(){window.location.reload()}),2e3)})).catch((function(e){return Object(x.c)("Gagal menyimpan Data, Detail : ".concat(e.data))}))}},{key:"getSum",value:function(e){var t=this;this.setState({kode_kelompok:e}),Object(F.b)("timbang-stock/get/stockBarangByKategori/"+e).then((function(a){var n;t.props.change("total_system",Object(G.m)((null===(n=a.data)||void 0===n?void 0:n.berat_global)||0)),t.props.dispatch(Object(z.c)(e))}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"container-fluid"},d.a.createElement("div",{className:"card"},d.a.createElement(T.default,{title:"Timbangan Stock"}),d.a.createElement("div",{className:"card-body"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-12"},d.a.createElement(P,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,getSum:function(t){return e.getSum(t)},onSubmit:function(t){return e.handleSubmit(t)}})),d.a.createElement("div",{className:"col-lg-12 mt-2"},this.props.ListTimbangStock?d.a.createElement(b.a,{keyField:"jenis_barang",data:this.props.ListTimbangStock,columns:this.state.columns,search:!0},(function(e){return d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"text-right mt-5 mb-3"},d.a.createElement(H,Object.assign({},e.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),d.a.createElement(g.a,Object.assign({},e.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:f()()})))})):d.a.createElement(g.a,{keyField:"kodeKelompok",data:[],columns:this.state.columns,bordered:!0,headerClasses:"header-table",noDataIndication:"Tidak Ada Data"})),d.a.createElement("div",{className:"col-lg-12"},d.a.createElement("div",{className:"row justify-content-end"},d.a.createElement("div",{className:"col-lg-2"},d.a.createElement(O.a,{name:"total_system",label:"Total System",type:"text",readOnly:!0,component:A.a}))),d.a.createElement("div",{className:"row justify-content-end"},d.a.createElement("div",{className:"col-lg-2"},d.a.createElement(O.a,{name:"total_real",label:"Total Real",type:"text",component:A.a,readOnly:!0})))),d.a.createElement("div",{className:"col-lg-12"},d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.state.onSend,onClick:function(){return e.startTotalan()}},this.state.onSend?d.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai Stock",d.a.createElement("i",{className:"fa fa-paper-plane ml-3"}))))))))}}]),a}(p.Component);M=Object(_.a)({form:"TimbangStock",enableReinitialize:!0})(M);var Q=Object(y.a)("TimbangStock");t.default=Object(S.b)((function(e){var t=Q(e,"tanggal","kode_kelompok","lokasi"),a=t.tanggal,n=t.kode_kelompok,r=t.lokasi;return{data_stock:e.provinsi.data_stock,TimbangStock:e.provinsi.TimbangStock,noFaktur:e.provinsi.noFaktur,ListTimbangStock:e.provinsi.ListTimbangStock,sumBruto:e.perhitungan.sumBruto,sumNetto:e.perhitungan.sumNetto,sumGross:e.perhitungan.sumGross,sumPkg:e.perhitungan.sumPkg,sumQty:e.perhitungan.sumQty,sumRp:e.perhitungan.sumRp,onSend:e.provinsi.onSend,status_totalan:e.provinsi.status_totalan,lokasi:e.provinsi.lokasi,tanggal:a,kode_kelompok:n,lokasiSelected:r,dataLokasiPindah:e.provinsi.dataLokasiPindah,totalTimbangStock:e.provinsi.totalTimbangStock,initialValues:{kode_kelompok:e.provinsi.status_totalan.kode_kelompok,tanggal:e.provinsi.status_totalan.tanggal}}}))(M)}}]);
//# sourceMappingURL=143.420dc321.chunk.js.map