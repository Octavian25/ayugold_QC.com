(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[110],{1213:function(t,a,e){"use strict";e.r(a);var n=e(59),r=e(15),i=e(16),o=e(18),s=e(17),l=e(0),c=e.n(l),d=e(13),u=e(12),m=e.n(u),h=e(43),p=e(11),g=e(69),b=e(54),k=e(20),f=e(138),j=e(25),E=e(238),O=e(341),v=e(342),B=e(23),N=e(61),A=e(38),y=e(49),S=e(6),F=e(21),_=function(t){var a={};return t.tanggal||(a.tanggal="Tidak Boleh kosong"),t.dari||(a.dari="Tidak Boleh kosong"),t.ke||(a.ke="Tidak Boleh kosong"),t.kategori||(a.kategori="Tidak Boleh kosong"),a},x=e(183),P=e.n(x),T=e(235),D=e(146),I=e(5),G=function(t){Object(o.a)(e,t);var a=Object(s.a)(e);function e(t){var n;return Object(r.a)(this,e),(n=a.call(this,t)).state={columns:[{dataField:"tanggal",text:"Tanggal"},{dataField:"baki",text:"Nama Baki"},{dataField:"instansi",text:"Supplier"},{dataField:"jenis_trx",text:"Kode Model",align:"right",headerAlign:"right"},{dataField:"total_bruto",text:"Berat(Gr)",align:"right",headerAlign:"right"},{dataField:"total_netto",text:"Netto(Gr)",align:"right",headerAlign:"right"},{dataField:"total_ongkos",text:"Ongkos(Rp)",align:"right",headerAlign:"right"},{dataField:"total_gross",text:"Gross(Gr)",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,a){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{className:"btn btn-warning mr-2",onClick:function(){return n.pilihBarcode(a)}},"Pilih"))}}]},n}return Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(D.d)())}},{key:"pilihBarcode",value:function(){var t=Object(T.a)(P.a.mark((function t(a){var e,n=this;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=a.detail_barang).forEach((function(t,a){Object(I.b)("jenis/get/by-kode-jenis/"+t.kode_jenis).then((function(t){e[a].kode_kategori=t.data.kode_kelompok,e[a].kadar_modal=t.data.kadar_beli,e[a].kadar_jual=t.data.kadar_jual,e[a].p=0,e[a].k=0,e[a].qty=1,delete e[a].kadar})).then((function(){localStorage.setItem("pindahBarang",JSON.stringify(e)),m.a.fire({position:"top-end",icon:"success",text:"Transaksi Berhasil",showConfirmButton:!1,timer:1500}).then((function(){return n.props.dispatch(Object(p.b)("FormTambahBarang"))})).then((function(){return n.props.dispatch(Object(g.f)())})).then((function(){return n.getSumData()}))})).catch((function(t){return Object(j.c)("Error Get Data , Detail : ".concat(t))}))}));case 2:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()},{key:"getSumData",value:function(){this.props.dispatch(Object(k.o)("pindahBarang")),this.props.dispatch(Object(k.l)("pindahBarang")),this.props.dispatch(Object(k.s)("pindahBarang")),this.props.dispatch(Object(k.q)("pindahBarang")),this.props.dispatch(Object(k.r)("pindahBarang"))}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"col-lg-12 col-md-12"},c.a.createElement(y.a,{keyField:"kodeJenis",data:this.props.listCloseBarcode.filter((function(a){return"PINDAH BARANG"===a.jenis_trx&&a.tanggal===Object(A.b)()&&a.instansi===t.props.lokasi_asal&&a.instansi2===t.props.lokasi_tujuan}))||[],columns:this.state.columns,textEmpty:"Data Barcode Untuk Lokasi Ini Tidak Ada"}))}}]),e}(l.Component),C=Object(d.b)((function(t){return{listCloseBarcode:t.provinsi.listCloseBarcode}}))(G),L=function(t){Object(o.a)(e,t);var a=Object(s.a)(e);function e(t){var n;return Object(r.a)(this,e),(n=a.call(this,t)).state={supplier:!1,listKategori:[{nama:"AMBIL BARANG"},{nama:"KEMBALI STOK"},{nama:"KOREKSI STOK"},{nama:"MUTASI BAHAN"},{nama:"PENGAMBILAN SALES"},{nama:"PINDAH"},{nama:"PINDAH GUDANG REPARASI"},{nama:"RETURN SALES"},{nama:"SALAH INPUT"},{nama:"SALAH PINDAH"},{nama:"STOK AWAL"},{nama:"TAMBAH BARANG"}],columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_modal",text:"Kode Awal",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_cetak",text:"Cap Kode",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"pkg",text:"Pkg (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"bruto",text:"Bruto (Gr)",align:"right",formatter:function(t){return Object(S.m)(t)},headerAlign:"right"},{dataField:"kadar_jual",text:"Kode Tukar",align:"right",formatter:function(t){return Object(S.m)(t,2)},headerAlign:"right"},{dataField:"netto",text:"Netto (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t,3)}},{dataField:"ongkos_rp",text:"Ongkos (Rp)",align:"right",headerAlign:"right",formatter:function(t){return c.a.createElement("span",null,"Rp. ",Object(S.p)(t))}},{dataField:"qty",text:"Qty",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,a,e){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{"data-tip":!0,type:"button","data-for":"hapus",className:"btn btn-danger",onClick:function(){return Object(E.a)("pindahBarang",e,n.props.dispatch,Object(g.f)())}},c.a.createElement(h.a,{id:"hapus",type:"dark",effect:"solid"},c.a.createElement("span",null,"Hapus")),c.a.createElement("i",{className:"fa fa-trash"})),c.a.createElement("br",null))}}],lokasi_asal:"",lokasi_tujuan:""},n}return Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(N.e)()),this.props.change("tanggal",A.b),this.props.change("noBon","AS/PB-"+ +Object(S.q)())}},{key:"tambahModal",value:function(){this.props.dispatch(Object(B.j)()),this.setState({isEdit:!1})}},{key:"render",value:function(){var t=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-3 form-group"},c.a.createElement(O.a,{component:F.a,type:"date",name:"tanggal",label:"Tanggal"})),c.a.createElement("div",{className:"col-md-4 form-group"},this.props.dataLokasiPindah?c.a.createElement(O.a,{component:F.b,label:"Dari",name:"dari",value:this.props.status,normalize:function(t){return t&&t.toUpperCase()},onChange:function(a){return t.setState({lokasi_asal:a})},options:this.props.dataLokasiPindah.map((function(t){return{value:t.kode_lokasi,name:t.nama_lokasi}}))}):c.a.createElement(A.a,{label:"Dari"})),c.a.createElement("div",{className:"col-md-1 text-center"},c.a.createElement("label",{htmlFor:"",className:"text-white"},"."),c.a.createElement("h3",null,c.a.createElement("i",{className:"fa fa-exchange-alt"}))),c.a.createElement("div",{className:"col-md-4 form-group"},this.props.dataLokasiPindah?c.a.createElement(O.a,{component:F.b,label:"Ke",name:"ke",value:this.props.status,normalize:function(t){return t&&t.toUpperCase()},onChange:function(a){return t.setState({lokasi_tujuan:a})},options:this.props.dataLokasiPindah.map((function(t){return{value:t.kode_lokasi,name:t.nama_lokasi}}))}):c.a.createElement(A.a,{label:"Ke"})),c.a.createElement("div",{className:"col-md-4 form-group"},this.props.dataLokasiPindah?c.a.createElement(O.a,{component:F.b,label:"Kategori",name:"Kategori",value:this.props.status,normalize:function(t){return t&&t.toUpperCase()},options:this.state.listKategori.map((function(t){return{value:t.nama,name:t.nama}}))}):c.a.createElement(A.a,{label:"Kategori"})),c.a.createElement("div",{className:"col-md-4 form-group d-none"},c.a.createElement(O.a,{component:F.a,type:"text",name:"noBon",label:"Bon Pindah",normalize:function(t){return t&&t.toUpperCase()}})),c.a.createElement("div",{className:"col-lg-4"}),c.a.createElement("div",{className:"col-lg-4"}),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"},c.a.createElement("div",{className:"text-left"})),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"},c.a.createElement("div",{className:"text-center"},""===this.state.lokasi_asal||""===this.state.lokasi_tujuan?c.a.createElement("button",{className:"btn btn-primary","data-toggle":"modal",type:"button","data-target":"#barcodeModal",disabled:!0},"BARCODE (+)"):c.a.createElement("button",{className:"btn btn-primary","data-toggle":"modal",type:"button","data-target":"#barcodeModal"},"BARCODE (+)"))),c.a.createElement("div",{className:"col-lg-4 col-md-4 mb-3"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return t.tambahModal()}},"TAMBAH BARANG",c.a.createElement("i",{className:"fa fa-plus ml-3"})))),c.a.createElement("div",{className:"col-md-12 col-lg-12"},c.a.createElement(y.a,{keyField:"KodeBarang",data:this.props.listBarang||[],columns:this.state.columns,bordered:!0,headerClasses:"header-table"}))),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary","data-toggle":"modal",disabled:this.props.onSend,onClick:this.props.handleSubmit},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",c.a.createElement("i",{class:"fa fa-paper-plane ml-3","aria-hidden":"true"}))))),c.a.createElement("div",{id:"barcodeModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"primary-header-modalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog modal-xl"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header modal-colored-header bg-primary"},c.a.createElement("h4",{className:"modal-title",id:"primary-header-modalLabel"},"Data Barcode"),c.a.createElement("button",{type:"button",id:"dismissModal",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7")),c.a.createElement("div",{className:"modal-body"},c.a.createElement(C,{onSubmit:function(a){return t.handleSubmit(a)},lokasi_asal:this.state.lokasi_asal,lokasi_tujuan:this.state.lokasi_tujuan})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Close"))))))}}]),e}(l.Component);L=Object(v.a)({form:"headPindahBarang",enableReinitialize:!0,validate:_})(L);var K=Object(d.b)((function(t){return{dataLokasiPindah:t.provinsi.dataLokasiPindah,listBarang:t.provinsi.pindahBarang,initialValues:{tanggal:Object(A.b)()}}}))(L),R=e(101),M=e(37),w=e.n(M),J=e(48),U=Object(l.lazy)((function(){return e.e(106).then(e.bind(null,1197))})),H=function(t){Object(o.a)(e,t);var a=Object(s.a)(e);function e(t){var i;return Object(r.a)(this,e),(i=a.call(this,t)).onChange=function(t){return function(a){i.setState(Object(n.a)({},t,a.target.value))}},i.state={dari:[],kepada:[],tanggal:"",dariIsi:"",ke:"",noBon:"",kategori:"",kodeJenis:"",keterangan:"",edited:!1,columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_modal",text:"Kode Awal",formatter:function(t){return Object(S.m)(t)}},{dataField:"kadar_cetak",text:"Cap Kode",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"pkg",text:"Pkg (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t)}},{dataField:"bruto",text:"Bruto (Gr)",align:"right",formatter:function(t){return Object(S.m)(t)},headerAlign:"right"},{dataField:"kadar_jual",text:"Kode Tukar",align:"right",formatter:function(t){return Object(S.m)(t,2)},headerAlign:"right"},{dataField:"netto",text:"Netto (Gr)",align:"right",headerAlign:"right",formatter:function(t){return Object(S.m)(t,3)}},{dataField:"ongkos_rp",text:"Ongkos (Rp)",align:"right",headerAlign:"right",formatter:function(t){return c.a.createElement("span",null,"Rp. ",Object(S.p)(t))}},{dataField:"qty",text:"Qty",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,a,e){return c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{"data-tip":!0,"data-for":"hapus",type:"button",className:"btn btn-danger",onClick:function(){return Object(E.a)("pindahBarang",e,i.props.dispatch,Object(g.f)())}},c.a.createElement(h.a,{id:"hapus",type:"dark",effect:"solid"},c.a.createElement("span",null,"Hapus")),c.a.createElement("i",{className:"fa fa-trash"})),c.a.createElement("br",null))}}]},i}return Object(i.a)(e,[{key:"getSumData",value:function(){this.props.dispatch(Object(k.o)("pindahBarang")),this.props.dispatch(Object(k.l)("pindahBarang")),this.props.dispatch(Object(k.s)("pindahBarang")),this.props.dispatch(Object(k.q)("pindahBarang")),this.props.dispatch(Object(k.r)("pindahBarang"))}},{key:"setEdit",value:function(t){this.props.dispatch(Object(g.b)(t)),this.setState({edited:!0})}},{key:"getTabelData",value:function(){this.props.dispatch(Object(g.f)())}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(g.f)()),this.props.dispatch(Object(b.b)()),this.getSumData(),this.dataEditPindahBarang()}},{key:"handleSubmit",value:function(t){var a=this,e=(t.kodeBarang?t.kodeBarang:"DEFAULT | DEFAULT | DEFAULT | DEFAULT |DEFAULT |DEFAULT ").split("|");this.setState({kodeJenis:e[0]});var n=JSON.parse(localStorage.getItem("pindahBarang"))||[],r={kode_kategori:e[5],kode_jenis:e[0],nama_jenis:e[4],kode_barcode:"-",qty:t.qty||1,p:0,k:0,gross:parseFloat(t.bruto)+parseFloat(t.pkg)||0,pkg:parseFloat(t.pkg)||0,bruto:parseFloat(t.bruto)||0,kadar_cetak:(parseFloat(t.kadar)||0).toString(),kadar_modal:parseFloat(t.kadarTransaksi)||0,kadar_jual:parseFloat(t.kadarJual)||0,netto:parseFloat(t.netto)||0,ongkos_rp:parseFloat(t.ongkos)||0};n.push(r),localStorage.setItem("pindahBarang",JSON.stringify(n)),m.a.fire({position:"top-end",icon:"success",text:"Transaksi Berhasil",showConfirmButton:!1,timer:1500}).then((function(){return a.props.dispatch(Object(p.b)("FormTambahBarang"))})).then((function(){return a.props.dispatch(Object(g.f)())})).then((function(){return a.getSumData()})).catch((function(t){return Object(j.c)("Gagal Simpan Data, Detail : ".concat(t.response.data))}))}},{key:"SubmitPindah",value:function(t){var a=this;if(null===localStorage.getItem("pindahBarang"))return Object(j.e)("Mohon Tambahkan Barang Yang akan dipindahkan"),!1;var e={no_pindah:this.props.noFaktur,no_bon:t.noBon,tanggal:t.tanggal,lokasi_asal:t.dari,lokasi_tujuan:t.ke,keterangan:"PINDAH BARANG",detail_barang:JSON.parse(localStorage.getItem("pindahBarang"))};this.props.dispatch(Object(k.t)()),console.log(JSON.stringify(e));var n=[],r=JSON.parse(localStorage.getItem("pindahBarang"));r.forEach((function(t,a){var e=[++a,t.kode_jenis,{content:t.qty,styles:{halign:"right"}},{content:Object(S.m)(t.bruto),styles:{halign:"right"}},{content:t.kadar_modal,styles:{halign:"right"}},{content:Object(S.m)(t.netto,3),styles:{halign:"right"}},{content:t.pkg,styles:{halign:"right"}},{content:Object(S.m)(t.gross),styles:{halign:"right"}},{content:Object(S.p)(t.ongkos_rp),styles:{halign:"right"}}];n.push(e)}));var i=[{content:""},{content:"Grand Total"},{content:r.map((function(t){return parseFloat(t.qty)})).reduce((function(t,a){return t+a}),0),styles:{halign:"right"}},{content:Object(S.m)(r.map((function(t){return parseFloat(t.bruto)})).reduce((function(t,a){return t+a}),0)),styles:{halign:"right"}},{content:""},{content:Object(S.m)(r.map((function(t){return parseFloat(t.netto)})).reduce((function(t,a){return t+a}),0),3),styles:{halign:"right"}},{content:r.map((function(t){return parseFloat(t.pkg)})).reduce((function(t,a){return t+a}),0),styles:{halign:"right"}},{content:Object(S.m)(r.map((function(t){return parseFloat(t.gross)})).reduce((function(t,a){return t+a}),0)),styles:{halign:"right"}},{content:Object(S.p)(r.map((function(t){return parseFloat(t.ongkos_rp)})).reduce((function(t,a){return t+a}),0)),styles:{halign:"right"}}],o=[[{content:"No"},{content:"Kode Jenis"},{content:"Qty",styles:{halign:"right"}},{content:"Bruto (Gr)",styles:{halign:"right"}},{content:"Kode Awal",styles:{halign:"right"}},{content:"Netto (Gr)",styles:{halign:"right"}},{content:"Pkg (Gr)",styles:{halign:"right"}},{content:"Gross (Gr)",styles:{halign:"right"}},{content:"Ongkos (Rp)",styles:{halign:"right"}}]];Object(I.c)("pindah-barang/simpan",e).then((function(){return m.a.fire({position:"top-end",icon:"success",text:"Transaksi Berhasil",showConfirmButton:!1,timer:1500}).then((function(){return a.props.dispatch(Object(k.k)())})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return Object(f.a)("Tanggal",t.tanggal,"Lokasi",t.dari+" - "+t.ke,"Nomor Bon",t.noBon,"","",Object(S.s)(),t.tanggal,"",o,"PINDAH BARANG",n,i)})).then((function(){return localStorage.removeItem("pindahBarang")})).then((function(){return a.props.dispatch(Object(p.b)("headPindahBarang"))}))})).then((function(){return a.props.dispatch(Object(k.k)())})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return a.props.dispatch(Object(b.b)())})).then((function(){return a.props.dispatch(Object(g.f)())})).catch((function(t){var e;return m.a.fire({position:"top-end",icon:"error",text:(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.data)||"Terjadi Kesalahan Internal, Silahkan Hubungi Admin",showConfirmButton:!1,timer:1500}).then((function(){return console.log(t)})).then((function(){return a.props.dispatch(Object(k.k)())}))})),this.props.dispatch(Object(g.f)())}},{key:"resetField",value:function(){localStorage.removeItem("editPindahBarang"),localStorage.removeItem("pindahBarang"),this.props.dispatch(Object(b.b)()),this.props.dispatch(Object(g.f)()),this.setState({tanggal:"",dariIsi:"",ke:"",noBon:"",kategori:"",kodeJenis:"",keterangan:""})}},{key:"dataEditPindahBarang",value:function(){var t=JSON.parse(localStorage.getItem("editPindahBarang"))||[];this.setState({dariIsi:t.kodeLokasiAsal,ke:t.kodeLokasiTujuan,tanggal:t.tanggal,keterangan:t.keterangan,noBon:t.noBon}),this.props.dispatch(Object(g.f)())}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"container-fluid",style:{color:"black"}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"card"},c.a.createElement(J.default,{title:"Pindah Barang"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement(R.default,{content:c.a.createElement(l.Suspense,{fallback:c.a.createElement(w.a,{width:"100%",height:50,count:3})},c.a.createElement(U,{onSubmit:function(a){return t.handleSubmit(a)},listBarang:this.props.listBarang,setEdit:this.state.setEdit})),title:"Tambah Data Pindah Barang"}),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(K,{onSubmit:function(a){return t.SubmitPindah(a)},onSend:this.props.onSend,tambahModal:this.tambahModal}))))))))}}]),e}(l.Component);a.default=Object(d.b)((function(t){return{listBarang:t.provinsi.pindahBarang,listEditPindahBarang:t.provinsi.listEditPindahBarang,noFaktur:t.provinsi.noFaktur,username:t.provinsi.username,sumBruto:t.perhitungan.sumBruto,sumNetto:t.perhitungan.sumNetto,sumRp:t.perhitungan.sumRp,sumPkg:t.perhitungan.sumPkg,sumQty:t.perhitungan.sumQty,onSend:t.provinsi.onSend}}),null)(H)}}]);
//# sourceMappingURL=110.2dd86ac3.chunk.js.map