(this.webpackJsonpAyuGold=this.webpackJsonpAyuGold||[]).push([[155],{1162:function(t,a,e){"use strict";e.r(a);var n=e(64),o=e(24),i=e(25),l=e(27),s=e(26),r=e(0),c=e.n(r),d=e(216),u=e.n(d),p=e(130),m=e.n(p),h=e(217),g=e.n(h),k=e(65),b=e(17),v=e(13),O=e.n(v),T=e(12),f=e(327),E=e(328),j=e(331),N=e(23),S=e(107),_=e(129),A=e(47),F=e.n(A),y=e(34),B=e(167),K=e(5),L=e(52),w=e(53),G=e(43),x=Object(r.lazy)((function(){return e.e(149).then(e.bind(null,1121))})),I=Object(r.lazy)((function(){return Promise.resolve().then(e.bind(null,219))})),M=p.Search.SearchBar,P=function(t){Object(l.a)(e,t);var a=Object(s.a)(e);function e(t){var i;return Object(o.a)(this,e),(i=a.call(this,t)).changeInput=function(t){return function(a){i.setState(Object(n.a)({},t,a.target.value))}},i.state={jenisBarang:"RONGSOK",listLokasi:[],mulai:!1,tambahBarang:"col-lg-12 d-none",columns:[{dataField:"kode_jenis",text:"Kode Jenis",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_cetak",text:"Cap Kode",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"gross",text:"Gross (Gr)",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"pkg",text:"Pkg (Gr)",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"bruto",text:"Berat (Gr)",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"kadar_modal",text:"Kode Tukar",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}},{dataField:"netto",text:"Netto (Gr)",align:"right",headerAlign:"right",sort:!0,headerStyle:function(){return{width:"10%"}}}]},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(S.h)()),this.props.dispatch(Object(S.f)()),this.props.dispatch(Object(B.d)()),this.props.dispatch(Object(k.b)()),this.props.dispatch(Object(w.e)()),this.props.dispatch(Object(N.l)("totalanTimbangan")),this.props.dispatch(Object(N.o)("totalanTimbangan")),this.props.dispatch(Object(N.q)("totalanTimbangan")),this.props.dispatch(Object(N.m)("totalanTimbangan")),this.props.dispatch(Object(N.s)("totalanTimbangan")),this.props.dispatch(Object(N.r)("totalanTimbangan")),null!==localStorage.getItem("totalanTimbangan")&&this.setState({tambahBarang:"col-lg-12"})}},{key:"handleSubmit",value:function(t){if(void 0===t.gross)return Object(L.e)("Mohon Isi Gross"),!1;if(void 0===t.pkg)return Object(L.e)("Mohon isi Package"),!1;if("DEFAULT"===t.kodeBarang||void 0===t.kodeBarang)return Object(L.e)("Mohon Pilih kode Model"),!1;console.log(t.kodeBarang);var a=(t.kodeBarang?t.kodeBarang:"DEFAULT|DEFUALT|DEFAULT|DEFAULT").split("|"),e={kode_kategori:a[4],kode_jenis:a[0],kadar_cetak:(a[1]||0).toString(),kadar_modal:a[3],kadar_jual:a[2],qty:1,plastik:0,kulit:0,pkg:parseFloat(t.pkg),gross:parseFloat(t.gross),bruto:parseFloat(t.gross)-parseFloat(t.pkg),netto:parseFloat(t.netto)},n=JSON.parse(localStorage.getItem("totalanTimbangan"))||[];n.push(e),localStorage.setItem("totalanTimbangan",JSON.stringify(n)),Object(K.c)("totalan-barang/post-totalan-barang/".concat(this.props.noFaktur),e),O.a.fire({position:"top-right",icon:"success",text:"Transaksi Berhasil",timer:1500,showConfirmButton:!1}),this.props.dispatch(Object(T.b)("FormModalTimbangan")),this.props.dispatch(Object(S.h)()),this.props.dispatch(Object(S.f)())}},{key:"startTotalan",value:function(){var t=this;if(void 0===this.props.kode_kelompok)return Object(L.e)("Mohon isi Kode Kelompok"),!1;if(void 0===this.props.tanggal)return Object(L.e)("Mohon Isi Tanggal"),!1;if(void 0===this.props.lokasiSelected)return Object(L.e)("Mohon isi Lokasi"),!1;this.setState({mulai:!0});var a={no_totalan:this.props.noFaktur,kode_kelompok:this.props.kode_kelompok,tanggal:this.props.tanggal,kode_lokasi:this.props.lokasiSelected};Object(K.c)("totalan-barang/start-proses-totalan",a).then((function(){return t.setState({mulai:!0})}))}},{key:"batalTotalan",value:function(){var t=this,a="";if(void 0===this.props.status_totalan.no_totalan)return Object(L.e)("Anda Belum Memulai Totalan"),!1;a=this.props.status_totalan.no_totalan,Object(K.c)("totalan-barang/close-totalan/".concat(a)).then((function(){return Object(L.b)("Batal Totalan Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return localStorage.removeItem("totalanTimbangan")})).then((function(){return t.props.dispatch(Object(k.b)())})).then((function(){return window.location.reload()}))}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"card"},c.a.createElement(_.default,{title:"Totalan Timbangan"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",null,"Status Totalan : "),c.a.createElement("button",{className:"btn btn-success mb-3"},void 0===this.props.status_totalan.no_totalan?"TOTALAN KOSONG, ANDA BISA LAKUKAN TOTALAN SEKARANG":"TOTALAN SEDANG BERJALAN"),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:this.state.mulai?"col-lg-12 d-none":void 0===this.props.status_totalan.no_totalan?"col-lg-12":"col-lg-12 d-none"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"kode_kelompok",component:y.b,options:[{value:"PERHIASAN",name:"PERHIASAN"},{value:"CIOK",name:"CIOK"},{value:"RONGSOK",name:"RONGSOK"}],type:"text",label:"Kode Kelompok",placeholder:"Masukan "})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"tanggal",component:y.a,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(f.a,{name:"lokasi",component:y.b,options:this.props.dataLokasiPindah.map((function(t){return{value:t.kode_lokasi,name:t.nama_lokasi}})),type:"text",label:"Lokasi",placeholder:"Masukan Lokasi"})))),c.a.createElement("div",{className:"col-lg-12 mt-3 mb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t.batalTotalan()}},"Batal Totalan")),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:this.state.mulai?"text-right d-none":void 0===this.props.status_totalan.no_totalan?"text-right":"text-right d-none"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.startTotalan()}},"Mulai Totalan"))))),c.a.createElement("div",{className:this.state.mulai?"col-lg-12":void 0===this.props.status_totalan.no_totalan?"col-lg-12 d-none":"col-lg-12"},c.a.createElement(x,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(a){return t.handleSubmit(a)}})),c.a.createElement("div",{className:"col-lg-12 mt-2"},this.props.totalanTimbangan?c.a.createElement(m.a,{keyField:"kodeKelompok",data:this.props.totalanTimbangan,columns:this.state.columns,search:!0},(function(t){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"text-right mt-5 mb-3"},c.a.createElement(M,Object.assign({},t.searchProps,{className:"form-control",placeholder:"Tuliskan Kode / Nama",style:{margin:0,top:"50%"}}))),c.a.createElement(u.a,Object.assign({},t.baseProps,{striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:g()()})))})):c.a.createElement(u.a,{keyField:"kodeKelompok",data:[],columns:this.state.columns,bordered:!0,headerClasses:"header-table",noDataIndication:"Tidak Ada Data"}))))),c.a.createElement(I,{content:c.a.createElement(r.Suspense,{fallback:c.a.createElement(F.a,{width:"100%",height:50,count:5})},c.a.createElement(x,{noFaktur:this.props.noFaktur,jenisBarang:this.props.kode_kelompok,onSubmit:function(a){return t.handleSubmit(a)}})),title:""}))}}]),e}(r.Component);P=Object(E.a)({form:"TotalanTimbangan",enableReinitialize:!0})(P);var D=Object(j.a)("TotalanTimbangan");a.default=Object(b.b)((function(t){var a,e,n=D(t,"tanggal","kode_kelompok","lokasi"),o=n.tanggal,i=n.kode_kelompok,l=n.lokasi;return{totalanTimbangan:t.provinsi.totalanTimbangan,noFaktur:t.provinsi.noFaktur,listTotalanTimbangan:t.provinsi.listTotalanTimbangan,sumBruto:t.perhitungan.sumBruto,sumNetto:t.perhitungan.sumNetto,sumGross:t.perhitungan.sumGross,sumPkg:t.perhitungan.sumPkg,sumQty:t.perhitungan.sumQty,sumRp:t.perhitungan.sumRp,onSend:t.provinsi.onSend,status_totalan:t.provinsi.status_totalan,lokasi:t.provinsi.lokasi,tanggal:o,kode_kelompok:i,lokasiSelected:l,dataLokasiPindah:t.provinsi.dataLokasiPindah,initialValues:{kode_kelompok:null===(a=t.provinsi.status_totalan)||void 0===a?void 0:a.kode_kelompok,tanggal:(null===(e=t.provinsi.status_totalan)||void 0===e?void 0:e.tanggal)||Object(G.b)()}}}))(P)}}]);
//# sourceMappingURL=155.140d6e96.chunk.js.map