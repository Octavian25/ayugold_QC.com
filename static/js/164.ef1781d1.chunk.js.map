{"version":3,"sources":["Validasi/validasiPO.jsx"],"names":["validasiPO","props","nextStep","step","state","setState","step2","step1","dispatch","getValidasiPOSelected","prevStep","columns","dataField","text","align","headerAlign","formatter","data","formatOptional","csvExport","rowContent","row","className","data-tip","data-for","data-tut","onClick","kirimvalidasi","id","type","effect","cancelValidasi","no_preorder","step3","angka","localStorage","setItem","this","getValidasiPO","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","AxiosMasterPut","berhasil","removeItem","catch","gagal","detail_barang","map","_id","kode_kategori","nama_jenis","status_valid","validate_by","validate_date","input_by","input_date","__v","AxiosMasterPost","keyField","search","striped","hover","condensed","bordered","headerClasses","pagination","paginationFactory","uuid","validasiPOSelected","batalalidasi","tipeTransaksi","Component","reduxForm","form","enableReinitialize","connect","provinsi"],"mappings":"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","file":"static/js/164.ef1781d1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n// import { addFaktur, checkReplikasiValidasi, deleteFaktur } from \"../FindIndex\";\r\nimport { berhasil, gagal } from \"../Alert\";\r\nimport uuid from \"react-uuid\";\r\nimport HeaderCard from \"../HeaderCard\";\r\nimport { AxiosMasterPost, AxiosMasterPut } from \"../Axios\";\r\nimport GlobalTabel from \"../GlobalComponent/GlobalTabel\";\r\nimport {\r\n  getValidasiPO,\r\n  getValidasiPOSelected,\r\n} from \"../actions/validasiPOAction\";\r\nimport Swal from \"sweetalert2\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { formatOptional } from \"../helper\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    validasiPO: state.provinsi.validasiPO,\r\n    validasiPOSelected: state.provinsi.validasiPOSelected,\r\n  };\r\n};\r\n\r\nclass validasiPO extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      columns: [\r\n        {\r\n          dataField: \"tanggal\",\r\n          text: \"Tanggal\",\r\n        },\r\n        {\r\n          dataField: \"no_preorder\",\r\n          text: \"Nomor PO\",\r\n        },\r\n        {\r\n          dataField: \"kode_lokasi\",\r\n          text: \"Lokasi\",\r\n        },\r\n        {\r\n          dataField: \"kode_sales\",\r\n          text: \"Sales\",\r\n        },\r\n        {\r\n          dataField: \"total_netto\",\r\n          text: \"Netto (Gr)\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n          formatter: (data) => {\r\n            return formatOptional(data);\r\n          },\r\n        },\r\n        {\r\n          dataField: \"disc_persen\",\r\n          text: \"Disc (%)\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n        },\r\n        {\r\n          dataField: \"total_netto_disc_ext\",\r\n          text: \"Netto - Disc Ext\",\r\n          align: \"right\",\r\n          headerAlign: \"right\",\r\n          formatter: (data) => {\r\n            return formatOptional(data);\r\n          },\r\n        },\r\n        {\r\n          dataField: \"Aksi\",\r\n          text: \"Aksi\",\r\n          csvExport: false,\r\n          formatter: (rowContent, row) => {\r\n            return (\r\n              <div className=\"mx-auto\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-lg-6\">\r\n                    <button\r\n                      data-tip\r\n                      data-for=\"validasi\"\r\n                      className=\"btn btn-success mr-2\"\r\n                      data-tut=\"reactour_4\"\r\n                      onClick={() => this.kirimvalidasi(row)}\r\n                    >\r\n                      <i className=\"fa fa-check \"></i>\r\n                      <ReactTooltip id=\"validasi\" type=\"dark\" effect=\"solid\">\r\n                        <span>Validasi</span>\r\n                      </ReactTooltip>\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"col-lg-6\">\r\n                    <button\r\n                      data-tip\r\n                      data-for=\"cancel\"\r\n                      className=\"btn btn-danger mr-2\"\r\n                      data-tut=\"reactour_4\"\r\n                      onClick={() => this.cancelValidasi(row.no_preorder)}\r\n                    >\r\n                      <i className=\"fa fa-times \"></i>\r\n                      <ReactTooltip id=\"cancel\" type=\"dark\" effect=\"solid\">\r\n                        <span>Cancel</span>\r\n                      </ReactTooltip>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n\r\n      step: 0,\r\n      step1: \"row\",\r\n      step2: \"row d-none\",\r\n      step3: \"row d-none\",\r\n      angka: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    localStorage.setItem(\"FakturTerpilih\", \"[]\");\r\n    localStorage.setItem(\"FakturTerpilih_kirim\", \"[]\");\r\n    this.props.dispatch(getValidasiPO());\r\n  }\r\n\r\n  nextStep = () => {\r\n    const { step } = this.state;\r\n    if (step === 0) {\r\n      this.setState({ step: step + 1, step2: \"row\", step1: \"row d-none\" });\r\n    }\r\n    this.props.dispatch(getValidasiPOSelected());\r\n  };\r\n  prevStep = () => {\r\n    const { step } = this.state;\r\n    if (step === 1) {\r\n      this.setState({ step: step - 1, step2: \"row d-none\", step1: \"row\" });\r\n    }\r\n  };\r\n\r\n  cancelValidasi(data) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin ?\",\r\n      text: \"Anda Akan Cancel Data PO Ini ?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Yes, delete it!\",\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        AxiosMasterPut(\"pre-order/cancel/\" + data)\r\n          .then(() => berhasil(\"Berhasil Cancel Validasi\"))\r\n          .then(() => this.prevStep())\r\n          .then(() => this.props.dispatch(getValidasiPO()))\r\n          .then(() => localStorage.removeItem(\"FakturTerpilih\"))\r\n          .then(() => localStorage.removeItem(\"FakturTerpilih_kirim\"))\r\n          .catch(() => gagal(\"Gagal Validasi, Check Koneksi Anda\"));\r\n      }\r\n    });\r\n  }\r\n\r\n  kirimvalidasi(data) {\r\n    data.detail_barang.map((data) => {\r\n      delete data._id;\r\n      delete data.kode_kategori;\r\n      delete data.nama_jenis;\r\n      return true;\r\n    });\r\n    delete data.status_valid;\r\n    delete data.validate_by;\r\n    delete data.validate_date;\r\n    delete data.input_by;\r\n    delete data.input_date;\r\n    delete data.__v;\r\n    AxiosMasterPost(\"validate-pre-order/simpan\", data)\r\n      .then(() => berhasil(\"Berhasil Validasi\"))\r\n      .then(() => this.prevStep())\r\n      .then(() => this.props.dispatch(getValidasiPO()))\r\n      .then(() => localStorage.removeItem(\"FakturTerpilih\"))\r\n      .then(() => localStorage.removeItem(\"FakturTerpilih_kirim\"))\r\n      .catch(() => gagal(\"Gagal Validasi, Check Koneksi Anda\"));\r\n  }\r\n\r\n  batalalidasi(data) {\r\n    data.detail_barang.map((data) => {\r\n      delete data._id;\r\n      delete data.kode_kategori;\r\n      delete data.nama_jenis;\r\n      return true;\r\n    });\r\n    delete data.status_valid;\r\n    delete data.validate_by;\r\n    delete data.validate_date;\r\n    delete data.input_by;\r\n    delete data.input_date;\r\n    delete data.__v;\r\n    AxiosMasterPost(\"validate-pre-order/batal\", data)\r\n      .then(() => berhasil(\"Berhasil Batal Validasi\"))\r\n      .then(() => this.prevStep())\r\n      .then(() => this.props.dispatch(getValidasiPO()))\r\n      .then(() => localStorage.removeItem(\"FakturTerpilih\"))\r\n      .then(() => localStorage.removeItem(\"FakturTerpilih_kirim\"))\r\n      .catch(() => gagal(\"Gagal Batal Validasi, Check Koneksi Anda\"));\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"card\">\r\n          <HeaderCard title=\"Validasi Pre Order\" />\r\n          <div className=\"card-body\">\r\n            <div className=\"col-lg-12\">\r\n              <div className=\"row\">\r\n                {/* <div className=\"col-lg-12 col-md-12\">\r\n                  <Stepper\r\n                    steps={[\r\n                      { title: \"Pilih Data\" },\r\n                      { title: \"Validasi Data\" },\r\n                      // { title: \"Data Rekening\" },\r\n                    ]}\r\n                    activeStep={this.state.step}\r\n                  />\r\n                </div> */}\r\n                <div className=\"col-lg-12\">\r\n                  <div className={this.state.step1}>\r\n                    <div className=\"col-lg-12 mt-3\">\r\n                      <GlobalTabel\r\n                        keyField=\"no_preorder\"\r\n                        data={this.props.validasiPO}\r\n                        columns={this.state.columns}\r\n                        search\r\n                        striped\r\n                        hover\r\n                        condensed\r\n                        bordered={true}\r\n                        headerClasses=\"header-table\"\r\n                        pagination={paginationFactory()}\r\n                        // selectRow={selectRow}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-lg-12\">\r\n                      <div className=\"text-right\">\r\n                        <button\r\n                          className=\"btn btn-primary\"\r\n                          onClick={() => this.nextStep()}\r\n                        >\r\n                          Next\r\n                          <i className=\"fa fa-chevron-right ml-3\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className={this.state.step2}>\r\n                    <div className=\"col-lg-12 mt-3\">\r\n                      <GlobalTabel\r\n                        keyField={uuid()}\r\n                        data={this.props.validasiPOSelected}\r\n                        columns={this.state.columns}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-lg-12\">\r\n                      <div className=\"row\">\r\n                        <div className=\" col-lg-6 text-left\">\r\n                          <button\r\n                            className=\"btn btn-primary\"\r\n                            onClick={() => this.prevStep()}\r\n                          >\r\n                            <i className=\"fa fa-chevron-left mr-3\"></i>\r\n                            BACK\r\n                          </button>\r\n                        </div>\r\n                        <div className=\"ml-auto mr-3\">\r\n                          <div className=\"row\">\r\n                            <button\r\n                              className=\"btn btn-danger\"\r\n                              onClick={() =>\r\n                                this.batalalidasi(this.state.tipeTransaksi)\r\n                              }\r\n                            >\r\n                              <i className=\"fa fa-times mr-3\"></i>\r\n                              BATAL VALIDASI\r\n                            </button>\r\n                            <button\r\n                              className=\"btn btn-primary ml-2\"\r\n                              onClick={() =>\r\n                                this.kirimvalidasi(this.state.tipeTransaksi)\r\n                              }\r\n                            >\r\n                              <i className=\"fa fa-check mr-3\"></i>\r\n                              VALIDASI\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nvalidasiPO = reduxForm({\r\n  form: \"validasiPO\",\r\n  enableReinitialize: true,\r\n})(validasiPO);\r\nexport default connect(maptostate, null)(validasiPO);\r\n"],"sourceRoot":""}